GAS LISTING /tmp/ccHmbt1y.s 			page 1


   1               		.file	"main.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.stabs	"/home/pedro/RTOS/Lista-1/",100,0,2,.Ltext0
   8               		.stabs	"main.c",100,0,2,.Ltext0
   9               		.text
  10               	.Ltext0:
  11               		.stabs	"gcc2_compiled.",60,0,0,0
  12               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  13               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,0,0
  14               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  15               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  16               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  17               		.stabs	"__int128:t(0,6)=@s128;r(0,6);02000000000000000000000000000000000000000000;0177777777777777
  18               		.stabs	"__int128 unsigned:t(0,7)=@s128;r(0,7);0;03777777777777777777777777777777777777777777;",128
  19               		.stabs	"long long int:t(0,8)=@s64;r(0,8);01000000000000000000000;00777777777777777777777;",128,0,0
  20               		.stabs	"long long unsigned int:t(0,9)=@s64;r(0,9);0;01777777777777777777777;",128,0,0,0
  21               		.stabs	"short int:t(0,10)=r(0,10);-32768;32767;",128,0,0,0
  22               		.stabs	"short unsigned int:t(0,11)=r(0,11);0;0177777;",128,0,0,0
  23               		.stabs	"signed char:t(0,12)=@s8;r(0,12);-128;127;",128,0,0,0
  24               		.stabs	"unsigned char:t(0,13)=@s8;r(0,13);0;255;",128,0,0,0
  25               		.stabs	"float:t(0,14)=r(0,1);4;0;",128,0,0,0
  26               		.stabs	"double:t(0,15)=r(0,1);4;0;",128,0,0,0
  27               		.stabs	"long double:t(0,16)=r(0,1);4;0;",128,0,0,0
  28               		.stabs	"_Float32:t(0,17)=r(0,1);4;0;",128,0,0,0
  29               		.stabs	"short _Fract:t(0,18)=r(0,1);1;0;",128,0,0,0
  30               		.stabs	"_Fract:t(0,19)=r(0,1);2;0;",128,0,0,0
  31               		.stabs	"long _Fract:t(0,20)=r(0,1);4;0;",128,0,0,0
  32               		.stabs	"long long _Fract:t(0,21)=r(0,1);8;0;",128,0,0,0
  33               		.stabs	"unsigned short _Fract:t(0,22)=r(0,1);1;0;",128,0,0,0
  34               		.stabs	"unsigned _Fract:t(0,23)=r(0,1);2;0;",128,0,0,0
  35               		.stabs	"unsigned long _Fract:t(0,24)=r(0,1);4;0;",128,0,0,0
  36               		.stabs	"unsigned long long _Fract:t(0,25)=r(0,1);8;0;",128,0,0,0
  37               		.stabs	"_Sat short _Fract:t(0,26)=r(0,1);1;0;",128,0,0,0
  38               		.stabs	"_Sat _Fract:t(0,27)=r(0,1);2;0;",128,0,0,0
  39               		.stabs	"_Sat long _Fract:t(0,28)=r(0,1);4;0;",128,0,0,0
  40               		.stabs	"_Sat long long _Fract:t(0,29)=r(0,1);8;0;",128,0,0,0
  41               		.stabs	"_Sat unsigned short _Fract:t(0,30)=r(0,1);1;0;",128,0,0,0
  42               		.stabs	"_Sat unsigned _Fract:t(0,31)=r(0,1);2;0;",128,0,0,0
  43               		.stabs	"_Sat unsigned long _Fract:t(0,32)=r(0,1);4;0;",128,0,0,0
  44               		.stabs	"_Sat unsigned long long _Fract:t(0,33)=r(0,1);8;0;",128,0,0,0
  45               		.stabs	"short _Accum:t(0,34)=r(0,1);2;0;",128,0,0,0
  46               		.stabs	"_Accum:t(0,35)=r(0,1);4;0;",128,0,0,0
  47               		.stabs	"long _Accum:t(0,36)=r(0,1);8;0;",128,0,0,0
  48               		.stabs	"long long _Accum:t(0,37)=r(0,1);8;0;",128,0,0,0
  49               		.stabs	"unsigned short _Accum:t(0,38)=r(0,1);2;0;",128,0,0,0
  50               		.stabs	"unsigned _Accum:t(0,39)=r(0,1);4;0;",128,0,0,0
  51               		.stabs	"unsigned long _Accum:t(0,40)=r(0,1);8;0;",128,0,0,0
  52               		.stabs	"unsigned long long _Accum:t(0,41)=r(0,1);8;0;",128,0,0,0
  53               		.stabs	"_Sat short _Accum:t(0,42)=r(0,1);2;0;",128,0,0,0
  54               		.stabs	"_Sat _Accum:t(0,43)=r(0,1);4;0;",128,0,0,0
  55               		.stabs	"_Sat long _Accum:t(0,44)=r(0,1);8;0;",128,0,0,0
  56               		.stabs	"_Sat long long _Accum:t(0,45)=r(0,1);8;0;",128,0,0,0
  57               		.stabs	"_Sat unsigned short _Accum:t(0,46)=r(0,1);2;0;",128,0,0,0
GAS LISTING /tmp/ccHmbt1y.s 			page 2


  58               		.stabs	"_Sat unsigned _Accum:t(0,47)=r(0,1);4;0;",128,0,0,0
  59               		.stabs	"_Sat unsigned long _Accum:t(0,48)=r(0,1);8;0;",128,0,0,0
  60               		.stabs	"_Sat unsigned long long _Accum:t(0,49)=r(0,1);8;0;",128,0,0,0
  61               		.stabs	"void:t(0,50)=(0,50)",128,0,0,0
  62               		.stabs	"/usr/lib/avr/include/avr/io.h",130,0,0,0
  63               		.stabs	"/usr/lib/avr/include/avr/sfr_defs.h",130,0,0,0
  64               		.stabs	"/usr/lib/avr/include/inttypes.h",130,0,0,0
  65               		.stabs	"/usr/lib/gcc/avr/7.3.0/include/stdint.h",130,0,0,0
  66               		.stabs	"/usr/lib/avr/include/stdint.h",130,0,0,0
  67               		.stabs	"int8_t:t(5,1)=(0,12)",128,0,125,0
  68               		.stabs	"uint8_t:t(5,2)=(0,13)",128,0,126,0
  69               		.stabs	"int16_t:t(5,3)=(0,1)",128,0,127,0
  70               		.stabs	"uint16_t:t(5,4)=(0,4)",128,0,128,0
  71               		.stabs	"int32_t:t(5,5)=(0,3)",128,0,129,0
  72               		.stabs	"uint32_t:t(5,6)=(0,5)",128,0,130,0
  73               		.stabs	"int64_t:t(5,7)=(0,8)",128,0,132,0
  74               		.stabs	"uint64_t:t(5,8)=(0,9)",128,0,133,0
  75               		.stabs	"intptr_t:t(5,9)=(5,3)",128,0,146,0
  76               		.stabs	"uintptr_t:t(5,10)=(5,4)",128,0,151,0
  77               		.stabs	"int_least8_t:t(5,11)=(5,1)",128,0,163,0
  78               		.stabs	"uint_least8_t:t(5,12)=(5,2)",128,0,168,0
  79               		.stabs	"int_least16_t:t(5,13)=(5,3)",128,0,173,0
  80               		.stabs	"uint_least16_t:t(5,14)=(5,4)",128,0,178,0
  81               		.stabs	"int_least32_t:t(5,15)=(5,5)",128,0,183,0
  82               		.stabs	"uint_least32_t:t(5,16)=(5,6)",128,0,188,0
  83               		.stabs	"int_least64_t:t(5,17)=(5,7)",128,0,196,0
  84               		.stabs	"uint_least64_t:t(5,18)=(5,8)",128,0,203,0
  85               		.stabs	"int_fast8_t:t(5,19)=(5,1)",128,0,217,0
  86               		.stabs	"uint_fast8_t:t(5,20)=(5,2)",128,0,222,0
  87               		.stabs	"int_fast16_t:t(5,21)=(5,3)",128,0,227,0
  88               		.stabs	"uint_fast16_t:t(5,22)=(5,4)",128,0,232,0
  89               		.stabs	"int_fast32_t:t(5,23)=(5,5)",128,0,237,0
  90               		.stabs	"uint_fast32_t:t(5,24)=(5,6)",128,0,242,0
  91               		.stabs	"int_fast64_t:t(5,25)=(5,7)",128,0,250,0
  92               		.stabs	"uint_fast64_t:t(5,26)=(5,8)",128,0,257,0
  93               		.stabs	"intmax_t:t(5,27)=(5,7)",128,0,277,0
  94               		.stabs	"uintmax_t:t(5,28)=(5,8)",128,0,282,0
  95               		.stabn	162,0,0,0
  96               		.stabn	162,0,0,0
  97               		.stabs	"int_farptr_t:t(3,1)=(5,5)",128,0,77,0
  98               		.stabs	"uint_farptr_t:t(3,2)=(5,6)",128,0,81,0
  99               		.stabn	162,0,0,0
 100               		.stabn	162,0,0,0
 101               		.stabs	"/usr/lib/avr/include/avr/fuse.h",130,0,0,0
 102               		.stabs	"__fuse_t:t(6,1)=(6,2)=s3low:(0,13),0,8;high:(0,13),8,8;extended:(0,13),16,8;;",128,0,244,0
 103               		.stabn	162,0,0,0
 104               		.stabn	162,0,0,0
 105               		.stabs	"/usr/lib/avr/include/string.h",130,0,0,0
 106               		.stabs	"/usr/lib/gcc/avr/7.3.0/include/stddef.h",130,0,0,0
 107               		.stabs	"size_t:t(8,1)=(0,4)",128,0,216,0
 108               		.stabn	162,0,0,0
 109               		.stabn	162,0,0,0
 110               		.stabs	"__vector_19:F(0,50)",36,0,70,__vector_19
 111               	.global	__vector_19
 112               		.type	__vector_19, @function
 113               	__vector_19:
 114               		.stabd	46,0,0
GAS LISTING /tmp/ccHmbt1y.s 			page 3


   1:main.c        **** /* Necess√°rio para fun√ß√µes e macros b√°sicas */
   2:main.c        **** #include <avr/io.h>
   3:main.c        **** 
   4:main.c        **** /* Os pr√≥ximos dois includes s√£o necess√°rios quando se usa interrup√ßoes */
   5:main.c        **** #include <avr/cpufunc.h>
   6:main.c        **** #include <avr/interrupt.h>
   7:main.c        **** 
   8:main.c        **** #include <stdint.h>
   9:main.c        **** #include <string.h>
  10:main.c        **** 
  11:main.c        **** #define FOSC 16000000ul
  12:main.c        **** #define BAUD 9600
  13:main.c        **** #define MYUBRR (FOSC/(8ul*BAUD) - 1)
  14:main.c        **** #define BUFFER_SIZE 255
  15:main.c        **** 
  16:main.c        **** /* Caracteres especiais */
  17:main.c        **** #define SINC 0x7e
  18:main.c        **** #define XON 0x11
  19:main.c        **** #define XOFF 0x13
  20:main.c        **** #define ESC 0x7d
  21:main.c        **** 
  22:main.c        **** /* Prot√≥tipos das fun√ß√µes */
  23:main.c        **** uint8_t write(uint8_t* buf, uint8_t n, int8_t close_packet);
  24:main.c        **** uint8_t read(uint8_t* buf, uint8_t n);
  25:main.c        **** uint16_t read_rx_buffer(void);
  26:main.c        **** uint8_t write_tx_buffer(uint8_t c);
  27:main.c        **** void enqueue_rx_buffer(uint8_t received_data);
  28:main.c        **** void flow_off(void);
  29:main.c        **** void flow_on(void);
  30:main.c        **** uint8_t is_flow_on(void);
  31:main.c        **** void delay_ms(uint16_t ms);
  32:main.c        **** void blink_led(void);
  33:main.c        **** void turn_led_on(void);
  34:main.c        **** uint8_t received_data(void);
  35:main.c        **** void reset_rxbuffer(void);
  36:main.c        **** 
  37:main.c        **** /* Vari√°veis globais */
  38:main.c        **** uint8_t rx_byte_cnt, tx_byte_cnt;
  39:main.c        **** uint8_t rx_esc, rx_state=1, rx_sinc, tx_state=1;
  40:main.c        **** uint8_t rx_buffer[BUFFER_SIZE]; /* buffer para recep√ß√£o */
  41:main.c        **** uint8_t rx_head, rx_tail; /* ponteiros para o buffer circular */
  42:main.c        **** uint8_t tx_buffer[BUFFER_SIZE];     /* buffer para transmiss√£o */
  43:main.c        **** uint8_t tx_head, tx_tail;   /* ponteiros para o buffer circular */
  44:main.c        **** uint8_t usart_transmitting;
  45:main.c        **** 
  46:main.c        **** volatile uint8_t rcvd_byte=0;
  47:main.c        **** ISR(USART_RX_vect) {
  48:main.c        ****     uint8_t received_data = UDR0;
  49:main.c        ****     
  50:main.c        ****     if (!rx_esc) {
  51:main.c        ****         if (received_data == ESC) {
  52:main.c        ****             rx_esc = 1;
  53:main.c        ****         } else if (received_data == XOFF) {
  54:main.c        ****             tx_state = 0;
  55:main.c        ****         } else if (received_data == XON) {
  56:main.c        ****             tx_state = 1;
  57:main.c        ****         } else if (received_data == SINC){
GAS LISTING /tmp/ccHmbt1y.s 			page 4


  58:main.c        ****             rx_sinc = 1;
  59:main.c        ****             rcvd_byte = 1;
  60:main.c        ****         } else {
  61:main.c        ****             enqueue_rx_buffer(received_data);
  62:main.c        ****         }
  63:main.c        ****     } else {
  64:main.c        ****         enqueue_rx_buffer(received_data);
  65:main.c        ****         rx_esc = 0;
  66:main.c        ****     }
  67:main.c        **** }
  68:main.c        **** 
  69:main.c        **** /* Flag UDREn indica se o buffer de transmiss√£o UDRn est√° vazio */
  70:main.c        **** ISR(USART_UDRE_vect)
  71:main.c        **** {
 115               		.stabn	68,0,71,.LM0-.LFBB1
 116               	.LM0:
 117               	.LFBB1:
 118 0000 1F92      		push r1
 119 0002 0F92      		push r0
 120 0004 0FB6      		in r0,__SREG__
 121 0006 0F92      		push r0
 122 0008 1124      		clr __zero_reg__
 123 000a 8F93      		push r24
 124 000c EF93      		push r30
 125 000e FF93      		push r31
 126               	/* prologue: Signal */
 127               	/* frame size = 0 */
 128               	/* stack size = 6 */
 129               	.L__stack_usage = 6
  72:main.c        ****     /*
  73:main.c        ****      * Caso tx_head == tx_tail √© porque todos os dados foram transmitidos e desabilita a interrup√
  74:main.c        ****      * Caso contr√°rio envia o dado que estava no tx_tail
  75:main.c        ****      */
  76:main.c        ****     if (tx_head == tx_tail) {
 130               		.stabn	68,0,76,.LM1-.LFBB1
 131               	.LM1:
 132 0010 E091 0000 		lds r30,tx_tail
 133 0014 8091 0000 		lds r24,tx_head
 134 0018 8E13      		cpse r24,r30
 135 001a 00C0      		rjmp .L2
  77:main.c        ****         UCSR0B &= ~(1 << UDRIE0);
 136               		.stabn	68,0,77,.LM2-.LFBB1
 137               	.LM2:
 138 001c 8091 C100 		lds r24,193
 139 0020 8F7D      		andi r24,lo8(-33)
 140 0022 8093 C100 		sts 193,r24
  78:main.c        ****         usart_transmitting = 0;
 141               		.stabn	68,0,78,.LM3-.LFBB1
 142               	.LM3:
 143 0026 1092 0000 		sts usart_transmitting,__zero_reg__
 144               	.L1:
 145               	/* epilogue start */
  79:main.c        ****     } else {
  80:main.c        ****         UDR0 = tx_buffer[tx_tail];
  81:main.c        ****         if (++tx_tail >= BUFFER_SIZE)
  82:main.c        ****             tx_tail = 0;
  83:main.c        ****     }
GAS LISTING /tmp/ccHmbt1y.s 			page 5


  84:main.c        **** }
 146               		.stabn	68,0,84,.LM4-.LFBB1
 147               	.LM4:
 148 002a FF91      		pop r31
 149 002c EF91      		pop r30
 150 002e 8F91      		pop r24
 151 0030 0F90      		pop r0
 152 0032 0FBE      		out __SREG__,r0
 153 0034 0F90      		pop r0
 154 0036 1F90      		pop r1
 155 0038 1895      		reti
 156               	.L2:
  80:main.c        ****         if (++tx_tail >= BUFFER_SIZE)
 157               		.stabn	68,0,80,.LM5-.LFBB1
 158               	.LM5:
 159 003a F0E0      		ldi r31,0
 160 003c E050      		subi r30,lo8(-(tx_buffer))
 161 003e F040      		sbci r31,hi8(-(tx_buffer))
 162 0040 8081      		ld r24,Z
 163 0042 8093 C600 		sts 198,r24
  81:main.c        ****             tx_tail = 0;
 164               		.stabn	68,0,81,.LM6-.LFBB1
 165               	.LM6:
 166 0046 8091 0000 		lds r24,tx_tail
 167 004a 8F5F      		subi r24,lo8(-(1))
 168 004c 8F3F      		cpi r24,lo8(-1)
 169 004e 01F0      		breq .L4
 170 0050 8093 0000 		sts tx_tail,r24
 171 0054 00C0      		rjmp .L1
 172               	.L4:
  82:main.c        ****     }
 173               		.stabn	68,0,82,.LM7-.LFBB1
 174               	.LM7:
 175 0056 1092 0000 		sts tx_tail,__zero_reg__
 176               		.stabn	68,0,84,.LM8-.LFBB1
 177               	.LM8:
 178 005a 00C0      		rjmp .L1
 179               		.size	__vector_19, .-__vector_19
 180               	.Lscope1:
 181               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 182               		.stabd	78,0,0
 183               		.stabs	"read_rx_buffer:F(5,4)",36,0,266,read_rx_buffer
 184               	.global	read_rx_buffer
 185               		.type	read_rx_buffer, @function
 186               	read_rx_buffer:
 187               		.stabd	46,0,0
  85:main.c        **** 
  86:main.c        **** int main(void) {
  87:main.c        ****     /* Fa√ßa a configura√ß√£o do que for necess√°rio aqui */
  88:main.c        ****     /* Seu c√≥digo aqui */
  89:main.c        ****     UCSR0A = (1 << U2X0); /* double speed */
  90:main.c        ****     UCSR0B = (1<<RXEN0) | (1 << TXEN0) | (1 << RXCIE0); /* Enable rx and tx, rx complete interrupt 
  91:main.c        ****     UCSR0C = (1<<UCSZ01) | (1<<UCSZ00); /* Set frame format: 8N1 */
  92:main.c        ****     UBRR0H = (MYUBRR>>8); /* Set baud rate */
  93:main.c        ****     UBRR0L = MYUBRR; /* Set baud rate */
  94:main.c        **** 
  95:main.c        ****     DDRB |= (1 << PB5); // Configura PB5 como sa√≠da (LED)
GAS LISTING /tmp/ccHmbt1y.s 			page 6


  96:main.c        ****     PORTB &= ~(1 << PB5); // Garante que o LED est√° apagado no in√≠cio   
  97:main.c        **** 
  98:main.c        ****     sei();
  99:main.c        **** 
 100:main.c        ****     /* Implemente os testes aqui. Veja o texto para os detalhes */
 101:main.c        ****     
 102:main.c        ****     /* Teste 2 */
 103:main.c        ****     uint8_t str_test[] = "Universidade Federal de Pernambuco\nDepartamento de Eletr√¥nica e Sistema
 104:main.c        ****     write(str_test, sizeof(str_test)-1, 1);
 105:main.c        **** 
 106:main.c        ****     delay_ms(1000);
 107:main.c        **** 
 108:main.c        ****     /* Teste 3*/
 109:main.c        ****     uint8_t i = sizeof(str_test);
 110:main.c        ****     uint8_t j = 0;
 111:main.c        ****     while (i) {
 112:main.c        ****         if (i >= 10) {
 113:main.c        ****             i -= write(str_test+j, 10, 0);
 114:main.c        ****             j += 10;
 115:main.c        ****         } else {
 116:main.c        ****             write(str_test+j, i-1, 1);
 117:main.c        ****             i = 0;
 118:main.c        ****         }
 119:main.c        ****     }
 120:main.c        **** 
 121:main.c        ****     /* Teste 4 */
 122:main.c        ****     reset_rxbuffer(); /* Limpa o buffer de rx */
 123:main.c        ****     uint16_t nbytes = 0;
 124:main.c        ****     uint8_t buffer[255];
 125:main.c        ****     while (nbytes < 300) {
 126:main.c        ****         nbytes += read(buffer, 300-nbytes > 254 ? 254 : 300-nbytes) - 1; /* Conferir se precisa des
 127:main.c        ****     }
 128:main.c        ****     flow_off();
 129:main.c        ****     if (received_data()) {
 130:main.c        ****         turn_led_on();
 131:main.c        ****     } else {
 132:main.c        ****         blink_led();
 133:main.c        ****     }
 134:main.c        **** 
 135:main.c        ****     /* Teste 5 */
 136:main.c        ****     reset_rxbuffer(); /* Limpa o buffer de rx */
 137:main.c        ****     flow_on(); /* Precisa do flow_on()? */
 138:main.c        ****     PORTB &= ~(1 << PB5); /* Apaga o LED */
 139:main.c        ****     nbytes = 0;
 140:main.c        ****     while (nbytes < 300) {
 141:main.c        ****         nbytes += read(buffer, 300-nbytes > 254 ? 254 : 300-nbytes) - 1; /* Conferir se precisa des
 142:main.c        ****     }
 143:main.c        **** 
 144:main.c        ****     flow_off();
 145:main.c        ****     if (received_data()) {
 146:main.c        ****         turn_led_on();
 147:main.c        ****     } else {
 148:main.c        ****         blink_led();
 149:main.c        ****     }
 150:main.c        **** 
 151:main.c        ****     /* Teste 6 */
 152:main.c        ****     flow_on(); /* Precisa do flow_on()? */
GAS LISTING /tmp/ccHmbt1y.s 			page 7


 153:main.c        ****     PORTB &= ~(1 << PB5); /* Apaga o LED */
 154:main.c        ****     
 155:main.c        ****     uint8_t binary_string[] = {0x00, 0x01, 0x11, 0x02, 0x13, 0x04, 0x7e, 0x05, 0x7d, 0x06};
 156:main.c        ****     i = 0;
 157:main.c        ****     
 158:main.c        ****     /* √â pra ficar reenviando a string ou envia ela apenas uma vez? */
 159:main.c        ****     while (i < sizeof(binary_string)) { 
 160:main.c        ****         if (!write(binary_string+i, 1, 0)) {
 161:main.c        ****             PORTB |= (1 << PB5); /* Acende o LED */
 162:main.c        ****         } else {
 163:main.c        ****             PORTB &= ~(1 << PB5); /* Apaga o LED */
 164:main.c        ****             i++;
 165:main.c        ****         }
 166:main.c        ****     }
 167:main.c        ****     
 168:main.c        ****     /* Teste 7 */
 169:main.c        ****     reset_rxbuffer(); /* Limpa o buffer de rx */
 170:main.c        ****     uint8_t comp_str[] = "Desenvolvimento de sistemas embarcados";
 171:main.c        ****     uint8_t comp_buffer[sizeof(comp_str)];
 172:main.c        ****     uint8_t k = 0;
 173:main.c        ****     /* Loop infinito necess√°rio em qualquer programa para
 174:main.c        ****        embarcados */
 175:main.c        ****     while (1) {
 176:main.c        ****         /* Letra a */
 177:main.c        ****         read(comp_buffer, 254);
 178:main.c        **** 
 179:main.c        ****         /*
 180:main.c        ****         for (int z = 0; z < strlen((const char *)comp_buffer); z++){
 181:main.c        ****             write_tx_buffer(comp_buffer[z]);
 182:main.c        ****         }
 183:main.c        ****         write_tx_buffer('\n');
 184:main.c        ****         */
 185:main.c        ****         
 186:main.c        ****         if (memcmp(comp_buffer, comp_str, strlen((const char *)comp_str)+1) == 0) {
 187:main.c        ****             PORTB |= (1 << PB5);
 188:main.c        ****         } else {
 189:main.c        ****             PORTB &= ~(1 << PB5);
 190:main.c        ****         }
 191:main.c        **** 
 192:main.c        ****         /* Letra b */
 193:main.c        ****         k = 0;
 194:main.c        ****         while (read(comp_buffer+k, 10) == 11) {
 195:main.c        ****             k += 10;
 196:main.c        ****         };
 197:main.c        ****         
 198:main.c        ****         /*
 199:main.c        ****         for (int z = 0; z < strlen((const char *)comp_buffer); z++){
 200:main.c        ****             write_tx_buffer(comp_buffer[z]);
 201:main.c        ****         }
 202:main.c        ****         write_tx_buffer('\n');
 203:main.c        ****         */
 204:main.c        **** 
 205:main.c        ****         if (memcmp(comp_buffer, comp_str, strlen((const char *)comp_str)+1) == 0) {
 206:main.c        ****             PORTB |= (1 << PB5);
 207:main.c        ****         } else {
 208:main.c        ****             PORTB &= ~(1 << PB5);
 209:main.c        ****         }
GAS LISTING /tmp/ccHmbt1y.s 			page 8


 210:main.c        ****     }
 211:main.c        **** 
 212:main.c        ****     return 0;
 213:main.c        **** }
 214:main.c        **** 
 215:main.c        **** /* Fun√ß√µes */
 216:main.c        **** 
 217:main.c        **** uint8_t write(uint8_t* buf, uint8_t n, int8_t close_packet){
 218:main.c        ****     tx_byte_cnt = 0;
 219:main.c        **** 
 220:main.c        ****     if (!tx_state) {
 221:main.c        ****         return 0;
 222:main.c        ****     }
 223:main.c        ****     
 224:main.c        ****     while ((tx_byte_cnt < n) && tx_state) {
 225:main.c        ****         if (buf[tx_byte_cnt] == SINC || buf[tx_byte_cnt] == XON || buf[tx_byte_cnt] == XOFF || buf[
 226:main.c        ****             write_tx_buffer(ESC);
 227:main.c        ****         }
 228:main.c        ****         write_tx_buffer(buf[tx_byte_cnt]);
 229:main.c        ****         tx_byte_cnt++;
 230:main.c        ****     }
 231:main.c        **** 
 232:main.c        ****     if (close_packet && tx_state) {
 233:main.c        ****         write_tx_buffer(SINC);
 234:main.c        ****     }
 235:main.c        **** 
 236:main.c        ****     return tx_byte_cnt;
 237:main.c        **** }
 238:main.c        **** 
 239:main.c        **** /* Falta limitar o byte_cnt caso ultrapasse o tamanho do buffer */
 240:main.c        **** uint8_t read(uint8_t* buf, uint8_t n) {
 241:main.c        ****     uint8_t received_byte, byte_cnt = 0;
 242:main.c        **** 
 243:main.c        ****     while (byte_cnt < n) { 
 244:main.c        ****         if (!rx_state) {
 245:main.c        ****             return 0;
 246:main.c        ****         }
 247:main.c        ****         while (!rcvd_byte);
 248:main.c        **** 
 249:main.c        ****         received_byte = read_rx_buffer();
 250:main.c        **** 
 251:main.c        ****         if (rx_sinc) {
 252:main.c        ****             buf[byte_cnt] = '\0';
 253:main.c        ****             rx_sinc = 0;
 254:main.c        ****             rcvd_byte = 0;
 255:main.c        ****             return byte_cnt;
 256:main.c        ****         }
 257:main.c        **** 
 258:main.c        ****         buf[byte_cnt] = received_byte;
 259:main.c        ****         byte_cnt++;
 260:main.c        **** 
 261:main.c        ****         rcvd_byte = 0;
 262:main.c        ****     }
 263:main.c        ****     return n+1;
 264:main.c        **** }
 265:main.c        **** 
 266:main.c        **** uint16_t read_rx_buffer(void)
GAS LISTING /tmp/ccHmbt1y.s 			page 9


 267:main.c        **** {
 188               		.stabn	68,0,267,.LM9-.LFBB2
 189               	.LM9:
 190               	.LFBB2:
 191               	/* prologue: function */
 192               	/* frame size = 0 */
 193               	/* stack size = 0 */
 194               	.L__stack_usage = 0
 268:main.c        ****     uint8_t rc = 0, c = 0;
 269:main.c        **** 
 270:main.c        ****     cli();
 195               		.stabn	68,0,270,.LM10-.LFBB2
 196               	.LM10:
 197               	/* #APP */
 198               	 ;  270 "main.c" 1
 199 005c F894      		cli
 200               	 ;  0 "" 2
 271:main.c        ****     if (rx_head != rx_tail) {
 201               		.stabn	68,0,271,.LM11-.LFBB2
 202               	.LM11:
 203               	/* #NOAPP */
 204 005e 9091 0000 		lds r25,rx_tail
 205 0062 8091 0000 		lds r24,rx_head
 206 0066 8917      		cp r24,r25
 207 0068 01F0      		breq .L8
 272:main.c        ****         c = rx_buffer[rx_tail];
 208               		.stabn	68,0,272,.LM12-.LFBB2
 209               	.LM12:
 210 006a E92F      		mov r30,r25
 211 006c F0E0      		ldi r31,0
 212 006e E050      		subi r30,lo8(-(rx_buffer))
 213 0070 F040      		sbci r31,hi8(-(rx_buffer))
 214 0072 8081      		ld r24,Z
 273:main.c        ****         if (++rx_tail >= BUFFER_SIZE)
 215               		.stabn	68,0,273,.LM13-.LFBB2
 216               	.LM13:
 217 0074 9F5F      		subi r25,lo8(-(1))
 218 0076 9F3F      		cpi r25,lo8(-1)
 219 0078 01F0      		breq .L7
 220 007a 9093 0000 		sts rx_tail,r25
 221               	.L9:
 268:main.c        **** 
 222               		.stabn	68,0,268,.LM14-.LFBB2
 223               	.LM14:
 224 007e 20E0      		ldi r18,0
 225               	.L6:
 274:main.c        ****             rx_tail = 0;
 275:main.c        ****     } else 
 276:main.c        ****         rc = 1;
 277:main.c        ****     sei();
 226               		.stabn	68,0,277,.LM15-.LFBB2
 227               	.LM15:
 228               	/* #APP */
 229               	 ;  277 "main.c" 1
 230 0080 7894      		sei
 231               	 ;  0 "" 2
 278:main.c        ****     return ((uint16_t) rc << 8) | c;
GAS LISTING /tmp/ccHmbt1y.s 			page 10


 279:main.c        **** }
 232               		.stabn	68,0,279,.LM16-.LFBB2
 233               	.LM16:
 234               	/* #NOAPP */
 235 0082 922F      		mov r25,r18
 236               	/* epilogue start */
 237 0084 0895      		ret
 238               	.L7:
 274:main.c        ****             rx_tail = 0;
 239               		.stabn	68,0,274,.LM17-.LFBB2
 240               	.LM17:
 241 0086 1092 0000 		sts rx_tail,__zero_reg__
 242 008a 00C0      		rjmp .L9
 243               	.L8:
 268:main.c        **** 
 244               		.stabn	68,0,268,.LM18-.LFBB2
 245               	.LM18:
 246 008c 80E0      		ldi r24,0
 276:main.c        ****     sei();
 247               		.stabn	68,0,276,.LM19-.LFBB2
 248               	.LM19:
 249 008e 21E0      		ldi r18,lo8(1)
 250 0090 00C0      		rjmp .L6
 251               		.size	read_rx_buffer, .-read_rx_buffer
 252               		.stabs	"rc:r(5,2)",64,0,268,18
 253               		.stabs	"c:r(5,2)",64,0,268,24
 254               		.stabn	192,0,0,.LFBB2-.LFBB2
 255               		.stabn	224,0,0,.Lscope2-.LFBB2
 256               	.Lscope2:
 257               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 258               		.stabd	78,0,0
 259               		.stabs	"read:F(5,2)",36,0,240,read
 260               		.stabs	"buf:P(0,51)=*(5,2)",64,0,240,24
 261               		.stabs	"n:P(5,2)",64,0,240,29
 262               	.global	read
 263               		.type	read, @function
 264               	read:
 265               		.stabd	46,0,0
 240:main.c        ****     uint8_t received_byte, byte_cnt = 0;
 266               		.stabn	68,0,240,.LM20-.LFBB3
 267               	.LM20:
 268               	.LFBB3:
 269 0092 0F93      		push r16
 270 0094 1F93      		push r17
 271 0096 CF93      		push r28
 272 0098 DF93      		push r29
 273               	/* prologue: function */
 274               	/* frame size = 0 */
 275               	/* stack size = 4 */
 276               	.L__stack_usage = 4
 277 009a D62F      		mov r29,r22
 278 009c 8C01      		movw r16,r24
 241:main.c        **** 
 279               		.stabn	68,0,241,.LM21-.LFBB3
 280               	.LM21:
 281 009e C0E0      		ldi r28,0
 282               	.L11:
GAS LISTING /tmp/ccHmbt1y.s 			page 11


 243:main.c        ****         if (!rx_state) {
 283               		.stabn	68,0,243,.LM22-.LFBB3
 284               	.LM22:
 285 00a0 CD13      		cpse r28,r29
 286 00a2 00C0      		rjmp .L15
 263:main.c        **** }
 287               		.stabn	68,0,263,.LM23-.LFBB3
 288               	.LM23:
 289 00a4 81E0      		ldi r24,lo8(1)
 290 00a6 8C0F      		add r24,r28
 291 00a8 00C0      		rjmp .L10
 292               	.L15:
 244:main.c        ****             return 0;
 293               		.stabn	68,0,244,.LM24-.LFBB3
 294               	.LM24:
 295 00aa 8091 0000 		lds r24,rx_state
 296 00ae 8823      		tst r24
 297 00b0 01F0      		breq .L10
 298               	.L13:
 247:main.c        **** 
 299               		.stabn	68,0,247,.LM25-.LFBB3
 300               	.LM25:
 301 00b2 8091 0000 		lds r24,rcvd_byte
 302 00b6 8823      		tst r24
 303 00b8 01F0      		breq .L13
 249:main.c        **** 
 304               		.stabn	68,0,249,.LM26-.LFBB3
 305               	.LM26:
 306 00ba 0E94 0000 		call read_rx_buffer
 251:main.c        ****             buf[byte_cnt] = '\0';
 307               		.stabn	68,0,251,.LM27-.LFBB3
 308               	.LM27:
 309 00be 9091 0000 		lds r25,rx_sinc
 252:main.c        ****             rx_sinc = 0;
 310               		.stabn	68,0,252,.LM28-.LFBB3
 311               	.LM28:
 312 00c2 F801      		movw r30,r16
 251:main.c        ****             buf[byte_cnt] = '\0';
 313               		.stabn	68,0,251,.LM29-.LFBB3
 314               	.LM29:
 315 00c4 9923      		tst r25
 316 00c6 01F0      		breq .L14
 252:main.c        ****             rx_sinc = 0;
 317               		.stabn	68,0,252,.LM30-.LFBB3
 318               	.LM30:
 319 00c8 1082      		st Z,__zero_reg__
 253:main.c        ****             rcvd_byte = 0;
 320               		.stabn	68,0,253,.LM31-.LFBB3
 321               	.LM31:
 322 00ca 1092 0000 		sts rx_sinc,__zero_reg__
 254:main.c        ****             return byte_cnt;
 323               		.stabn	68,0,254,.LM32-.LFBB3
 324               	.LM32:
 325 00ce 1092 0000 		sts rcvd_byte,__zero_reg__
 255:main.c        ****         }
 326               		.stabn	68,0,255,.LM33-.LFBB3
 327               	.LM33:
GAS LISTING /tmp/ccHmbt1y.s 			page 12


 328 00d2 8C2F      		mov r24,r28
 329               	.L10:
 330               	/* epilogue start */
 264:main.c        **** 
 331               		.stabn	68,0,264,.LM34-.LFBB3
 332               	.LM34:
 333 00d4 DF91      		pop r29
 334 00d6 CF91      		pop r28
 335 00d8 1F91      		pop r17
 336 00da 0F91      		pop r16
 337 00dc 0895      		ret
 338               	.L14:
 258:main.c        ****         byte_cnt++;
 339               		.stabn	68,0,258,.LM35-.LFBB3
 340               	.LM35:
 341 00de 8193      		st Z+,r24
 342 00e0 8F01      		movw r16,r30
 259:main.c        **** 
 343               		.stabn	68,0,259,.LM36-.LFBB3
 344               	.LM36:
 345 00e2 CF5F      		subi r28,lo8(-(1))
 261:main.c        ****     }
 346               		.stabn	68,0,261,.LM37-.LFBB3
 347               	.LM37:
 348 00e4 1092 0000 		sts rcvd_byte,__zero_reg__
 349 00e8 00C0      		rjmp .L11
 350               		.size	read, .-read
 351               		.stabs	"byte_cnt:r(5,2)",64,0,241,28
 352               		.stabn	192,0,0,.LFBB3-.LFBB3
 353               		.stabn	224,0,0,.Lscope3-.LFBB3
 354               	.Lscope3:
 355               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 356               		.stabd	78,0,0
 357               		.stabs	"write_tx_buffer:F(5,2)",36,0,281,write_tx_buffer
 358               		.stabs	"c:P(5,2)",64,0,281,18
 359               	.global	write_tx_buffer
 360               		.type	write_tx_buffer, @function
 361               	write_tx_buffer:
 362               		.stabd	46,0,0
 280:main.c        **** 
 281:main.c        **** uint8_t write_tx_buffer(uint8_t c) {
 363               		.stabn	68,0,281,.LM38-.LFBB4
 364               	.LM38:
 365               	.LFBB4:
 366               	/* prologue: function */
 367               	/* frame size = 0 */
 368               	/* stack size = 0 */
 369               	.L__stack_usage = 0
 370 00ea 282F      		mov r18,r24
 282:main.c        ****     uint8_t rc = 0;
 283:main.c        **** 
 284:main.c        ****     cli();
 371               		.stabn	68,0,284,.LM39-.LFBB4
 372               	.LM39:
 373               	/* #APP */
 374               	 ;  284 "main.c" 1
 375 00ec F894      		cli
GAS LISTING /tmp/ccHmbt1y.s 			page 13


 376               	 ;  0 "" 2
 285:main.c        **** 
 286:main.c        ****     if(!usart_transmitting){
 377               		.stabn	68,0,286,.LM40-.LFBB4
 378               	.LM40:
 379               	/* #NOAPP */
 380 00ee 8091 0000 		lds r24,usart_transmitting
 381 00f2 8111      		cpse r24,__zero_reg__
 382 00f4 00C0      		rjmp .L22
 287:main.c        ****         UDR0 = c;
 383               		.stabn	68,0,287,.LM41-.LFBB4
 384               	.LM41:
 385 00f6 2093 C600 		sts 198,r18
 288:main.c        ****         UCSR0B |= (1 << UDRIE0);
 386               		.stabn	68,0,288,.LM42-.LFBB4
 387               	.LM42:
 388 00fa 9091 C100 		lds r25,193
 389 00fe 9062      		ori r25,lo8(32)
 390 0100 9093 C100 		sts 193,r25
 289:main.c        ****         usart_transmitting = 1;
 391               		.stabn	68,0,289,.LM43-.LFBB4
 392               	.LM43:
 393 0104 91E0      		ldi r25,lo8(1)
 394 0106 9093 0000 		sts usart_transmitting,r25
 395               	.L23:
 290:main.c        ****     } else{
 291:main.c        ****         uint8_t next = tx_head + 1;
 292:main.c        ****         if (next >= BUFFER_SIZE)
 293:main.c        ****             next = 0;
 294:main.c        ****         if (next != tx_tail) {
 295:main.c        ****             tx_buffer[tx_head] = c;
 296:main.c        ****             tx_head = next;
 297:main.c        ****         } else  /* buffer cheio */
 298:main.c        ****             rc = 1;
 299:main.c        ****     }
 300:main.c        ****     sei();
 396               		.stabn	68,0,300,.LM44-.LFBB4
 397               	.LM44:
 398               	/* #APP */
 399               	 ;  300 "main.c" 1
 400 010a 7894      		sei
 401               	 ;  0 "" 2
 402               	/* epilogue start */
 301:main.c        ****     return rc;
 302:main.c        **** }
 403               		.stabn	68,0,302,.LM45-.LFBB4
 404               	.LM45:
 405               	/* #NOAPP */
 406 010c 0895      		ret
 407               	.L22:
 408               	.LBB2:
 291:main.c        ****         if (next >= BUFFER_SIZE)
 409               		.stabn	68,0,291,.LM46-.LFBB4
 410               	.LM46:
 411 010e E091 0000 		lds r30,tx_head
 412 0112 91E0      		ldi r25,lo8(1)
 413 0114 9E0F      		add r25,r30
GAS LISTING /tmp/ccHmbt1y.s 			page 14


 292:main.c        ****             next = 0;
 414               		.stabn	68,0,292,.LM47-.LFBB4
 415               	.LM47:
 416 0116 9F3F      		cpi r25,lo8(-1)
 417 0118 01F4      		brne .L24
 293:main.c        ****         if (next != tx_tail) {
 418               		.stabn	68,0,293,.LM48-.LFBB4
 419               	.LM48:
 420 011a 90E0      		ldi r25,0
 421               	.L24:
 294:main.c        ****             tx_buffer[tx_head] = c;
 422               		.stabn	68,0,294,.LM49-.LFBB4
 423               	.LM49:
 424 011c 8091 0000 		lds r24,tx_tail
 425 0120 8917      		cp r24,r25
 426 0122 01F0      		breq .L25
 295:main.c        ****             tx_head = next;
 427               		.stabn	68,0,295,.LM50-.LFBB4
 428               	.LM50:
 429 0124 F0E0      		ldi r31,0
 430 0126 E050      		subi r30,lo8(-(tx_buffer))
 431 0128 F040      		sbci r31,hi8(-(tx_buffer))
 432 012a 2083      		st Z,r18
 296:main.c        ****         } else  /* buffer cheio */
 433               		.stabn	68,0,296,.LM51-.LFBB4
 434               	.LM51:
 435 012c 9093 0000 		sts tx_head,r25
 436               	.LBE2:
 282:main.c        **** 
 437               		.stabn	68,0,282,.LM52-.LFBB4
 438               	.LM52:
 439 0130 80E0      		ldi r24,0
 440               	.LBB3:
 441 0132 00C0      		rjmp .L23
 442               	.L25:
 298:main.c        ****     }
 443               		.stabn	68,0,298,.LM53-.LFBB4
 444               	.LM53:
 445 0134 81E0      		ldi r24,lo8(1)
 446 0136 00C0      		rjmp .L23
 447               	.LBE3:
 448               		.size	write_tx_buffer, .-write_tx_buffer
 449               		.stabs	"rc:r(5,2)",64,0,282,24
 450               		.stabn	192,0,0,.LFBB4-.LFBB4
 451               		.stabs	"next:r(5,2)",64,0,291,25
 452               		.stabn	192,0,0,.LBB2-.LFBB4
 453               		.stabn	224,0,0,.LBE2-.LFBB4
 454               		.stabs	"next:r(5,2)",64,0,291,25
 455               		.stabn	192,0,0,.LBB3-.LFBB4
 456               		.stabn	224,0,0,.LBE3-.LFBB4
 457               		.stabn	224,0,0,.Lscope4-.LFBB4
 458               	.Lscope4:
 459               		.stabs	"",36,0,0,.Lscope4-.LFBB4
 460               		.stabd	78,0,0
 461               		.stabs	"write:F(5,2)",36,0,217,write
 462               		.stabs	"buf:P(0,51)",64,0,217,28
 463               		.stabs	"n:P(5,2)",64,0,217,16
GAS LISTING /tmp/ccHmbt1y.s 			page 15


 464               		.stabs	"close_packet:P(5,1)",64,0,217,17
 465               	.global	write
 466               		.type	write, @function
 467               	write:
 468               		.stabd	46,0,0
 217:main.c        ****     tx_byte_cnt = 0;
 469               		.stabn	68,0,217,.LM54-.LFBB5
 470               	.LM54:
 471               	.LFBB5:
 472 0138 0F93      		push r16
 473 013a 1F93      		push r17
 474 013c CF93      		push r28
 475 013e DF93      		push r29
 476               	/* prologue: function */
 477               	/* frame size = 0 */
 478               	/* stack size = 4 */
 479               	.L__stack_usage = 4
 480 0140 EC01      		movw r28,r24
 481 0142 062F      		mov r16,r22
 482 0144 142F      		mov r17,r20
 218:main.c        **** 
 483               		.stabn	68,0,218,.LM55-.LFBB5
 484               	.LM55:
 485 0146 1092 0000 		sts tx_byte_cnt,__zero_reg__
 220:main.c        ****         return 0;
 486               		.stabn	68,0,220,.LM56-.LFBB5
 487               	.LM56:
 488 014a 8091 0000 		lds r24,tx_state
 489 014e 8111      		cpse r24,__zero_reg__
 490 0150 00C0      		rjmp .L28
 491               	.L26:
 492               	/* epilogue start */
 237:main.c        **** 
 493               		.stabn	68,0,237,.LM57-.LFBB5
 494               	.LM57:
 495 0152 DF91      		pop r29
 496 0154 CF91      		pop r28
 497 0156 1F91      		pop r17
 498 0158 0F91      		pop r16
 499 015a 0895      		ret
 500               	.L32:
 501               	.LBB6:
 502               	.LBB7:
 225:main.c        ****             write_tx_buffer(ESC);
 503               		.stabn	68,0,225,.LM58-.LFBB5
 504               	.LM58:
 505 015c EC0F      		add r30,r28
 506 015e FD2F      		mov r31,r29
 507 0160 F11D      		adc r31,__zero_reg__
 508 0162 8081      		ld r24,Z
 509 0164 982F      		mov r25,r24
 510 0166 9D7F      		andi r25,lo8(-3)
 511 0168 9131      		cpi r25,lo8(17)
 512 016a 01F0      		breq .L29
 513 016c 8D57      		subi r24,lo8(-(-125))
 514 016e 8230      		cpi r24,lo8(2)
 515 0170 00F4      		brsh .L30
GAS LISTING /tmp/ccHmbt1y.s 			page 16


 516               	.L29:
 226:main.c        ****         }
 517               		.stabn	68,0,226,.LM59-.LFBB5
 518               	.LM59:
 519 0172 8DE7      		ldi r24,lo8(125)
 520 0174 0E94 0000 		call write_tx_buffer
 521               	.L30:
 228:main.c        ****         tx_byte_cnt++;
 522               		.stabn	68,0,228,.LM60-.LFBB5
 523               	.LM60:
 524 0178 E091 0000 		lds r30,tx_byte_cnt
 525 017c EC0F      		add r30,r28
 526 017e FD2F      		mov r31,r29
 527 0180 F11D      		adc r31,__zero_reg__
 528 0182 8081      		ld r24,Z
 529 0184 0E94 0000 		call write_tx_buffer
 229:main.c        ****     }
 530               		.stabn	68,0,229,.LM61-.LFBB5
 531               	.LM61:
 532 0188 8091 0000 		lds r24,tx_byte_cnt
 533 018c 8F5F      		subi r24,lo8(-(1))
 534 018e 8093 0000 		sts tx_byte_cnt,r24
 535               	.L28:
 224:main.c        ****         if (buf[tx_byte_cnt] == SINC || buf[tx_byte_cnt] == XON || buf[tx_byte_cnt] == XOFF || buf[
 536               		.stabn	68,0,224,.LM62-.LFBB5
 537               	.LM62:
 538 0192 E091 0000 		lds r30,tx_byte_cnt
 539 0196 E017      		cp r30,r16
 540 0198 00F4      		brsh .L31
 541 019a 8091 0000 		lds r24,tx_state
 542 019e 8111      		cpse r24,__zero_reg__
 543 01a0 00C0      		rjmp .L32
 544               	.L33:
 236:main.c        **** }
 545               		.stabn	68,0,236,.LM63-.LFBB5
 546               	.LM63:
 547 01a2 8091 0000 		lds r24,tx_byte_cnt
 548 01a6 00C0      		rjmp .L26
 549               	.L31:
 232:main.c        ****         write_tx_buffer(SINC);
 550               		.stabn	68,0,232,.LM64-.LFBB5
 551               	.LM64:
 552 01a8 1123      		tst r17
 553 01aa 01F0      		breq .L33
 554 01ac 8091 0000 		lds r24,tx_state
 555 01b0 8823      		tst r24
 556 01b2 01F0      		breq .L33
 233:main.c        ****     }
 557               		.stabn	68,0,233,.LM65-.LFBB5
 558               	.LM65:
 559 01b4 8EE7      		ldi r24,lo8(126)
 560 01b6 0E94 0000 		call write_tx_buffer
 561 01ba 00C0      		rjmp .L33
 562               	.LBE7:
 563               	.LBE6:
 564               		.size	write, .-write
 565               	.Lscope5:
GAS LISTING /tmp/ccHmbt1y.s 			page 17


 566               		.stabs	"",36,0,0,.Lscope5-.LFBB5
 567               		.stabd	78,0,0
 568               		.stabs	"enqueue_rx_buffer:F(0,50)",36,0,304,enqueue_rx_buffer
 569               		.stabs	"received_data:P(5,2)",64,0,304,24
 570               	.global	enqueue_rx_buffer
 571               		.type	enqueue_rx_buffer, @function
 572               	enqueue_rx_buffer:
 573               		.stabd	46,0,0
 303:main.c        **** 
 304:main.c        **** void enqueue_rx_buffer(uint8_t received_data) {
 574               		.stabn	68,0,304,.LM66-.LFBB6
 575               	.LM66:
 576               	.LFBB6:
 577               	/* prologue: function */
 578               	/* frame size = 0 */
 579               	/* stack size = 0 */
 580               	.L__stack_usage = 0
 305:main.c        ****     uint8_t next = rx_head + 1;
 581               		.stabn	68,0,305,.LM67-.LFBB6
 582               	.LM67:
 583 01bc E091 0000 		lds r30,rx_head
 584 01c0 91E0      		ldi r25,lo8(1)
 585 01c2 9E0F      		add r25,r30
 306:main.c        ****         if (next >= BUFFER_SIZE)
 586               		.stabn	68,0,306,.LM68-.LFBB6
 587               	.LM68:
 588 01c4 9F3F      		cpi r25,lo8(-1)
 589 01c6 01F4      		brne .L47
 307:main.c        ****             next = 0;
 590               		.stabn	68,0,307,.LM69-.LFBB6
 591               	.LM69:
 592 01c8 90E0      		ldi r25,0
 593               	.L47:
 308:main.c        ****         
 309:main.c        ****         /* Se o buffer estiver cheio desprezamos o byte recebido mais antigo e
 310:main.c        ****         * colocamos o byte que acabamos de receber em seu lugar */
 311:main.c        ****         rx_buffer[rx_head] = received_data;
 594               		.stabn	68,0,311,.LM70-.LFBB6
 595               	.LM70:
 596 01ca F0E0      		ldi r31,0
 597 01cc E050      		subi r30,lo8(-(rx_buffer))
 598 01ce F040      		sbci r31,hi8(-(rx_buffer))
 599 01d0 8083      		st Z,r24
 312:main.c        ****         rx_head = next;
 600               		.stabn	68,0,312,.LM71-.LFBB6
 601               	.LM71:
 602 01d2 9093 0000 		sts rx_head,r25
 313:main.c        ****         if (next == rx_tail) { /* buffer cheio */
 603               		.stabn	68,0,313,.LM72-.LFBB6
 604               	.LM72:
 605 01d6 8091 0000 		lds r24,rx_tail
 606 01da 8913      		cpse r24,r25
 607 01dc 00C0      		rjmp .L49
 314:main.c        ****             rx_tail++;
 608               		.stabn	68,0,314,.LM73-.LFBB6
 609               	.LM73:
 610 01de 9F5F      		subi r25,lo8(-(1))
GAS LISTING /tmp/ccHmbt1y.s 			page 18


 315:main.c        ****             if (rx_tail >= BUFFER_SIZE)
 611               		.stabn	68,0,315,.LM74-.LFBB6
 612               	.LM74:
 613 01e0 9F3F      		cpi r25,lo8(-1)
 614 01e2 01F0      		breq .L50
 314:main.c        ****             rx_tail++;
 615               		.stabn	68,0,314,.LM75-.LFBB6
 616               	.LM75:
 617 01e4 9093 0000 		sts rx_tail,r25
 618               	.L49:
 316:main.c        ****                 rx_tail = 0;
 317:main.c        ****         }
 318:main.c        ****         rcvd_byte = 1;
 619               		.stabn	68,0,318,.LM76-.LFBB6
 620               	.LM76:
 621 01e8 81E0      		ldi r24,lo8(1)
 622 01ea 8093 0000 		sts rcvd_byte,r24
 623               	/* epilogue start */
 319:main.c        **** }
 624               		.stabn	68,0,319,.LM77-.LFBB6
 625               	.LM77:
 626 01ee 0895      		ret
 627               	.L50:
 316:main.c        ****                 rx_tail = 0;
 628               		.stabn	68,0,316,.LM78-.LFBB6
 629               	.LM78:
 630 01f0 1092 0000 		sts rx_tail,__zero_reg__
 631 01f4 00C0      		rjmp .L49
 632               		.size	enqueue_rx_buffer, .-enqueue_rx_buffer
 633               		.stabs	"next:r(5,2)",64,0,305,25
 634               		.stabn	192,0,0,.LFBB6-.LFBB6
 635               		.stabn	224,0,0,.Lscope6-.LFBB6
 636               	.Lscope6:
 637               		.stabs	"",36,0,0,.Lscope6-.LFBB6
 638               		.stabd	78,0,0
 639               		.stabs	"__vector_18:F(0,50)",36,0,47,__vector_18
 640               	.global	__vector_18
 641               		.type	__vector_18, @function
 642               	__vector_18:
 643               		.stabd	46,0,0
  47:main.c        ****     uint8_t received_data = UDR0;
 644               		.stabn	68,0,47,.LM79-.LFBB7
 645               	.LM79:
 646               	.LFBB7:
 647 01f6 1F92      		push r1
 648 01f8 0F92      		push r0
 649 01fa 0FB6      		in r0,__SREG__
 650 01fc 0F92      		push r0
 651 01fe 1124      		clr __zero_reg__
 652 0200 2F93      		push r18
 653 0202 3F93      		push r19
 654 0204 4F93      		push r20
 655 0206 5F93      		push r21
 656 0208 6F93      		push r22
 657 020a 7F93      		push r23
 658 020c 8F93      		push r24
 659 020e 9F93      		push r25
GAS LISTING /tmp/ccHmbt1y.s 			page 19


 660 0210 AF93      		push r26
 661 0212 BF93      		push r27
 662 0214 EF93      		push r30
 663 0216 FF93      		push r31
 664               	/* prologue: Signal */
 665               	/* frame size = 0 */
 666               	/* stack size = 15 */
 667               	.L__stack_usage = 15
  48:main.c        ****     
 668               		.stabn	68,0,48,.LM80-.LFBB7
 669               	.LM80:
 670 0218 8091 C600 		lds r24,198
  50:main.c        ****         if (received_data == ESC) {
 671               		.stabn	68,0,50,.LM81-.LFBB7
 672               	.LM81:
 673 021c 9091 0000 		lds r25,rx_esc
 674 0220 9111      		cpse r25,__zero_reg__
 675 0222 00C0      		rjmp .L53
  51:main.c        ****             rx_esc = 1;
 676               		.stabn	68,0,51,.LM82-.LFBB7
 677               	.LM82:
 678 0224 8D37      		cpi r24,lo8(125)
 679 0226 01F4      		brne .L54
  52:main.c        ****         } else if (received_data == XOFF) {
 680               		.stabn	68,0,52,.LM83-.LFBB7
 681               	.LM83:
 682 0228 81E0      		ldi r24,lo8(1)
 683 022a 8093 0000 		sts rx_esc,r24
 684               	.L52:
 685               	/* epilogue start */
  67:main.c        **** 
 686               		.stabn	68,0,67,.LM84-.LFBB7
 687               	.LM84:
 688 022e FF91      		pop r31
 689 0230 EF91      		pop r30
 690 0232 BF91      		pop r27
 691 0234 AF91      		pop r26
 692 0236 9F91      		pop r25
 693 0238 8F91      		pop r24
 694 023a 7F91      		pop r23
 695 023c 6F91      		pop r22
 696 023e 5F91      		pop r21
 697 0240 4F91      		pop r20
 698 0242 3F91      		pop r19
 699 0244 2F91      		pop r18
 700 0246 0F90      		pop r0
 701 0248 0FBE      		out __SREG__,r0
 702 024a 0F90      		pop r0
 703 024c 1F90      		pop r1
 704 024e 1895      		reti
 705               	.L54:
  53:main.c        ****             tx_state = 0;
 706               		.stabn	68,0,53,.LM85-.LFBB7
 707               	.LM85:
 708 0250 8331      		cpi r24,lo8(19)
 709 0252 01F4      		brne .L56
  54:main.c        ****         } else if (received_data == XON) {
GAS LISTING /tmp/ccHmbt1y.s 			page 20


 710               		.stabn	68,0,54,.LM86-.LFBB7
 711               	.LM86:
 712 0254 1092 0000 		sts tx_state,__zero_reg__
 713 0258 00C0      		rjmp .L52
 714               	.L56:
  55:main.c        ****             tx_state = 1;
 715               		.stabn	68,0,55,.LM87-.LFBB7
 716               	.LM87:
 717 025a 8131      		cpi r24,lo8(17)
 718 025c 01F4      		brne .L57
  56:main.c        ****         } else if (received_data == SINC){
 719               		.stabn	68,0,56,.LM88-.LFBB7
 720               	.LM88:
 721 025e 81E0      		ldi r24,lo8(1)
 722 0260 8093 0000 		sts tx_state,r24
 723 0264 00C0      		rjmp .L52
 724               	.L57:
  57:main.c        ****             rx_sinc = 1;
 725               		.stabn	68,0,57,.LM89-.LFBB7
 726               	.LM89:
 727 0266 8E37      		cpi r24,lo8(126)
 728 0268 01F4      		brne .L58
  58:main.c        ****             rcvd_byte = 1;
 729               		.stabn	68,0,58,.LM90-.LFBB7
 730               	.LM90:
 731 026a 81E0      		ldi r24,lo8(1)
 732 026c 8093 0000 		sts rx_sinc,r24
  59:main.c        ****         } else {
 733               		.stabn	68,0,59,.LM91-.LFBB7
 734               	.LM91:
 735 0270 8093 0000 		sts rcvd_byte,r24
 736 0274 00C0      		rjmp .L52
 737               	.L58:
  61:main.c        ****         }
 738               		.stabn	68,0,61,.LM92-.LFBB7
 739               	.LM92:
 740 0276 0E94 0000 		call enqueue_rx_buffer
 741 027a 00C0      		rjmp .L52
 742               	.L53:
  64:main.c        ****         rx_esc = 0;
 743               		.stabn	68,0,64,.LM93-.LFBB7
 744               	.LM93:
 745 027c 0E94 0000 		call enqueue_rx_buffer
  65:main.c        ****     }
 746               		.stabn	68,0,65,.LM94-.LFBB7
 747               	.LM94:
 748 0280 1092 0000 		sts rx_esc,__zero_reg__
  67:main.c        **** 
 749               		.stabn	68,0,67,.LM95-.LFBB7
 750               	.LM95:
 751 0284 00C0      		rjmp .L52
 752               		.size	__vector_18, .-__vector_18
 753               		.stabs	"received_data:r(5,2)",64,0,48,24
 754               		.stabn	192,0,0,.LFBB7-.LFBB7
 755               		.stabn	224,0,0,.Lscope7-.LFBB7
 756               	.Lscope7:
 757               		.stabs	"",36,0,0,.Lscope7-.LFBB7
GAS LISTING /tmp/ccHmbt1y.s 			page 21


 758               		.stabd	78,0,0
 759               		.stabs	"flow_off:F(0,50)",36,0,321,flow_off
 760               	.global	flow_off
 761               		.type	flow_off, @function
 762               	flow_off:
 763               		.stabd	46,0,0
 320:main.c        **** 
 321:main.c        **** void flow_off(void) {
 764               		.stabn	68,0,321,.LM96-.LFBB8
 765               	.LM96:
 766               	.LFBB8:
 767               	/* prologue: function */
 768               	/* frame size = 0 */
 769               	/* stack size = 0 */
 770               	.L__stack_usage = 0
 322:main.c        ****     write_tx_buffer(XOFF);
 771               		.stabn	68,0,322,.LM97-.LFBB8
 772               	.LM97:
 773 0286 83E1      		ldi r24,lo8(19)
 774 0288 0E94 0000 		call write_tx_buffer
 323:main.c        ****     rx_state = 0;
 775               		.stabn	68,0,323,.LM98-.LFBB8
 776               	.LM98:
 777 028c 1092 0000 		sts rx_state,__zero_reg__
 778               	/* epilogue start */
 324:main.c        **** }
 779               		.stabn	68,0,324,.LM99-.LFBB8
 780               	.LM99:
 781 0290 0895      		ret
 782               		.size	flow_off, .-flow_off
 783               	.Lscope8:
 784               		.stabs	"",36,0,0,.Lscope8-.LFBB8
 785               		.stabd	78,0,0
 786               		.stabs	"flow_on:F(0,50)",36,0,326,flow_on
 787               	.global	flow_on
 788               		.type	flow_on, @function
 789               	flow_on:
 790               		.stabd	46,0,0
 325:main.c        **** 
 326:main.c        **** void flow_on(void) {
 791               		.stabn	68,0,326,.LM100-.LFBB9
 792               	.LM100:
 793               	.LFBB9:
 794               	/* prologue: function */
 795               	/* frame size = 0 */
 796               	/* stack size = 0 */
 797               	.L__stack_usage = 0
 327:main.c        ****     write_tx_buffer(XON);
 798               		.stabn	68,0,327,.LM101-.LFBB9
 799               	.LM101:
 800 0292 81E1      		ldi r24,lo8(17)
 801 0294 0E94 0000 		call write_tx_buffer
 328:main.c        ****     rx_state = 1;
 802               		.stabn	68,0,328,.LM102-.LFBB9
 803               	.LM102:
 804 0298 81E0      		ldi r24,lo8(1)
 805 029a 8093 0000 		sts rx_state,r24
GAS LISTING /tmp/ccHmbt1y.s 			page 22


 806               	/* epilogue start */
 329:main.c        **** }
 807               		.stabn	68,0,329,.LM103-.LFBB9
 808               	.LM103:
 809 029e 0895      		ret
 810               		.size	flow_on, .-flow_on
 811               	.Lscope9:
 812               		.stabs	"",36,0,0,.Lscope9-.LFBB9
 813               		.stabd	78,0,0
 814               		.stabs	"is_flow_on:F(5,2)",36,0,331,is_flow_on
 815               	.global	is_flow_on
 816               		.type	is_flow_on, @function
 817               	is_flow_on:
 818               		.stabd	46,0,0
 330:main.c        **** 
 331:main.c        **** uint8_t is_flow_on(void) {
 819               		.stabn	68,0,331,.LM104-.LFBB10
 820               	.LM104:
 821               	.LFBB10:
 822               	/* prologue: function */
 823               	/* frame size = 0 */
 824               	/* stack size = 0 */
 825               	.L__stack_usage = 0
 332:main.c        ****     return tx_state;
 333:main.c        **** }
 826               		.stabn	68,0,333,.LM105-.LFBB10
 827               	.LM105:
 828 02a0 8091 0000 		lds r24,tx_state
 829               	/* epilogue start */
 830 02a4 0895      		ret
 831               		.size	is_flow_on, .-is_flow_on
 832               	.Lscope10:
 833               		.stabs	"",36,0,0,.Lscope10-.LFBB10
 834               		.stabd	78,0,0
 835               		.stabs	"delay_ms:F(0,50)",36,0,335,delay_ms
 836               		.stabs	"ms:P(5,4)",64,0,335,24
 837               	.global	delay_ms
 838               		.type	delay_ms, @function
 839               	delay_ms:
 840               		.stabd	46,0,0
 334:main.c        **** 
 335:main.c        **** void delay_ms(uint16_t ms)
 336:main.c        **** {
 841               		.stabn	68,0,336,.LM106-.LFBB11
 842               	.LM106:
 843               	.LFBB11:
 844               	/* prologue: function */
 845               	/* frame size = 0 */
 846               	/* stack size = 0 */
 847               	.L__stack_usage = 0
 337:main.c        ****     uint16_t i, j;
 338:main.c        ****     for(i=0; i<ms; i++)
 848               		.stabn	68,0,338,.LM107-.LFBB11
 849               	.LM107:
 850 02a6 30E0      		ldi r19,0
 851 02a8 20E0      		ldi r18,0
 852               	.L63:
GAS LISTING /tmp/ccHmbt1y.s 			page 23


 853               		.stabn	68,0,338,.LM108-.LFBB11
 854               	.LM108:
 855 02aa 2817      		cp r18,r24
 856 02ac 3907      		cpc r19,r25
 857 02ae 01F4      		brne .L65
 858               	/* epilogue start */
 339:main.c        ****         for(j=0; j<4000; j++)
 340:main.c        ****             _NOP();
 341:main.c        **** }
 859               		.stabn	68,0,341,.LM109-.LFBB11
 860               	.LM109:
 861 02b0 0895      		ret
 862               	.L65:
 863 02b2 40EA      		ldi r20,lo8(-96)
 864 02b4 5FE0      		ldi r21,lo8(15)
 865               	.L64:
 340:main.c        **** }
 866               		.stabn	68,0,340,.LM110-.LFBB11
 867               	.LM110:
 868               	/* #APP */
 869               	 ;  340 "main.c" 1
 870 02b6 0000      		nop
 871               	 ;  0 "" 2
 872               	/* #NOAPP */
 873 02b8 4150      		subi r20,1
 874 02ba 5109      		sbc r21,__zero_reg__
 339:main.c        ****         for(j=0; j<4000; j++)
 875               		.stabn	68,0,339,.LM111-.LFBB11
 876               	.LM111:
 877 02bc 01F4      		brne .L64
 338:main.c        ****         for(j=0; j<4000; j++)
 878               		.stabn	68,0,338,.LM112-.LFBB11
 879               	.LM112:
 880 02be 2F5F      		subi r18,-1
 881 02c0 3F4F      		sbci r19,-1
 882 02c2 00C0      		rjmp .L63
 883               		.size	delay_ms, .-delay_ms
 884               		.stabs	"i:r(5,4)",64,0,337,18
 885               		.stabn	192,0,0,.LFBB11-.LFBB11
 886               		.stabn	224,0,0,.Lscope11-.LFBB11
 887               	.Lscope11:
 888               		.stabs	"",36,0,0,.Lscope11-.LFBB11
 889               		.stabd	78,0,0
 890               		.stabs	"blink_led:F(0,50)",36,0,343,blink_led
 891               	.global	blink_led
 892               		.type	blink_led, @function
 893               	blink_led:
 894               		.stabd	46,0,0
 342:main.c        **** 
 343:main.c        **** void blink_led(void) {
 895               		.stabn	68,0,343,.LM113-.LFBB12
 896               	.LM113:
 897               	.LFBB12:
 898 02c4 CF93      		push r28
 899 02c6 DF93      		push r29
 900               	/* prologue: function */
 901               	/* frame size = 0 */
GAS LISTING /tmp/ccHmbt1y.s 			page 24


 902               	/* stack size = 2 */
 903               	.L__stack_usage = 2
 344:main.c        ****     uint8_t k = 5;
 345:main.c        ****     while (k--) {
 904               		.stabn	68,0,345,.LM114-.LFBB12
 905               	.LM114:
 906 02c8 C6E0      		ldi r28,lo8(6)
 346:main.c        ****         PINB = (1 << PB5);
 907               		.stabn	68,0,346,.LM115-.LFBB12
 908               	.LM115:
 909 02ca D0E2      		ldi r29,lo8(32)
 910               	.L68:
 911 02cc C150      		subi r28,lo8(-(-1))
 345:main.c        ****         PINB = (1 << PB5);
 912               		.stabn	68,0,345,.LM116-.LFBB12
 913               	.LM116:
 914 02ce 01F4      		brne .L69
 915               	/* epilogue start */
 347:main.c        ****         delay_ms(1000);
 348:main.c        ****     }
 349:main.c        **** }
 916               		.stabn	68,0,349,.LM117-.LFBB12
 917               	.LM117:
 918 02d0 DF91      		pop r29
 919 02d2 CF91      		pop r28
 920 02d4 0895      		ret
 921               	.L69:
 346:main.c        ****         delay_ms(1000);
 922               		.stabn	68,0,346,.LM118-.LFBB12
 923               	.LM118:
 924 02d6 D3B9      		out 0x3,r29
 347:main.c        ****         delay_ms(1000);
 925               		.stabn	68,0,347,.LM119-.LFBB12
 926               	.LM119:
 927 02d8 88EE      		ldi r24,lo8(-24)
 928 02da 93E0      		ldi r25,lo8(3)
 929 02dc 0E94 0000 		call delay_ms
 930 02e0 00C0      		rjmp .L68
 931               		.size	blink_led, .-blink_led
 932               	.Lscope12:
 933               		.stabs	"",36,0,0,.Lscope12-.LFBB12
 934               		.stabd	78,0,0
 935               		.stabs	"turn_led_on:F(0,50)",36,0,351,turn_led_on
 936               	.global	turn_led_on
 937               		.type	turn_led_on, @function
 938               	turn_led_on:
 939               		.stabd	46,0,0
 350:main.c        **** 
 351:main.c        **** void turn_led_on(void) {
 940               		.stabn	68,0,351,.LM120-.LFBB13
 941               	.LM120:
 942               	.LFBB13:
 943               	/* prologue: function */
 944               	/* frame size = 0 */
 945               	/* stack size = 0 */
 946               	.L__stack_usage = 0
 352:main.c        ****     PORTB |= (1 << PB5);
GAS LISTING /tmp/ccHmbt1y.s 			page 25


 947               		.stabn	68,0,352,.LM121-.LFBB13
 948               	.LM121:
 949 02e2 2D9A      		sbi 0x5,5
 353:main.c        ****     delay_ms(5000);
 950               		.stabn	68,0,353,.LM122-.LFBB13
 951               	.LM122:
 952 02e4 88E8      		ldi r24,lo8(-120)
 953 02e6 93E1      		ldi r25,lo8(19)
 954 02e8 0E94 0000 		call delay_ms
 354:main.c        ****     PORTB &= ~(1 << PB5);
 955               		.stabn	68,0,354,.LM123-.LFBB13
 956               	.LM123:
 957 02ec 2D98      		cbi 0x5,5
 958               	/* epilogue start */
 355:main.c        **** }
 959               		.stabn	68,0,355,.LM124-.LFBB13
 960               	.LM124:
 961 02ee 0895      		ret
 962               		.size	turn_led_on, .-turn_led_on
 963               	.Lscope13:
 964               		.stabs	"",36,0,0,.Lscope13-.LFBB13
 965               		.stabd	78,0,0
 966               		.stabs	"received_data:F(5,2)",36,0,357,received_data
 967               	.global	received_data
 968               		.type	received_data, @function
 969               	received_data:
 970               		.stabd	46,0,0
 356:main.c        **** 
 357:main.c        **** uint8_t received_data(void) {
 971               		.stabn	68,0,357,.LM125-.LFBB14
 972               	.LM125:
 973               	.LFBB14:
 974 02f0 CF93      		push r28
 975               	/* prologue: function */
 976               	/* frame size = 0 */
 977               	/* stack size = 1 */
 978               	.L__stack_usage = 1
 358:main.c        ****     uint8_t rx_flag = 0;
 359:main.c        ****     uint8_t check_cnt = 0;
 360:main.c        **** 
 361:main.c        ****     cli();
 979               		.stabn	68,0,361,.LM126-.LFBB14
 980               	.LM126:
 981               	/* #APP */
 982               	 ;  361 "main.c" 1
 983 02f2 F894      		cli
 984               	 ;  0 "" 2
 359:main.c        **** 
 985               		.stabn	68,0,359,.LM127-.LFBB14
 986               	.LM127:
 987               	/* #NOAPP */
 988 02f4 C0E0      		ldi r28,0
 989               	.L72:
 362:main.c        ****     while (!(UCSR0A & (1<<RXC0)) & (check_cnt < 5)){
 990               		.stabn	68,0,362,.LM128-.LFBB14
 991               	.LM128:
 992 02f6 9091 C000 		lds r25,192
GAS LISTING /tmp/ccHmbt1y.s 			page 26


 993 02fa 81E0      		ldi r24,lo8(1)
 994 02fc C530      		cpi r28,lo8(5)
 995 02fe 00F0      		brlo .L73
 996 0300 80E0      		ldi r24,0
 997               	.L73:
 998 0302 97FD      		sbrc r25,7
 999 0304 00C0      		rjmp .L76
 1000 0306 8111      		cpse r24,__zero_reg__
 1001 0308 00C0      		rjmp .L74
 1002               	.L76:
 363:main.c        ****         check_cnt++;
 364:main.c        ****         delay_ms(1);
 365:main.c        ****     }
 366:main.c        ****     sei();
 1003               		.stabn	68,0,366,.LM129-.LFBB14
 1004               	.LM129:
 1005               	/* #APP */
 1006               	 ;  366 "main.c" 1
 1007 030a 7894      		sei
 1008               	 ;  0 "" 2
 1009               	/* epilogue start */
 367:main.c        ****     rx_flag = check_cnt < 5 ? 1 : 0;
 368:main.c        ****     return rx_flag;
 369:main.c        **** }
 1010               		.stabn	68,0,369,.LM130-.LFBB14
 1011               	.LM130:
 1012               	/* #NOAPP */
 1013 030c CF91      		pop r28
 1014 030e 0895      		ret
 1015               	.L74:
 363:main.c        ****         check_cnt++;
 1016               		.stabn	68,0,363,.LM131-.LFBB14
 1017               	.LM131:
 1018 0310 CF5F      		subi r28,lo8(-(1))
 364:main.c        ****     }
 1019               		.stabn	68,0,364,.LM132-.LFBB14
 1020               	.LM132:
 1021 0312 81E0      		ldi r24,lo8(1)
 1022 0314 90E0      		ldi r25,0
 1023 0316 0E94 0000 		call delay_ms
 1024 031a 00C0      		rjmp .L72
 1025               		.size	received_data, .-received_data
 1026               		.stabs	"check_cnt:r(5,2)",64,0,359,28
 1027               		.stabn	192,0,0,.LFBB14-.LFBB14
 1028               		.stabn	224,0,0,.Lscope14-.LFBB14
 1029               	.Lscope14:
 1030               		.stabs	"",36,0,0,.Lscope14-.LFBB14
 1031               		.stabd	78,0,0
 1032               		.stabs	"reset_rxbuffer:F(0,50)",36,0,371,reset_rxbuffer
 1033               	.global	reset_rxbuffer
 1034               		.type	reset_rxbuffer, @function
 1035               	reset_rxbuffer:
 1036               		.stabd	46,0,0
 370:main.c        **** 
 371:main.c        **** void reset_rxbuffer(void) {
 1037               		.stabn	68,0,371,.LM133-.LFBB15
 1038               	.LM133:
GAS LISTING /tmp/ccHmbt1y.s 			page 27


 1039               	.LFBB15:
 1040               	/* prologue: function */
 1041               	/* frame size = 0 */
 1042               	/* stack size = 0 */
 1043               	.L__stack_usage = 0
 372:main.c        ****     cli();
 1044               		.stabn	68,0,372,.LM134-.LFBB15
 1045               	.LM134:
 1046               	/* #APP */
 1047               	 ;  372 "main.c" 1
 1048 031c F894      		cli
 1049               	 ;  0 "" 2
 373:main.c        ****     memset(rx_buffer, 0, sizeof(rx_buffer));
 1050               		.stabn	68,0,373,.LM135-.LFBB15
 1051               	.LM135:
 1052               	/* #NOAPP */
 1053 031e E0E0      		ldi r30,lo8(rx_buffer)
 1054 0320 F0E0      		ldi r31,hi8(rx_buffer)
 1055 0322 8FEF      		ldi r24,lo8(-1)
 1056 0324 DF01      		movw r26,r30
 1057               		0:
 1058 0326 1D92      		st X+,__zero_reg__
 1059 0328 8A95      		dec r24
 1060 032a 01F4      		brne 0b
 374:main.c        ****     rx_head = 0;
 1061               		.stabn	68,0,374,.LM136-.LFBB15
 1062               	.LM136:
 1063 032c 1092 0000 		sts rx_head,__zero_reg__
 375:main.c        ****     rx_tail = 0;
 1064               		.stabn	68,0,375,.LM137-.LFBB15
 1065               	.LM137:
 1066 0330 1092 0000 		sts rx_tail,__zero_reg__
 376:main.c        ****     rcvd_byte = 0;
 1067               		.stabn	68,0,376,.LM138-.LFBB15
 1068               	.LM138:
 1069 0334 1092 0000 		sts rcvd_byte,__zero_reg__
 377:main.c        ****     sei();
 1070               		.stabn	68,0,377,.LM139-.LFBB15
 1071               	.LM139:
 1072               	/* #APP */
 1073               	 ;  377 "main.c" 1
 1074 0338 7894      		sei
 1075               	 ;  0 "" 2
 1076               	/* epilogue start */
 378:main.c        **** }...
 1077               		.stabn	68,0,378,.LM140-.LFBB15
 1078               	.LM140:
 1079               	/* #NOAPP */
 1080 033a 0895      		ret
 1081               		.size	reset_rxbuffer, .-reset_rxbuffer
 1082               	.Lscope15:
 1083               		.stabs	"",36,0,0,.Lscope15-.LFBB15
 1084               		.stabd	78,0,0
 1085               		.section	.rodata.str1.1,"aMS",@progbits,1
 1086               	.LC1:
 1087 0000 556E 6976 		.string	"Universidade Federal de Pernambuco\nDepartamento de Eletr\303\264nica e Sistemas"
 1087      6572 7369 
GAS LISTING /tmp/ccHmbt1y.s 			page 28


 1087      6461 6465 
 1087      2046 6564 
 1087      6572 616C 
 1088               		.section	.rodata
 1089               	.LC0:
 1090 0000 00        		.byte	0
 1091 0001 01        		.byte	1
 1092 0002 11        		.byte	17
 1093 0003 02        		.byte	2
 1094 0004 13        		.byte	19
 1095 0005 04        		.byte	4
 1096 0006 7E        		.byte	126
 1097 0007 05        		.byte	5
 1098 0008 7D        		.byte	125
 1099 0009 06        		.byte	6
 1100               		.section	.rodata.str1.1
 1101               	.LC2:
 1102 004a 4465 7365 		.string	"Desenvolvimento de sistemas embarcados"
 1102      6E76 6F6C 
 1102      7669 6D65 
 1102      6E74 6F20 
 1102      6465 2073 
 1103               		.section	.text.startup,"ax",@progbits
 1104               		.stabs	"main:F(0,1)",36,0,86,main
 1105               	.global	main
 1106               		.type	main, @function
 1107               	main:
 1108               		.stabd	46,0,0
  86:main.c        **** int main(void) {
 1109               		.stabn	68,0,86,.LM141-.LFBB16
 1110               	.LM141:
 1111               	.LFBB16:
 1112 0000 CF93      		push r28
 1113 0002 DF93      		push r29
 1114 0004 CDB7      		in r28,__SP_L__
 1115 0006 DEB7      		in r29,__SP_H__
 1116 0008 C15A      		subi r28,-95
 1117 000a D140      		sbci r29,1
 1118 000c 0FB6      		in __tmp_reg__,__SREG__
 1119 000e F894      		cli
 1120 0010 DEBF      		out __SP_H__,r29
 1121 0012 0FBE      		out __SREG__,__tmp_reg__
 1122 0014 CDBF      		out __SP_L__,r28
 1123               	/* prologue: function */
 1124               	/* frame size = 417 */
 1125               	/* stack size = 419 */
 1126               	.L__stack_usage = 419
  89:main.c        ****     UCSR0A = (1 << U2X0); /* double speed */
 1127               		.stabn	68,0,89,.LM142-.LFBB16
 1128               	.LM142:
 1129 0016 82E0      		ldi r24,lo8(2)
 1130 0018 8093 C000 		sts 192,r24
  90:main.c        ****     UCSR0B = (1<<RXEN0) | (1 << TXEN0) | (1 << RXCIE0); /* Enable rx and tx, rx complete interrupt 
 1131               		.stabn	68,0,90,.LM143-.LFBB16
 1132               	.LM143:
 1133 001c 88E9      		ldi r24,lo8(-104)
 1134 001e 8093 C100 		sts 193,r24
GAS LISTING /tmp/ccHmbt1y.s 			page 29


  91:main.c        ****     UCSR0C = (1<<UCSZ01) | (1<<UCSZ00); /* Set frame format: 8N1 */
 1135               		.stabn	68,0,91,.LM144-.LFBB16
 1136               	.LM144:
 1137 0022 86E0      		ldi r24,lo8(6)
 1138 0024 8093 C200 		sts 194,r24
  92:main.c        ****     UBRR0H = (MYUBRR>>8); /* Set baud rate */
 1139               		.stabn	68,0,92,.LM145-.LFBB16
 1140               	.LM145:
 1141 0028 1092 C500 		sts 197,__zero_reg__
  93:main.c        ****     UBRR0L = MYUBRR; /* Set baud rate */
 1142               		.stabn	68,0,93,.LM146-.LFBB16
 1143               	.LM146:
 1144 002c 8FEC      		ldi r24,lo8(-49)
 1145 002e 8093 C400 		sts 196,r24
  95:main.c        ****     DDRB |= (1 << PB5); // Configura PB5 como sa√≠da (LED)
 1146               		.stabn	68,0,95,.LM147-.LFBB16
 1147               	.LM147:
 1148 0032 259A      		sbi 0x4,5
  96:main.c        ****     PORTB &= ~(1 << PB5); // Garante que o LED est√° apagado no in√≠cio   
 1149               		.stabn	68,0,96,.LM148-.LFBB16
 1150               	.LM148:
 1151 0034 2D98      		cbi 0x5,5
  98:main.c        ****     sei();
 1152               		.stabn	68,0,98,.LM149-.LFBB16
 1153               	.LM149:
 1154               	/* #APP */
 1155               	 ;  98 "main.c" 1
 1156 0036 7894      		sei
 1157               	 ;  0 "" 2
 103:main.c        ****     uint8_t str_test[] = "Universidade Federal de Pernambuco\nDepartamento de Eletr√¥nica e Sistema
 1158               		.stabn	68,0,103,.LM150-.LFBB16
 1159               	.LM150:
 1160               	/* #NOAPP */
 1161 0038 8AE4      		ldi r24,lo8(74)
 1162 003a E0E0      		ldi r30,lo8(.LC1)
 1163 003c F0E0      		ldi r31,hi8(.LC1)
 1164 003e DE01      		movw r26,r28
 1165 0040 B395      		inc r27
 1166               		0:
 1167 0042 0190      		ld r0,Z+
 1168 0044 0D92      		st X+,r0
 1169 0046 8A95      		dec r24
 1170 0048 01F4      		brne 0b
 104:main.c        ****     write(str_test, sizeof(str_test)-1, 1);
 1171               		.stabn	68,0,104,.LM151-.LFBB16
 1172               	.LM151:
 1173 004a 41E0      		ldi r20,lo8(1)
 1174 004c 69E4      		ldi r22,lo8(73)
 1175 004e CE01      		movw r24,r28
 1176 0050 9395      		inc r25
 1177 0052 0E94 0000 		call write
 106:main.c        ****     delay_ms(1000);
 1178               		.stabn	68,0,106,.LM152-.LFBB16
 1179               	.LM152:
 1180 0056 88EE      		ldi r24,lo8(-24)
 1181 0058 93E0      		ldi r25,lo8(3)
 1182 005a 0E94 0000 		call delay_ms
GAS LISTING /tmp/ccHmbt1y.s 			page 30


 110:main.c        ****     uint8_t j = 0;
 1183               		.stabn	68,0,110,.LM153-.LFBB16
 1184               	.LM153:
 1185 005e 00E0      		ldi r16,0
 109:main.c        ****     uint8_t i = sizeof(str_test);
 1186               		.stabn	68,0,109,.LM154-.LFBB16
 1187               	.LM154:
 1188 0060 1AE4      		ldi r17,lo8(74)
 1189               	.L82:
 113:main.c        ****             i -= write(str_test+j, 10, 0);
 1190               		.stabn	68,0,113,.LM155-.LFBB16
 1191               	.LM155:
 1192 0062 40E0      		ldi r20,0
 1193 0064 6AE0      		ldi r22,lo8(10)
 1194 0066 80E0      		ldi r24,0
 1195 0068 91E0      		ldi r25,lo8(1)
 1196 006a 8C0F      		add r24,r28
 1197 006c 9D1F      		adc r25,r29
 1198 006e 800F      		add r24,r16
 1199 0070 911D      		adc r25,__zero_reg__
 1200 0072 0E94 0000 		call write
 1201 0076 181B      		sub r17,r24
 114:main.c        ****             j += 10;
 1202               		.stabn	68,0,114,.LM156-.LFBB16
 1203               	.LM156:
 1204 0078 065F      		subi r16,lo8(-(10))
 111:main.c        ****     while (i) {
 1205               		.stabn	68,0,111,.LM157-.LFBB16
 1206               	.LM157:
 1207 007a 1111      		cpse r17,__zero_reg__
 1208 007c 00C0      		rjmp .L84
 1209               	.L85:
 122:main.c        ****     reset_rxbuffer(); /* Limpa o buffer de rx */
 1210               		.stabn	68,0,122,.LM158-.LFBB16
 1211               	.LM158:
 1212 007e 0E94 0000 		call reset_rxbuffer
 123:main.c        ****     uint16_t nbytes = 0;
 1213               		.stabn	68,0,123,.LM159-.LFBB16
 1214               	.LM159:
 1215 0082 10E0      		ldi r17,0
 1216 0084 00E0      		ldi r16,0
 126:main.c        ****         nbytes += read(buffer, 300-nbytes > 254 ? 254 : 300-nbytes) - 1; /* Conferir se precisa des
 1217               		.stabn	68,0,126,.LM160-.LFBB16
 1218               	.LM160:
 1219 0086 9CE2      		ldi r25,lo8(44)
 1220 0088 E92E      		mov r14,r25
 1221 008a FF24      		clr r15
 1222 008c F394      		inc r15
 1223               	.L87:
 1224 008e B701      		movw r22,r14
 1225 0090 601B      		sub r22,r16
 1226 0092 710B      		sbc r23,r17
 1227 0094 6F3F      		cpi r22,-1
 1228 0096 7105      		cpc r23,__zero_reg__
 1229 0098 00F0      		brlo .L86
 1230 009a 6EEF      		ldi r22,lo8(-2)
 1231 009c 70E0      		ldi r23,0
GAS LISTING /tmp/ccHmbt1y.s 			page 31


 1232               	.L86:
 1233 009e CE01      		movw r24,r28
 1234 00a0 0196      		adiw r24,1
 1235 00a2 0E94 0000 		call read
 1236 00a6 8150      		subi r24,1
 1237 00a8 990B      		sbc r25,r25
 1238 00aa 080F      		add r16,r24
 1239 00ac 191F      		adc r17,r25
 125:main.c        ****     while (nbytes < 300) {
 1240               		.stabn	68,0,125,.LM161-.LFBB16
 1241               	.LM161:
 1242 00ae 0C32      		cpi r16,44
 1243 00b0 81E0      		ldi r24,1
 1244 00b2 1807      		cpc r17,r24
 1245 00b4 00F0      		brlo .L87
 128:main.c        ****     flow_off();
 1246               		.stabn	68,0,128,.LM162-.LFBB16
 1247               	.LM162:
 1248 00b6 0E94 0000 		call flow_off
 129:main.c        ****     if (received_data()) {
 1249               		.stabn	68,0,129,.LM163-.LFBB16
 1250               	.LM163:
 1251 00ba 0E94 0000 		call received_data
 1252 00be 8823      		tst r24
 1253 00c0 01F4      		brne .+2
 1254 00c2 00C0      		rjmp .L88
 130:main.c        ****         turn_led_on();
 1255               		.stabn	68,0,130,.LM164-.LFBB16
 1256               	.LM164:
 1257 00c4 0E94 0000 		call turn_led_on
 1258               	.L89:
 136:main.c        ****     reset_rxbuffer(); /* Limpa o buffer de rx */
 1259               		.stabn	68,0,136,.LM165-.LFBB16
 1260               	.LM165:
 1261 00c8 0E94 0000 		call reset_rxbuffer
 137:main.c        ****     flow_on(); /* Precisa do flow_on()? */
 1262               		.stabn	68,0,137,.LM166-.LFBB16
 1263               	.LM166:
 1264 00cc 0E94 0000 		call flow_on
 138:main.c        ****     PORTB &= ~(1 << PB5); /* Apaga o LED */
 1265               		.stabn	68,0,138,.LM167-.LFBB16
 1266               	.LM167:
 1267 00d0 2D98      		cbi 0x5,5
 139:main.c        ****     nbytes = 0;
 1268               		.stabn	68,0,139,.LM168-.LFBB16
 1269               	.LM168:
 1270 00d2 10E0      		ldi r17,0
 1271 00d4 00E0      		ldi r16,0
 141:main.c        ****         nbytes += read(buffer, 300-nbytes > 254 ? 254 : 300-nbytes) - 1; /* Conferir se precisa des
 1272               		.stabn	68,0,141,.LM169-.LFBB16
 1273               	.LM169:
 1274 00d6 8CE2      		ldi r24,lo8(44)
 1275 00d8 E82E      		mov r14,r24
 1276 00da FF24      		clr r15
 1277 00dc F394      		inc r15
 1278               	.L91:
 1279 00de B701      		movw r22,r14
GAS LISTING /tmp/ccHmbt1y.s 			page 32


 1280 00e0 601B      		sub r22,r16
 1281 00e2 710B      		sbc r23,r17
 1282 00e4 6F3F      		cpi r22,-1
 1283 00e6 7105      		cpc r23,__zero_reg__
 1284 00e8 00F0      		brlo .L90
 1285 00ea 6EEF      		ldi r22,lo8(-2)
 1286 00ec 70E0      		ldi r23,0
 1287               	.L90:
 1288 00ee CE01      		movw r24,r28
 1289 00f0 0196      		adiw r24,1
 1290 00f2 0E94 0000 		call read
 1291 00f6 8150      		subi r24,1
 1292 00f8 990B      		sbc r25,r25
 1293 00fa 080F      		add r16,r24
 1294 00fc 191F      		adc r17,r25
 140:main.c        ****     while (nbytes < 300) {
 1295               		.stabn	68,0,140,.LM170-.LFBB16
 1296               	.LM170:
 1297 00fe 0C32      		cpi r16,44
 1298 0100 E1E0      		ldi r30,1
 1299 0102 1E07      		cpc r17,r30
 1300 0104 00F0      		brlo .L91
 144:main.c        ****     flow_off();
 1301               		.stabn	68,0,144,.LM171-.LFBB16
 1302               	.LM171:
 1303 0106 0E94 0000 		call flow_off
 145:main.c        ****     if (received_data()) {
 1304               		.stabn	68,0,145,.LM172-.LFBB16
 1305               	.LM172:
 1306 010a 0E94 0000 		call received_data
 1307 010e 8823      		tst r24
 1308 0110 01F4      		brne .+2
 1309 0112 00C0      		rjmp .L92
 146:main.c        ****         turn_led_on();
 1310               		.stabn	68,0,146,.LM173-.LFBB16
 1311               	.LM173:
 1312 0114 0E94 0000 		call turn_led_on
 1313               	.L93:
 152:main.c        ****     flow_on(); /* Precisa do flow_on()? */
 1314               		.stabn	68,0,152,.LM174-.LFBB16
 1315               	.LM174:
 1316 0118 0E94 0000 		call flow_on
 153:main.c        ****     PORTB &= ~(1 << PB5); /* Apaga o LED */
 1317               		.stabn	68,0,153,.LM175-.LFBB16
 1318               	.LM175:
 1319 011c 2D98      		cbi 0x5,5
 155:main.c        ****     uint8_t binary_string[] = {0x00, 0x01, 0x11, 0x02, 0x13, 0x04, 0x7e, 0x05, 0x7d, 0x06};
 1320               		.stabn	68,0,155,.LM176-.LFBB16
 1321               	.LM176:
 1322 011e 8AE0      		ldi r24,lo8(10)
 1323 0120 E0E0      		ldi r30,lo8(.LC0)
 1324 0122 F0E0      		ldi r31,hi8(.LC0)
 1325 0124 DE01      		movw r26,r28
 1326 0126 A856      		subi r26,104
 1327 0128 BE4F      		sbci r27,-2
 1328               		0:
 1329 012a 0190      		ld r0,Z+
GAS LISTING /tmp/ccHmbt1y.s 			page 33


 1330 012c 0D92      		st X+,r0
 1331 012e 8A95      		dec r24
 1332 0130 01F4      		brne 0b
 156:main.c        ****     i = 0;
 1333               		.stabn	68,0,156,.LM177-.LFBB16
 1334               	.LM177:
 1335 0132 10E0      		ldi r17,0
 1336               	.L96:
 160:main.c        ****         if (!write(binary_string+i, 1, 0)) {
 1337               		.stabn	68,0,160,.LM178-.LFBB16
 1338               	.LM178:
 1339 0134 40E0      		ldi r20,0
 1340 0136 61E0      		ldi r22,lo8(1)
 1341 0138 88E9      		ldi r24,lo8(-104)
 1342 013a 91E0      		ldi r25,lo8(1)
 1343 013c 8C0F      		add r24,r28
 1344 013e 9D1F      		adc r25,r29
 1345 0140 810F      		add r24,r17
 1346 0142 911D      		adc r25,__zero_reg__
 1347 0144 0E94 0000 		call write
 1348 0148 8111      		cpse r24,__zero_reg__
 1349 014a 00C0      		rjmp .L94
 161:main.c        ****             PORTB |= (1 << PB5); /* Acende o LED */
 1350               		.stabn	68,0,161,.LM179-.LFBB16
 1351               	.LM179:
 1352 014c 2D9A      		sbi 0x5,5
 1353               	.L95:
 159:main.c        ****     while (i < sizeof(binary_string)) { 
 1354               		.stabn	68,0,159,.LM180-.LFBB16
 1355               	.LM180:
 1356 014e 1A30      		cpi r17,lo8(10)
 1357 0150 01F4      		brne .L96
 169:main.c        ****     reset_rxbuffer(); /* Limpa o buffer de rx */
 1358               		.stabn	68,0,169,.LM181-.LFBB16
 1359               	.LM181:
 1360 0152 0E94 0000 		call reset_rxbuffer
 170:main.c        ****     uint8_t comp_str[] = "Desenvolvimento de sistemas embarcados";
 1361               		.stabn	68,0,170,.LM182-.LFBB16
 1362               	.LM182:
 1363 0156 8E01      		movw r16,r28
 1364 0158 0F58      		subi r16,-113
 1365 015a 1E4F      		sbci r17,-2
 1366 015c 87E2      		ldi r24,lo8(39)
 1367 015e E0E0      		ldi r30,lo8(.LC2)
 1368 0160 F0E0      		ldi r31,hi8(.LC2)
 1369 0162 D801      		movw r26,r16
 1370               		0:
 1371 0164 0190      		ld r0,Z+
 1372 0166 0D92      		st X+,r0
 1373 0168 8A95      		dec r24
 1374 016a 01F4      		brne 0b
 1375               	.L97:
 177:main.c        ****         read(comp_buffer, 254);
 1376               		.stabn	68,0,177,.LM183-.LFBB16
 1377               	.LM183:
 1378 016c 6EEF      		ldi r22,lo8(-2)
 1379 016e CE01      		movw r24,r28
GAS LISTING /tmp/ccHmbt1y.s 			page 34


 1380 0170 865B      		subi r24,-74
 1381 0172 9E4F      		sbci r25,-2
 1382 0174 0E94 0000 		call read
 186:main.c        ****         if (memcmp(comp_buffer, comp_str, strlen((const char *)comp_str)+1) == 0) {
 1383               		.stabn	68,0,186,.LM184-.LFBB16
 1384               	.LM184:
 1385 0178 F801      		movw r30,r16
 1386               		0:
 1387 017a 0190      		ld __tmp_reg__,Z+
 1388 017c 0020      		tst __tmp_reg__
 1389 017e 01F4      		brne 0b
 1390 0180 AF01      		movw r20,r30
 1391 0182 401B      		sub r20,r16
 1392 0184 510B      		sbc r21,r17
 1393 0186 B801      		movw r22,r16
 1394 0188 CE01      		movw r24,r28
 1395 018a 865B      		subi r24,-74
 1396 018c 9E4F      		sbci r25,-2
 1397 018e 0E94 0000 		call memcmp
 1398 0192 892B      		or r24,r25
 1399 0194 01F4      		brne .L98
 187:main.c        ****             PORTB |= (1 << PB5);
 1400               		.stabn	68,0,187,.LM185-.LFBB16
 1401               	.LM185:
 1402 0196 2D9A      		sbi 0x5,5
 1403               	.L100:
 156:main.c        ****     i = 0;
 1404               		.stabn	68,0,156,.LM186-.LFBB16
 1405               	.LM186:
 1406 0198 F12C      		mov r15,__zero_reg__
 1407               	.L99:
 194:main.c        ****         while (read(comp_buffer+k, 10) == 11) {
 1408               		.stabn	68,0,194,.LM187-.LFBB16
 1409               	.LM187:
 1410 019a 6AE0      		ldi r22,lo8(10)
 1411 019c 8AE4      		ldi r24,lo8(74)
 1412 019e 91E0      		ldi r25,lo8(1)
 1413 01a0 8C0F      		add r24,r28
 1414 01a2 9D1F      		adc r25,r29
 1415 01a4 8F0D      		add r24,r15
 1416 01a6 911D      		adc r25,__zero_reg__
 1417 01a8 0E94 0000 		call read
 1418 01ac 8B30      		cpi r24,lo8(11)
 1419 01ae 01F0      		breq .L101
 205:main.c        ****         if (memcmp(comp_buffer, comp_str, strlen((const char *)comp_str)+1) == 0) {
 1420               		.stabn	68,0,205,.LM188-.LFBB16
 1421               	.LM188:
 1422 01b0 F801      		movw r30,r16
 1423               		0:
 1424 01b2 0190      		ld __tmp_reg__,Z+
 1425 01b4 0020      		tst __tmp_reg__
 1426 01b6 01F4      		brne 0b
 1427 01b8 AF01      		movw r20,r30
 1428 01ba 401B      		sub r20,r16
 1429 01bc 510B      		sbc r21,r17
 1430 01be B801      		movw r22,r16
 1431 01c0 CE01      		movw r24,r28
GAS LISTING /tmp/ccHmbt1y.s 			page 35


 1432 01c2 865B      		subi r24,-74
 1433 01c4 9E4F      		sbci r25,-2
 1434 01c6 0E94 0000 		call memcmp
 1435 01ca 892B      		or r24,r25
 1436 01cc 01F4      		brne .L102
 206:main.c        ****             PORTB |= (1 << PB5);
 1437               		.stabn	68,0,206,.LM189-.LFBB16
 1438               	.LM189:
 1439 01ce 2D9A      		sbi 0x5,5
 1440 01d0 00C0      		rjmp .L97
 1441               	.L84:
 112:main.c        ****         if (i >= 10) {
 1442               		.stabn	68,0,112,.LM190-.LFBB16
 1443               	.LM190:
 1444 01d2 1A30      		cpi r17,lo8(10)
 1445 01d4 00F0      		brlo .+2
 1446 01d6 00C0      		rjmp .L82
 116:main.c        ****             write(str_test+j, i-1, 1);
 1447               		.stabn	68,0,116,.LM191-.LFBB16
 1448               	.LM191:
 1449 01d8 6FEF      		ldi r22,lo8(-1)
 1450 01da 610F      		add r22,r17
 1451 01dc 41E0      		ldi r20,lo8(1)
 1452 01de 80E0      		ldi r24,0
 1453 01e0 91E0      		ldi r25,lo8(1)
 1454 01e2 8C0F      		add r24,r28
 1455 01e4 9D1F      		adc r25,r29
 1456 01e6 800F      		add r24,r16
 1457 01e8 911D      		adc r25,__zero_reg__
 1458 01ea 0E94 0000 		call write
 1459 01ee 00C0      		rjmp .L85
 1460               	.L88:
 132:main.c        ****         blink_led();
 1461               		.stabn	68,0,132,.LM192-.LFBB16
 1462               	.LM192:
 1463 01f0 0E94 0000 		call blink_led
 1464 01f4 00C0      		rjmp .L89
 1465               	.L92:
 148:main.c        ****         blink_led();
 1466               		.stabn	68,0,148,.LM193-.LFBB16
 1467               	.LM193:
 1468 01f6 0E94 0000 		call blink_led
 1469 01fa 00C0      		rjmp .L93
 1470               	.L94:
 163:main.c        ****             PORTB &= ~(1 << PB5); /* Apaga o LED */
 1471               		.stabn	68,0,163,.LM194-.LFBB16
 1472               	.LM194:
 1473 01fc 2D98      		cbi 0x5,5
 164:main.c        ****             i++;
 1474               		.stabn	68,0,164,.LM195-.LFBB16
 1475               	.LM195:
 1476 01fe 1F5F      		subi r17,lo8(-(1))
 1477 0200 00C0      		rjmp .L95
 1478               	.L98:
 189:main.c        ****             PORTB &= ~(1 << PB5);
 1479               		.stabn	68,0,189,.LM196-.LFBB16
 1480               	.LM196:
GAS LISTING /tmp/ccHmbt1y.s 			page 36


 1481 0202 2D98      		cbi 0x5,5
 1482 0204 00C0      		rjmp .L100
 1483               	.L101:
 195:main.c        ****             k += 10;
 1484               		.stabn	68,0,195,.LM197-.LFBB16
 1485               	.LM197:
 1486 0206 FAE0      		ldi r31,lo8(10)
 1487 0208 FF0E      		add r15,r31
 1488 020a 00C0      		rjmp .L99
 1489               	.L102:
 208:main.c        ****             PORTB &= ~(1 << PB5);
 1490               		.stabn	68,0,208,.LM198-.LFBB16
 1491               	.LM198:
 1492 020c 2D98      		cbi 0x5,5
 1493 020e 00C0      		rjmp .L97
 1494               		.size	main, .-main
 1495               		.stabs	"str_test:(0,52)=ar(0,53)=r(0,53);0;0177777;;0;73;(5,2)",128,0,103,256
 1496               		.stabs	"j:r(5,2)",64,0,110,16
 1497               		.stabs	"buffer:(0,54)=ar(0,53);0;254;(5,2)",128,0,124,1
 1498               		.stabs	"binary_string:(0,55)=ar(0,53);0;9;(5,2)",128,0,155,408
 1499               		.stabs	"comp_str:(0,56)=ar(0,53);0;38;(5,2)",128,0,170,369
 1500               		.stabs	"comp_buffer:(0,56)",128,0,171,330
 1501               		.stabs	"k:r(5,2)",64,0,172,15
 1502               		.stabn	192,0,0,.LFBB16-.LFBB16
 1503               		.stabn	224,0,0,.Lscope16-.LFBB16
 1504               	.Lscope16:
 1505               		.stabs	"",36,0,0,.Lscope16-.LFBB16
 1506               		.stabd	78,0,0
 1507               	.global	rcvd_byte
 1508               		.section .bss
 1509               		.type	rcvd_byte, @object
 1510               		.size	rcvd_byte, 1
 1511               	rcvd_byte:
 1512 0000 00        		.zero	1
 1513               		.stabs	"rcvd_byte:G(0,57)=B(5,2)",32,0,46,0
 1514               		.comm	usart_transmitting,1,1
 1515               		.stabs	"usart_transmitting:G(5,2)",32,0,44,0
 1516               		.comm	tx_tail,1,1
 1517               		.stabs	"tx_tail:G(5,2)",32,0,43,0
 1518               		.comm	tx_head,1,1
 1519               		.stabs	"tx_head:G(5,2)",32,0,43,0
 1520               		.comm	tx_buffer,255,1
 1521               		.stabs	"tx_buffer:G(0,54)",32,0,42,0
 1522               		.comm	rx_tail,1,1
 1523               		.stabs	"rx_tail:G(5,2)",32,0,41,0
 1524               		.comm	rx_head,1,1
 1525               		.stabs	"rx_head:G(5,2)",32,0,41,0
 1526               		.comm	rx_buffer,255,1
 1527               		.stabs	"rx_buffer:G(0,54)",32,0,40,0
 1528               	.global	tx_state
 1529               		.data
 1530               		.type	tx_state, @object
 1531               		.size	tx_state, 1
 1532               	tx_state:
 1533 0000 01        		.byte	1
 1534               		.stabs	"tx_state:G(5,2)",32,0,39,0
 1535               		.comm	rx_sinc,1,1
GAS LISTING /tmp/ccHmbt1y.s 			page 37


 1536               		.stabs	"rx_sinc:G(5,2)",32,0,39,0
 1537               	.global	rx_state
 1538               		.type	rx_state, @object
 1539               		.size	rx_state, 1
 1540               	rx_state:
 1541 0001 01        		.byte	1
 1542               		.stabs	"rx_state:G(5,2)",32,0,39,0
 1543               		.comm	rx_esc,1,1
 1544               		.stabs	"rx_esc:G(5,2)",32,0,39,0
 1545               		.comm	tx_byte_cnt,1,1
 1546               		.stabs	"tx_byte_cnt:G(5,2)",32,0,38,0
 1547               		.comm	rx_byte_cnt,1,1
 1548               		.stabs	"rx_byte_cnt:G(5,2)",32,0,38,0
 1549               		.text
 1550               		.stabs	"",100,0,0,.Letext0
 1551               	.Letext0:
 1552               		.ident	"GCC: (GNU) 7.3.0"
 1553               	.global __do_copy_data
 1554               	.global __do_clear_bss
GAS LISTING /tmp/ccHmbt1y.s 			page 38


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
     /tmp/ccHmbt1y.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccHmbt1y.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccHmbt1y.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccHmbt1y.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccHmbt1y.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccHmbt1y.s:113    .text:0000000000000000 __vector_19
                            *COM*:0000000000000001 tx_tail
                            *COM*:0000000000000001 tx_head
                            *COM*:0000000000000001 usart_transmitting
                            *COM*:00000000000000ff tx_buffer
     /tmp/ccHmbt1y.s:186    .text:000000000000005c read_rx_buffer
                            *COM*:0000000000000001 rx_tail
                            *COM*:0000000000000001 rx_head
                            *COM*:00000000000000ff rx_buffer
     /tmp/ccHmbt1y.s:264    .text:0000000000000092 read
     /tmp/ccHmbt1y.s:1540   .data:0000000000000001 rx_state
     /tmp/ccHmbt1y.s:1511   .bss:0000000000000000 rcvd_byte
                            *COM*:0000000000000001 rx_sinc
     /tmp/ccHmbt1y.s:361    .text:00000000000000ea write_tx_buffer
     /tmp/ccHmbt1y.s:467    .text:0000000000000138 write
                            *COM*:0000000000000001 tx_byte_cnt
     /tmp/ccHmbt1y.s:1532   .data:0000000000000000 tx_state
     /tmp/ccHmbt1y.s:572    .text:00000000000001bc enqueue_rx_buffer
     /tmp/ccHmbt1y.s:642    .text:00000000000001f6 __vector_18
                            *COM*:0000000000000001 rx_esc
     /tmp/ccHmbt1y.s:762    .text:0000000000000286 flow_off
     /tmp/ccHmbt1y.s:789    .text:0000000000000292 flow_on
     /tmp/ccHmbt1y.s:817    .text:00000000000002a0 is_flow_on
     /tmp/ccHmbt1y.s:839    .text:00000000000002a6 delay_ms
     /tmp/ccHmbt1y.s:893    .text:00000000000002c4 blink_led
     /tmp/ccHmbt1y.s:938    .text:00000000000002e2 turn_led_on
     /tmp/ccHmbt1y.s:969    .text:00000000000002f0 received_data
     /tmp/ccHmbt1y.s:1035   .text:000000000000031c reset_rxbuffer
     /tmp/ccHmbt1y.s:1107   .text.startup:0000000000000000 main
                            *COM*:0000000000000001 rx_byte_cnt

UNDEFINED SYMBOLS
memcmp
__do_copy_data
__do_clear_bss
