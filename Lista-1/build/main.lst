GAS LISTING /tmp/ccfeYjiW.s 			page 1


   1               		.file	"main.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.stabs	"/home/pedro/RTOS/Lista-1/",100,0,2,.Ltext0
   8               		.stabs	"main.c",100,0,2,.Ltext0
   9               		.text
  10               	.Ltext0:
  11               		.stabs	"gcc2_compiled.",60,0,0,0
  12               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  13               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,0,0
  14               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  15               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  16               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  17               		.stabs	"__int128:t(0,6)=@s128;r(0,6);02000000000000000000000000000000000000000000;0177777777777777
  18               		.stabs	"__int128 unsigned:t(0,7)=@s128;r(0,7);0;03777777777777777777777777777777777777777777;",128
  19               		.stabs	"long long int:t(0,8)=@s64;r(0,8);01000000000000000000000;00777777777777777777777;",128,0,0
  20               		.stabs	"long long unsigned int:t(0,9)=@s64;r(0,9);0;01777777777777777777777;",128,0,0,0
  21               		.stabs	"short int:t(0,10)=r(0,10);-32768;32767;",128,0,0,0
  22               		.stabs	"short unsigned int:t(0,11)=r(0,11);0;0177777;",128,0,0,0
  23               		.stabs	"signed char:t(0,12)=@s8;r(0,12);-128;127;",128,0,0,0
  24               		.stabs	"unsigned char:t(0,13)=@s8;r(0,13);0;255;",128,0,0,0
  25               		.stabs	"float:t(0,14)=r(0,1);4;0;",128,0,0,0
  26               		.stabs	"double:t(0,15)=r(0,1);4;0;",128,0,0,0
  27               		.stabs	"long double:t(0,16)=r(0,1);4;0;",128,0,0,0
  28               		.stabs	"_Float32:t(0,17)=r(0,1);4;0;",128,0,0,0
  29               		.stabs	"short _Fract:t(0,18)=r(0,1);1;0;",128,0,0,0
  30               		.stabs	"_Fract:t(0,19)=r(0,1);2;0;",128,0,0,0
  31               		.stabs	"long _Fract:t(0,20)=r(0,1);4;0;",128,0,0,0
  32               		.stabs	"long long _Fract:t(0,21)=r(0,1);8;0;",128,0,0,0
  33               		.stabs	"unsigned short _Fract:t(0,22)=r(0,1);1;0;",128,0,0,0
  34               		.stabs	"unsigned _Fract:t(0,23)=r(0,1);2;0;",128,0,0,0
  35               		.stabs	"unsigned long _Fract:t(0,24)=r(0,1);4;0;",128,0,0,0
  36               		.stabs	"unsigned long long _Fract:t(0,25)=r(0,1);8;0;",128,0,0,0
  37               		.stabs	"_Sat short _Fract:t(0,26)=r(0,1);1;0;",128,0,0,0
  38               		.stabs	"_Sat _Fract:t(0,27)=r(0,1);2;0;",128,0,0,0
  39               		.stabs	"_Sat long _Fract:t(0,28)=r(0,1);4;0;",128,0,0,0
  40               		.stabs	"_Sat long long _Fract:t(0,29)=r(0,1);8;0;",128,0,0,0
  41               		.stabs	"_Sat unsigned short _Fract:t(0,30)=r(0,1);1;0;",128,0,0,0
  42               		.stabs	"_Sat unsigned _Fract:t(0,31)=r(0,1);2;0;",128,0,0,0
  43               		.stabs	"_Sat unsigned long _Fract:t(0,32)=r(0,1);4;0;",128,0,0,0
  44               		.stabs	"_Sat unsigned long long _Fract:t(0,33)=r(0,1);8;0;",128,0,0,0
  45               		.stabs	"short _Accum:t(0,34)=r(0,1);2;0;",128,0,0,0
  46               		.stabs	"_Accum:t(0,35)=r(0,1);4;0;",128,0,0,0
  47               		.stabs	"long _Accum:t(0,36)=r(0,1);8;0;",128,0,0,0
  48               		.stabs	"long long _Accum:t(0,37)=r(0,1);8;0;",128,0,0,0
  49               		.stabs	"unsigned short _Accum:t(0,38)=r(0,1);2;0;",128,0,0,0
  50               		.stabs	"unsigned _Accum:t(0,39)=r(0,1);4;0;",128,0,0,0
  51               		.stabs	"unsigned long _Accum:t(0,40)=r(0,1);8;0;",128,0,0,0
  52               		.stabs	"unsigned long long _Accum:t(0,41)=r(0,1);8;0;",128,0,0,0
  53               		.stabs	"_Sat short _Accum:t(0,42)=r(0,1);2;0;",128,0,0,0
  54               		.stabs	"_Sat _Accum:t(0,43)=r(0,1);4;0;",128,0,0,0
  55               		.stabs	"_Sat long _Accum:t(0,44)=r(0,1);8;0;",128,0,0,0
  56               		.stabs	"_Sat long long _Accum:t(0,45)=r(0,1);8;0;",128,0,0,0
  57               		.stabs	"_Sat unsigned short _Accum:t(0,46)=r(0,1);2;0;",128,0,0,0
GAS LISTING /tmp/ccfeYjiW.s 			page 2


  58               		.stabs	"_Sat unsigned _Accum:t(0,47)=r(0,1);4;0;",128,0,0,0
  59               		.stabs	"_Sat unsigned long _Accum:t(0,48)=r(0,1);8;0;",128,0,0,0
  60               		.stabs	"_Sat unsigned long long _Accum:t(0,49)=r(0,1);8;0;",128,0,0,0
  61               		.stabs	"void:t(0,50)=(0,50)",128,0,0,0
  62               		.stabs	"/usr/lib/avr/include/avr/io.h",130,0,0,0
  63               		.stabs	"/usr/lib/avr/include/avr/sfr_defs.h",130,0,0,0
  64               		.stabs	"/usr/lib/avr/include/inttypes.h",130,0,0,0
  65               		.stabs	"/usr/lib/gcc/avr/7.3.0/include/stdint.h",130,0,0,0
  66               		.stabs	"/usr/lib/avr/include/stdint.h",130,0,0,0
  67               		.stabs	"int8_t:t(5,1)=(0,12)",128,0,125,0
  68               		.stabs	"uint8_t:t(5,2)=(0,13)",128,0,126,0
  69               		.stabs	"int16_t:t(5,3)=(0,1)",128,0,127,0
  70               		.stabs	"uint16_t:t(5,4)=(0,4)",128,0,128,0
  71               		.stabs	"int32_t:t(5,5)=(0,3)",128,0,129,0
  72               		.stabs	"uint32_t:t(5,6)=(0,5)",128,0,130,0
  73               		.stabs	"int64_t:t(5,7)=(0,8)",128,0,132,0
  74               		.stabs	"uint64_t:t(5,8)=(0,9)",128,0,133,0
  75               		.stabs	"intptr_t:t(5,9)=(5,3)",128,0,146,0
  76               		.stabs	"uintptr_t:t(5,10)=(5,4)",128,0,151,0
  77               		.stabs	"int_least8_t:t(5,11)=(5,1)",128,0,163,0
  78               		.stabs	"uint_least8_t:t(5,12)=(5,2)",128,0,168,0
  79               		.stabs	"int_least16_t:t(5,13)=(5,3)",128,0,173,0
  80               		.stabs	"uint_least16_t:t(5,14)=(5,4)",128,0,178,0
  81               		.stabs	"int_least32_t:t(5,15)=(5,5)",128,0,183,0
  82               		.stabs	"uint_least32_t:t(5,16)=(5,6)",128,0,188,0
  83               		.stabs	"int_least64_t:t(5,17)=(5,7)",128,0,196,0
  84               		.stabs	"uint_least64_t:t(5,18)=(5,8)",128,0,203,0
  85               		.stabs	"int_fast8_t:t(5,19)=(5,1)",128,0,217,0
  86               		.stabs	"uint_fast8_t:t(5,20)=(5,2)",128,0,222,0
  87               		.stabs	"int_fast16_t:t(5,21)=(5,3)",128,0,227,0
  88               		.stabs	"uint_fast16_t:t(5,22)=(5,4)",128,0,232,0
  89               		.stabs	"int_fast32_t:t(5,23)=(5,5)",128,0,237,0
  90               		.stabs	"uint_fast32_t:t(5,24)=(5,6)",128,0,242,0
  91               		.stabs	"int_fast64_t:t(5,25)=(5,7)",128,0,250,0
  92               		.stabs	"uint_fast64_t:t(5,26)=(5,8)",128,0,257,0
  93               		.stabs	"intmax_t:t(5,27)=(5,7)",128,0,277,0
  94               		.stabs	"uintmax_t:t(5,28)=(5,8)",128,0,282,0
  95               		.stabn	162,0,0,0
  96               		.stabn	162,0,0,0
  97               		.stabs	"int_farptr_t:t(3,1)=(5,5)",128,0,77,0
  98               		.stabs	"uint_farptr_t:t(3,2)=(5,6)",128,0,81,0
  99               		.stabn	162,0,0,0
 100               		.stabn	162,0,0,0
 101               		.stabs	"/usr/lib/avr/include/avr/fuse.h",130,0,0,0
 102               		.stabs	"__fuse_t:t(6,1)=(6,2)=s3low:(0,13),0,8;high:(0,13),8,8;extended:(0,13),16,8;;",128,0,244,0
 103               		.stabn	162,0,0,0
 104               		.stabn	162,0,0,0
 105               		.stabs	"/usr/lib/avr/include/string.h",130,0,0,0
 106               		.stabs	"/usr/lib/gcc/avr/7.3.0/include/stddef.h",130,0,0,0
 107               		.stabs	"size_t:t(8,1)=(0,4)",128,0,216,0
 108               		.stabn	162,0,0,0
 109               		.stabn	162,0,0,0
 110               		.stabs	"__vector_19:F(0,50)",36,0,68,__vector_19
 111               	.global	__vector_19
 112               		.type	__vector_19, @function
 113               	__vector_19:
 114               		.stabd	46,0,0
GAS LISTING /tmp/ccfeYjiW.s 			page 3


   1:main.c        **** /* Necess√°rio para fun√ß√µes e macros b√°sicas */
   2:main.c        **** #include <avr/io.h>
   3:main.c        **** 
   4:main.c        **** /* Os pr√≥ximos dois includes s√£o necess√°rios quando se usa interrup√ßoes */
   5:main.c        **** #include <avr/cpufunc.h>
   6:main.c        **** #include <avr/interrupt.h>
   7:main.c        **** 
   8:main.c        **** #include <stdint.h>
   9:main.c        **** #include <string.h>
  10:main.c        **** 
  11:main.c        **** #define FOSC 16000000ul
  12:main.c        **** #define BAUD 57600
  13:main.c        **** #define MYUBRR (FOSC/(8ul*BAUD) - 1)
  14:main.c        **** #define BUFFER_SIZE 255
  15:main.c        **** 
  16:main.c        **** /* Caracteres especiais */
  17:main.c        **** #define SINC 0x7e
  18:main.c        **** #define XON 0x11
  19:main.c        **** #define XOFF 0x13
  20:main.c        **** #define ESC 0x7d
  21:main.c        **** 
  22:main.c        **** /* Prot√≥tipos das fun√ß√µes */
  23:main.c        **** uint8_t write(uint8_t* buf, uint8_t n, int8_t close_packet);
  24:main.c        **** uint8_t read(uint8_t* buf, uint8_t n);
  25:main.c        **** uint16_t read_rx_buffer(void);
  26:main.c        **** uint8_t write_tx_buffer(uint8_t c);
  27:main.c        **** void enqueue_rx_buffer(uint8_t received_data);
  28:main.c        **** void flow_off(void);
  29:main.c        **** void flow_on(void);
  30:main.c        **** uint8_t is_flow_on(void);
  31:main.c        **** void delay_ms(uint16_t ms);
  32:main.c        **** void blink_led(void);
  33:main.c        **** void turn_led_on(void);
  34:main.c        **** 
  35:main.c        **** /* Vari√°veis globais */
  36:main.c        **** uint8_t rx_byte_cnt, tx_byte_cnt;
  37:main.c        **** uint8_t rx_esc, rx_state=1, rx_sinc, tx_state=1;
  38:main.c        **** uint8_t rx_buffer[BUFFER_SIZE]; /* buffer para recep√ß√£o */
  39:main.c        **** uint8_t rx_head, rx_tail; /* ponteiros para o buffer circular */
  40:main.c        **** uint8_t tx_buffer[BUFFER_SIZE];     /* buffer para transmiss√£o */
  41:main.c        **** uint8_t tx_head, tx_tail;   /* ponteiros para o buffer circular */
  42:main.c        **** uint8_t usart_transmitting;
  43:main.c        **** 
  44:main.c        **** volatile uint8_t rcvd_byte=0;
  45:main.c        **** ISR(USART_RX_vect) {
  46:main.c        ****     uint8_t received_data = UDR0;
  47:main.c        ****     
  48:main.c        ****     if (!rx_esc) {
  49:main.c        ****         if (received_data == ESC) {
  50:main.c        ****             rx_esc = 1;
  51:main.c        ****         } else if (received_data == XOFF) {
  52:main.c        ****             tx_state = 0;
  53:main.c        ****         } else if (received_data == XON) {
  54:main.c        ****             tx_state = 1;
  55:main.c        ****         } else if (received_data == SINC){
  56:main.c        ****             rx_sinc = 1;
  57:main.c        ****             rcvd_byte = 1;
GAS LISTING /tmp/ccfeYjiW.s 			page 4


  58:main.c        ****         } else {
  59:main.c        ****             enqueue_rx_buffer(received_data);
  60:main.c        ****         }
  61:main.c        ****     } else {
  62:main.c        ****         enqueue_rx_buffer(received_data);
  63:main.c        ****         rx_esc = 0;
  64:main.c        ****     }
  65:main.c        **** }
  66:main.c        **** 
  67:main.c        **** /* Flag UDREn indica se o buffer de transmiss√£o UDRn est√° vazio */
  68:main.c        **** ISR(USART_UDRE_vect)
  69:main.c        **** {
 115               		.stabn	68,0,69,.LM0-.LFBB1
 116               	.LM0:
 117               	.LFBB1:
 118 0000 1F92      		push r1
 119 0002 0F92      		push r0
 120 0004 0FB6      		in r0,__SREG__
 121 0006 0F92      		push r0
 122 0008 1124      		clr __zero_reg__
 123 000a 8F93      		push r24
 124 000c EF93      		push r30
 125 000e FF93      		push r31
 126               	/* prologue: Signal */
 127               	/* frame size = 0 */
 128               	/* stack size = 6 */
 129               	.L__stack_usage = 6
  70:main.c        ****     /*
  71:main.c        ****      * Caso tx_head == tx_tail √© porque todos os dados foram transmitidos e desabilita a interrup√
  72:main.c        ****      * Caso contr√°rio envia o dado que estava no tx_tail
  73:main.c        ****      */
  74:main.c        ****     if (tx_head == tx_tail) {
 130               		.stabn	68,0,74,.LM1-.LFBB1
 131               	.LM1:
 132 0010 E091 0000 		lds r30,tx_tail
 133 0014 8091 0000 		lds r24,tx_head
 134 0018 8E13      		cpse r24,r30
 135 001a 00C0      		rjmp .L2
  75:main.c        ****         UCSR0B &= ~(1 << UDRIE0);
 136               		.stabn	68,0,75,.LM2-.LFBB1
 137               	.LM2:
 138 001c 8091 C100 		lds r24,193
 139 0020 8F7D      		andi r24,lo8(-33)
 140 0022 8093 C100 		sts 193,r24
  76:main.c        ****         usart_transmitting = 0;
 141               		.stabn	68,0,76,.LM3-.LFBB1
 142               	.LM3:
 143 0026 1092 0000 		sts usart_transmitting,__zero_reg__
 144               	.L1:
 145               	/* epilogue start */
  77:main.c        ****     } else {
  78:main.c        ****         UDR0 = tx_buffer[tx_tail];
  79:main.c        ****         if (++tx_tail >= BUFFER_SIZE)
  80:main.c        ****             tx_tail = 0;
  81:main.c        ****     }
  82:main.c        **** }
 146               		.stabn	68,0,82,.LM4-.LFBB1
GAS LISTING /tmp/ccfeYjiW.s 			page 5


 147               	.LM4:
 148 002a FF91      		pop r31
 149 002c EF91      		pop r30
 150 002e 8F91      		pop r24
 151 0030 0F90      		pop r0
 152 0032 0FBE      		out __SREG__,r0
 153 0034 0F90      		pop r0
 154 0036 1F90      		pop r1
 155 0038 1895      		reti
 156               	.L2:
  78:main.c        ****         if (++tx_tail >= BUFFER_SIZE)
 157               		.stabn	68,0,78,.LM5-.LFBB1
 158               	.LM5:
 159 003a F0E0      		ldi r31,0
 160 003c E050      		subi r30,lo8(-(tx_buffer))
 161 003e F040      		sbci r31,hi8(-(tx_buffer))
 162 0040 8081      		ld r24,Z
 163 0042 8093 C600 		sts 198,r24
  79:main.c        ****             tx_tail = 0;
 164               		.stabn	68,0,79,.LM6-.LFBB1
 165               	.LM6:
 166 0046 8091 0000 		lds r24,tx_tail
 167 004a 8F5F      		subi r24,lo8(-(1))
 168 004c 8F3F      		cpi r24,lo8(-1)
 169 004e 01F0      		breq .L4
 170 0050 8093 0000 		sts tx_tail,r24
 171 0054 00C0      		rjmp .L1
 172               	.L4:
  80:main.c        ****     }
 173               		.stabn	68,0,80,.LM7-.LFBB1
 174               	.LM7:
 175 0056 1092 0000 		sts tx_tail,__zero_reg__
 176               		.stabn	68,0,82,.LM8-.LFBB1
 177               	.LM8:
 178 005a 00C0      		rjmp .L1
 179               		.size	__vector_19, .-__vector_19
 180               	.Lscope1:
 181               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 182               		.stabd	78,0,0
 183               		.stabs	"read_rx_buffer:F(5,4)",36,0,255,read_rx_buffer
 184               	.global	read_rx_buffer
 185               		.type	read_rx_buffer, @function
 186               	read_rx_buffer:
 187               		.stabd	46,0,0
  83:main.c        **** 
  84:main.c        **** int main(void) {
  85:main.c        ****     /* Fa√ßa a configura√ß√£o do que for necess√°rio aqui */
  86:main.c        ****     /* Seu c√≥digo aqui */
  87:main.c        ****     UCSR0A = (1 << U2X0); /* double speed */
  88:main.c        ****     UCSR0B = (1<<RXEN0) | (1 << TXEN0) | (1 << RXCIE0); /* Enable rx and tx, rx complete interrupt,
  89:main.c        ****     UCSR0C = (1<<UCSZ01) | (1<<UCSZ00); /* Set frame format: 8N1 */
  90:main.c        ****     UBRR0H = (MYUBRR>>8); /* Set baud rate */
  91:main.c        ****     UBRR0L = MYUBRR; /* Set baud rate */
  92:main.c        **** 
  93:main.c        ****     DDRB |= (1 << PB5); // Configura PB5 como sa√≠da (LED)
  94:main.c        ****     PORTB &= ~(1 << PB5); // Garante que o LED est√° apagado no in√≠cio   
  95:main.c        **** 
GAS LISTING /tmp/ccfeYjiW.s 			page 6


  96:main.c        ****     sei();
  97:main.c        **** 
  98:main.c        ****     /* Implemente os testes aqui. Veja o texto para os detalhes */
  99:main.c        ****     
 100:main.c        ****     /* Teste 2 */
 101:main.c        ****     uint8_t str_test[] = "Universidade Federal de Pernambuco\nDepartamento de Eletr√¥nica e Sistema
 102:main.c        ****     write(str_test, sizeof(str_test)-1, 1);
 103:main.c        **** 
 104:main.c        ****     /* Teste 3*/
 105:main.c        ****     uint8_t i = sizeof(str_test);
 106:main.c        ****     uint8_t j = 0;
 107:main.c        ****     while (i) {
 108:main.c        ****         if (i >= 10) {
 109:main.c        ****             i -= write(str_test+j, 10, 0);
 110:main.c        ****             j += 10;
 111:main.c        ****         } else {
 112:main.c        ****             write(str_test+j, i, 1);
 113:main.c        ****             i = 0;
 114:main.c        ****         }
 115:main.c        ****     }
 116:main.c        **** 
 117:main.c        ****     /* Teste 4 */
 118:main.c        ****     uint16_t nbytes = 0;
 119:main.c        ****     uint8_t buffer[255];
 120:main.c        ****     while (nbytes < 300) {
 121:main.c        ****         nbytes += read(buffer, 300-nbytes > 254 ? 254 : 300-nbytes) - 1; /* Conferir se precisa des
 122:main.c        ****     }
 123:main.c        ****     flow_off();
 124:main.c        ****     if (is_flow_on()) {
 125:main.c        ****         turn_led_on();
 126:main.c        ****     } else {
 127:main.c        ****         blink_led();
 128:main.c        ****     }
 129:main.c        **** 
 130:main.c        ****     /* Teste 5 */
 131:main.c        ****     flow_on(); /* Precisa do flow_on()? */
 132:main.c        ****     PORTB &= ~(1 << PB5); /* Apaga o LED */
 133:main.c        ****     nbytes = 0;
 134:main.c        ****     while (nbytes < 300) {
 135:main.c        ****         nbytes += read(buffer, 300-nbytes > 254 ? 254 : 300-nbytes) - 1; /* Conferir se precisa des
 136:main.c        ****     }
 137:main.c        **** 
 138:main.c        ****     flow_off();
 139:main.c        ****     if (is_flow_on()) {
 140:main.c        ****         turn_led_on();
 141:main.c        ****     } else {
 142:main.c        ****         blink_led();
 143:main.c        ****     }
 144:main.c        **** 
 145:main.c        ****     /* Teste 6 */
 146:main.c        ****     flow_on(); /* Precisa do flow_on()? */
 147:main.c        ****     PORTB &= ~(1 << PB5); /* Apaga o LED */
 148:main.c        ****     
 149:main.c        ****     uint8_t binary_string[] = {0x00, 0x01, 0x11, 0x02, 0x13, 0x04, 0x7e, 0x05, 0x7d, 0x06};
 150:main.c        ****     i = 0;
 151:main.c        ****     
 152:main.c        ****     /* √â pra ficar reenviando a string ou envia ela apenas uma vez? */
GAS LISTING /tmp/ccfeYjiW.s 			page 7


 153:main.c        ****     while (i < sizeof(binary_string)) { 
 154:main.c        ****         if (!write(binary_string+i, 1, 0)) {
 155:main.c        ****             PORTB |= (1 << PB5); /* Acende o LED */
 156:main.c        ****         } else {
 157:main.c        ****             PORTB &= ~(1 << PB5); /* Apaga o LED */
 158:main.c        ****             i++;
 159:main.c        ****         }
 160:main.c        ****     }
 161:main.c        ****     
 162:main.c        ****     /* Teste 7 */
 163:main.c        ****     uint8_t comp_str[] = "Desenvolvimento de sistemas embarcados";
 164:main.c        ****     uint8_t comp_buffer[sizeof(comp_str)];
 165:main.c        ****     uint8_t k = 0;
 166:main.c        ****     /* Loop infinito necess√°rio em qualquer programa para
 167:main.c        ****        embarcados */
 168:main.c        ****     while (1) {
 169:main.c        ****         /* Letra a */
 170:main.c        ****         memset(comp_buffer, 0, sizeof(comp_buffer));
 171:main.c        ****         read(comp_buffer, 254);
 172:main.c        **** 
 173:main.c        ****         for (int z = 0; z < sizeof(comp_buffer); z++){
 174:main.c        ****             write_tx_buffer(comp_buffer[z]);
 175:main.c        ****         }
 176:main.c        ****         write_tx_buffer('\n');
 177:main.c        ****         
 178:main.c        ****         if (memcmp(comp_buffer, comp_str, strlen((const char *)comp_str)+1) == 0) {
 179:main.c        ****             PORTB |= (1 << PB5);
 180:main.c        ****         } else {
 181:main.c        ****             PORTB &= ~(1 << PB5);
 182:main.c        ****         }
 183:main.c        **** 
 184:main.c        ****         memset(comp_buffer, 0, sizeof(comp_buffer));
 185:main.c        ****         while (read(comp_buffer+k, 10) == 11) {
 186:main.c        ****             k += 10;
 187:main.c        ****         };
 188:main.c        ****         k = 0;
 189:main.c        **** 
 190:main.c        ****         for (int z = 0; z < sizeof(comp_buffer); z++){
 191:main.c        ****             write_tx_buffer(comp_buffer[z]);
 192:main.c        ****         }
 193:main.c        ****         write_tx_buffer('\n');
 194:main.c        **** 
 195:main.c        ****         if (memcmp(comp_buffer, comp_str, strlen((const char *)comp_str)+1) == 0) {
 196:main.c        ****             PORTB |= (1 << PB5);
 197:main.c        ****         } else {
 198:main.c        ****             PORTB &= ~(1 << PB5);
 199:main.c        ****         }
 200:main.c        ****     }
 201:main.c        **** 
 202:main.c        ****     return 0;
 203:main.c        **** }
 204:main.c        **** 
 205:main.c        **** /* Fun√ß√µes */
 206:main.c        **** 
 207:main.c        **** uint8_t write(uint8_t* buf, uint8_t n, int8_t close_packet){
 208:main.c        ****     tx_byte_cnt = 0;
 209:main.c        **** 
GAS LISTING /tmp/ccfeYjiW.s 			page 8


 210:main.c        ****     if (!tx_state) {
 211:main.c        ****         return 0;
 212:main.c        ****     }
 213:main.c        ****     
 214:main.c        ****     while ((tx_byte_cnt < n) && tx_state) {
 215:main.c        ****         if (buf[tx_byte_cnt] == SINC || buf[tx_byte_cnt] == XON || buf[tx_byte_cnt] == XOFF || buf[
 216:main.c        ****             write_tx_buffer(ESC);
 217:main.c        ****         }
 218:main.c        ****         write_tx_buffer(buf[tx_byte_cnt]);
 219:main.c        ****         tx_byte_cnt++;
 220:main.c        ****     }
 221:main.c        **** 
 222:main.c        ****     if (close_packet && tx_state) {
 223:main.c        ****         write_tx_buffer(SINC);
 224:main.c        ****     }
 225:main.c        **** 
 226:main.c        ****     return tx_byte_cnt;
 227:main.c        **** }
 228:main.c        **** 
 229:main.c        **** /* Falta limitar o byte_cnt caso ultrapasse o tamanho do buffer */
 230:main.c        **** uint8_t read(uint8_t* buf, uint8_t n) {
 231:main.c        ****     uint8_t received_byte, byte_cnt = 0;
 232:main.c        **** 
 233:main.c        ****     while (byte_cnt < n) { 
 234:main.c        ****         if (!rx_state) {
 235:main.c        ****             return 0;
 236:main.c        ****         }
 237:main.c        ****         while (!rcvd_byte);
 238:main.c        **** 
 239:main.c        ****         received_byte = read_rx_buffer();
 240:main.c        **** 
 241:main.c        ****         if (rx_sinc) {
 242:main.c        ****             buf[byte_cnt] = '\0';
 243:main.c        ****             rx_sinc = 0;
 244:main.c        ****             return byte_cnt;
 245:main.c        ****         }
 246:main.c        **** 
 247:main.c        ****         buf[byte_cnt] = received_byte;
 248:main.c        ****         byte_cnt++;
 249:main.c        **** 
 250:main.c        ****         rcvd_byte = 0;
 251:main.c        ****     }
 252:main.c        ****     return n+1;
 253:main.c        **** }
 254:main.c        **** 
 255:main.c        **** uint16_t read_rx_buffer(void)
 256:main.c        **** {
 188               		.stabn	68,0,256,.LM9-.LFBB2
 189               	.LM9:
 190               	.LFBB2:
 191               	/* prologue: function */
 192               	/* frame size = 0 */
 193               	/* stack size = 0 */
 194               	.L__stack_usage = 0
 257:main.c        ****     uint8_t rc = 0, c = 0;
 258:main.c        **** 
 259:main.c        ****     cli();
GAS LISTING /tmp/ccfeYjiW.s 			page 9


 195               		.stabn	68,0,259,.LM10-.LFBB2
 196               	.LM10:
 197               	/* #APP */
 198               	 ;  259 "main.c" 1
 199 005c F894      		cli
 200               	 ;  0 "" 2
 260:main.c        ****     if (rx_head != rx_tail) {
 201               		.stabn	68,0,260,.LM11-.LFBB2
 202               	.LM11:
 203               	/* #NOAPP */
 204 005e 9091 0000 		lds r25,rx_tail
 205 0062 8091 0000 		lds r24,rx_head
 206 0066 8917      		cp r24,r25
 207 0068 01F0      		breq .L8
 261:main.c        ****         c = rx_buffer[rx_tail];
 208               		.stabn	68,0,261,.LM12-.LFBB2
 209               	.LM12:
 210 006a E92F      		mov r30,r25
 211 006c F0E0      		ldi r31,0
 212 006e E050      		subi r30,lo8(-(rx_buffer))
 213 0070 F040      		sbci r31,hi8(-(rx_buffer))
 214 0072 8081      		ld r24,Z
 262:main.c        ****         if (++rx_tail >= BUFFER_SIZE)
 215               		.stabn	68,0,262,.LM13-.LFBB2
 216               	.LM13:
 217 0074 9F5F      		subi r25,lo8(-(1))
 218 0076 9F3F      		cpi r25,lo8(-1)
 219 0078 01F0      		breq .L7
 220 007a 9093 0000 		sts rx_tail,r25
 221               	.L9:
 257:main.c        **** 
 222               		.stabn	68,0,257,.LM14-.LFBB2
 223               	.LM14:
 224 007e 20E0      		ldi r18,0
 225               	.L6:
 263:main.c        ****             rx_tail = 0;
 264:main.c        ****     } else 
 265:main.c        ****         rc = 1;
 266:main.c        ****     sei();
 226               		.stabn	68,0,266,.LM15-.LFBB2
 227               	.LM15:
 228               	/* #APP */
 229               	 ;  266 "main.c" 1
 230 0080 7894      		sei
 231               	 ;  0 "" 2
 267:main.c        ****     return ((uint16_t) rc << 8) | c;
 268:main.c        **** }
 232               		.stabn	68,0,268,.LM16-.LFBB2
 233               	.LM16:
 234               	/* #NOAPP */
 235 0082 922F      		mov r25,r18
 236               	/* epilogue start */
 237 0084 0895      		ret
 238               	.L7:
 263:main.c        ****             rx_tail = 0;
 239               		.stabn	68,0,263,.LM17-.LFBB2
 240               	.LM17:
GAS LISTING /tmp/ccfeYjiW.s 			page 10


 241 0086 1092 0000 		sts rx_tail,__zero_reg__
 242 008a 00C0      		rjmp .L9
 243               	.L8:
 257:main.c        **** 
 244               		.stabn	68,0,257,.LM18-.LFBB2
 245               	.LM18:
 246 008c 80E0      		ldi r24,0
 265:main.c        ****     sei();
 247               		.stabn	68,0,265,.LM19-.LFBB2
 248               	.LM19:
 249 008e 21E0      		ldi r18,lo8(1)
 250 0090 00C0      		rjmp .L6
 251               		.size	read_rx_buffer, .-read_rx_buffer
 252               		.stabs	"rc:r(5,2)",64,0,257,18
 253               		.stabs	"c:r(5,2)",64,0,257,24
 254               		.stabn	192,0,0,.LFBB2-.LFBB2
 255               		.stabn	224,0,0,.Lscope2-.LFBB2
 256               	.Lscope2:
 257               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 258               		.stabd	78,0,0
 259               		.stabs	"read:F(5,2)",36,0,230,read
 260               		.stabs	"buf:P(0,51)=*(5,2)",64,0,230,24
 261               		.stabs	"n:P(5,2)",64,0,230,29
 262               	.global	read
 263               		.type	read, @function
 264               	read:
 265               		.stabd	46,0,0
 230:main.c        ****     uint8_t received_byte, byte_cnt = 0;
 266               		.stabn	68,0,230,.LM20-.LFBB3
 267               	.LM20:
 268               	.LFBB3:
 269 0092 0F93      		push r16
 270 0094 1F93      		push r17
 271 0096 CF93      		push r28
 272 0098 DF93      		push r29
 273               	/* prologue: function */
 274               	/* frame size = 0 */
 275               	/* stack size = 4 */
 276               	.L__stack_usage = 4
 277 009a D62F      		mov r29,r22
 278 009c 8C01      		movw r16,r24
 231:main.c        **** 
 279               		.stabn	68,0,231,.LM21-.LFBB3
 280               	.LM21:
 281 009e C0E0      		ldi r28,0
 282               	.L11:
 233:main.c        ****         if (!rx_state) {
 283               		.stabn	68,0,233,.LM22-.LFBB3
 284               	.LM22:
 285 00a0 CD13      		cpse r28,r29
 286 00a2 00C0      		rjmp .L15
 252:main.c        **** }
 287               		.stabn	68,0,252,.LM23-.LFBB3
 288               	.LM23:
 289 00a4 81E0      		ldi r24,lo8(1)
 290 00a6 8C0F      		add r24,r28
 291 00a8 00C0      		rjmp .L10
GAS LISTING /tmp/ccfeYjiW.s 			page 11


 292               	.L15:
 234:main.c        ****             return 0;
 293               		.stabn	68,0,234,.LM24-.LFBB3
 294               	.LM24:
 295 00aa 8091 0000 		lds r24,rx_state
 296 00ae 8823      		tst r24
 297 00b0 01F0      		breq .L10
 298               	.L13:
 237:main.c        **** 
 299               		.stabn	68,0,237,.LM25-.LFBB3
 300               	.LM25:
 301 00b2 8091 0000 		lds r24,rcvd_byte
 302 00b6 8823      		tst r24
 303 00b8 01F0      		breq .L13
 239:main.c        **** 
 304               		.stabn	68,0,239,.LM26-.LFBB3
 305               	.LM26:
 306 00ba 0E94 0000 		call read_rx_buffer
 241:main.c        ****             buf[byte_cnt] = '\0';
 307               		.stabn	68,0,241,.LM27-.LFBB3
 308               	.LM27:
 309 00be 9091 0000 		lds r25,rx_sinc
 242:main.c        ****             rx_sinc = 0;
 310               		.stabn	68,0,242,.LM28-.LFBB3
 311               	.LM28:
 312 00c2 F801      		movw r30,r16
 241:main.c        ****             buf[byte_cnt] = '\0';
 313               		.stabn	68,0,241,.LM29-.LFBB3
 314               	.LM29:
 315 00c4 9923      		tst r25
 316 00c6 01F0      		breq .L14
 242:main.c        ****             rx_sinc = 0;
 317               		.stabn	68,0,242,.LM30-.LFBB3
 318               	.LM30:
 319 00c8 1082      		st Z,__zero_reg__
 243:main.c        ****             return byte_cnt;
 320               		.stabn	68,0,243,.LM31-.LFBB3
 321               	.LM31:
 322 00ca 1092 0000 		sts rx_sinc,__zero_reg__
 244:main.c        ****         }
 323               		.stabn	68,0,244,.LM32-.LFBB3
 324               	.LM32:
 325 00ce 8C2F      		mov r24,r28
 326               	.L10:
 327               	/* epilogue start */
 253:main.c        **** 
 328               		.stabn	68,0,253,.LM33-.LFBB3
 329               	.LM33:
 330 00d0 DF91      		pop r29
 331 00d2 CF91      		pop r28
 332 00d4 1F91      		pop r17
 333 00d6 0F91      		pop r16
 334 00d8 0895      		ret
 335               	.L14:
 247:main.c        ****         byte_cnt++;
 336               		.stabn	68,0,247,.LM34-.LFBB3
 337               	.LM34:
GAS LISTING /tmp/ccfeYjiW.s 			page 12


 338 00da 8193      		st Z+,r24
 339 00dc 8F01      		movw r16,r30
 248:main.c        **** 
 340               		.stabn	68,0,248,.LM35-.LFBB3
 341               	.LM35:
 342 00de CF5F      		subi r28,lo8(-(1))
 250:main.c        ****     }
 343               		.stabn	68,0,250,.LM36-.LFBB3
 344               	.LM36:
 345 00e0 1092 0000 		sts rcvd_byte,__zero_reg__
 346 00e4 00C0      		rjmp .L11
 347               		.size	read, .-read
 348               		.stabs	"byte_cnt:r(5,2)",64,0,231,28
 349               		.stabn	192,0,0,.LFBB3-.LFBB3
 350               		.stabn	224,0,0,.Lscope3-.LFBB3
 351               	.Lscope3:
 352               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 353               		.stabd	78,0,0
 354               		.stabs	"write_tx_buffer:F(5,2)",36,0,270,write_tx_buffer
 355               		.stabs	"c:P(5,2)",64,0,270,18
 356               	.global	write_tx_buffer
 357               		.type	write_tx_buffer, @function
 358               	write_tx_buffer:
 359               		.stabd	46,0,0
 269:main.c        **** 
 270:main.c        **** uint8_t write_tx_buffer(uint8_t c) {
 360               		.stabn	68,0,270,.LM37-.LFBB4
 361               	.LM37:
 362               	.LFBB4:
 363               	/* prologue: function */
 364               	/* frame size = 0 */
 365               	/* stack size = 0 */
 366               	.L__stack_usage = 0
 367 00e6 282F      		mov r18,r24
 271:main.c        ****     uint8_t rc = 0;
 272:main.c        **** 
 273:main.c        ****     cli();
 368               		.stabn	68,0,273,.LM38-.LFBB4
 369               	.LM38:
 370               	/* #APP */
 371               	 ;  273 "main.c" 1
 372 00e8 F894      		cli
 373               	 ;  0 "" 2
 274:main.c        **** 
 275:main.c        ****     if(!usart_transmitting){
 374               		.stabn	68,0,275,.LM39-.LFBB4
 375               	.LM39:
 376               	/* #NOAPP */
 377 00ea 8091 0000 		lds r24,usart_transmitting
 378 00ee 8111      		cpse r24,__zero_reg__
 379 00f0 00C0      		rjmp .L22
 276:main.c        ****         UDR0 = c;
 380               		.stabn	68,0,276,.LM40-.LFBB4
 381               	.LM40:
 382 00f2 2093 C600 		sts 198,r18
 277:main.c        ****         UCSR0B |= (1 << UDRIE0);
 383               		.stabn	68,0,277,.LM41-.LFBB4
GAS LISTING /tmp/ccfeYjiW.s 			page 13


 384               	.LM41:
 385 00f6 9091 C100 		lds r25,193
 386 00fa 9062      		ori r25,lo8(32)
 387 00fc 9093 C100 		sts 193,r25
 278:main.c        ****         usart_transmitting = 1;
 388               		.stabn	68,0,278,.LM42-.LFBB4
 389               	.LM42:
 390 0100 91E0      		ldi r25,lo8(1)
 391 0102 9093 0000 		sts usart_transmitting,r25
 392               	.L23:
 279:main.c        ****     } else{
 280:main.c        ****         uint8_t next = tx_head + 1;
 281:main.c        ****         if (next >= BUFFER_SIZE)
 282:main.c        ****             next = 0;
 283:main.c        ****         if (next != tx_tail) {
 284:main.c        ****             tx_buffer[tx_head] = c;
 285:main.c        ****             tx_head = next;
 286:main.c        ****         } else  /* buffer cheio */
 287:main.c        ****             rc = 1;
 288:main.c        ****     }
 289:main.c        ****     sei();
 393               		.stabn	68,0,289,.LM43-.LFBB4
 394               	.LM43:
 395               	/* #APP */
 396               	 ;  289 "main.c" 1
 397 0106 7894      		sei
 398               	 ;  0 "" 2
 399               	/* epilogue start */
 290:main.c        ****     return rc;
 291:main.c        **** }
 400               		.stabn	68,0,291,.LM44-.LFBB4
 401               	.LM44:
 402               	/* #NOAPP */
 403 0108 0895      		ret
 404               	.L22:
 405               	.LBB8:
 280:main.c        ****         if (next >= BUFFER_SIZE)
 406               		.stabn	68,0,280,.LM45-.LFBB4
 407               	.LM45:
 408 010a E091 0000 		lds r30,tx_head
 409 010e 91E0      		ldi r25,lo8(1)
 410 0110 9E0F      		add r25,r30
 281:main.c        ****             next = 0;
 411               		.stabn	68,0,281,.LM46-.LFBB4
 412               	.LM46:
 413 0112 9F3F      		cpi r25,lo8(-1)
 414 0114 01F4      		brne .L24
 282:main.c        ****         if (next != tx_tail) {
 415               		.stabn	68,0,282,.LM47-.LFBB4
 416               	.LM47:
 417 0116 90E0      		ldi r25,0
 418               	.L24:
 283:main.c        ****             tx_buffer[tx_head] = c;
 419               		.stabn	68,0,283,.LM48-.LFBB4
 420               	.LM48:
 421 0118 8091 0000 		lds r24,tx_tail
 422 011c 8917      		cp r24,r25
GAS LISTING /tmp/ccfeYjiW.s 			page 14


 423 011e 01F0      		breq .L25
 284:main.c        ****             tx_head = next;
 424               		.stabn	68,0,284,.LM49-.LFBB4
 425               	.LM49:
 426 0120 F0E0      		ldi r31,0
 427 0122 E050      		subi r30,lo8(-(tx_buffer))
 428 0124 F040      		sbci r31,hi8(-(tx_buffer))
 429 0126 2083      		st Z,r18
 285:main.c        ****         } else  /* buffer cheio */
 430               		.stabn	68,0,285,.LM50-.LFBB4
 431               	.LM50:
 432 0128 9093 0000 		sts tx_head,r25
 433               	.LBE8:
 271:main.c        **** 
 434               		.stabn	68,0,271,.LM51-.LFBB4
 435               	.LM51:
 436 012c 80E0      		ldi r24,0
 437               	.LBB9:
 438 012e 00C0      		rjmp .L23
 439               	.L25:
 287:main.c        ****     }
 440               		.stabn	68,0,287,.LM52-.LFBB4
 441               	.LM52:
 442 0130 81E0      		ldi r24,lo8(1)
 443 0132 00C0      		rjmp .L23
 444               	.LBE9:
 445               		.size	write_tx_buffer, .-write_tx_buffer
 446               		.stabs	"rc:r(5,2)",64,0,271,24
 447               		.stabn	192,0,0,.LFBB4-.LFBB4
 448               		.stabs	"next:r(5,2)",64,0,280,25
 449               		.stabn	192,0,0,.LBB8-.LFBB4
 450               		.stabn	224,0,0,.LBE8-.LFBB4
 451               		.stabs	"next:r(5,2)",64,0,280,25
 452               		.stabn	192,0,0,.LBB9-.LFBB4
 453               		.stabn	224,0,0,.LBE9-.LFBB4
 454               		.stabn	224,0,0,.Lscope4-.LFBB4
 455               	.Lscope4:
 456               		.stabs	"",36,0,0,.Lscope4-.LFBB4
 457               		.stabd	78,0,0
 458               		.stabs	"write:F(5,2)",36,0,207,write
 459               		.stabs	"buf:P(0,51)",64,0,207,28
 460               		.stabs	"n:P(5,2)",64,0,207,16
 461               		.stabs	"close_packet:P(5,1)",64,0,207,17
 462               	.global	write
 463               		.type	write, @function
 464               	write:
 465               		.stabd	46,0,0
 207:main.c        ****     tx_byte_cnt = 0;
 466               		.stabn	68,0,207,.LM53-.LFBB5
 467               	.LM53:
 468               	.LFBB5:
 469 0134 0F93      		push r16
 470 0136 1F93      		push r17
 471 0138 CF93      		push r28
 472 013a DF93      		push r29
 473               	/* prologue: function */
 474               	/* frame size = 0 */
GAS LISTING /tmp/ccfeYjiW.s 			page 15


 475               	/* stack size = 4 */
 476               	.L__stack_usage = 4
 477 013c EC01      		movw r28,r24
 478 013e 062F      		mov r16,r22
 479 0140 142F      		mov r17,r20
 208:main.c        **** 
 480               		.stabn	68,0,208,.LM54-.LFBB5
 481               	.LM54:
 482 0142 1092 0000 		sts tx_byte_cnt,__zero_reg__
 210:main.c        ****         return 0;
 483               		.stabn	68,0,210,.LM55-.LFBB5
 484               	.LM55:
 485 0146 8091 0000 		lds r24,tx_state
 486 014a 8111      		cpse r24,__zero_reg__
 487 014c 00C0      		rjmp .L28
 488               	.L26:
 489               	/* epilogue start */
 227:main.c        **** 
 490               		.stabn	68,0,227,.LM56-.LFBB5
 491               	.LM56:
 492 014e DF91      		pop r29
 493 0150 CF91      		pop r28
 494 0152 1F91      		pop r17
 495 0154 0F91      		pop r16
 496 0156 0895      		ret
 497               	.L32:
 498               	.LBB12:
 499               	.LBB13:
 215:main.c        ****             write_tx_buffer(ESC);
 500               		.stabn	68,0,215,.LM57-.LFBB5
 501               	.LM57:
 502 0158 EC0F      		add r30,r28
 503 015a FD2F      		mov r31,r29
 504 015c F11D      		adc r31,__zero_reg__
 505 015e 8081      		ld r24,Z
 506 0160 982F      		mov r25,r24
 507 0162 9D7F      		andi r25,lo8(-3)
 508 0164 9131      		cpi r25,lo8(17)
 509 0166 01F0      		breq .L29
 510 0168 8D57      		subi r24,lo8(-(-125))
 511 016a 8230      		cpi r24,lo8(2)
 512 016c 00F4      		brsh .L30
 513               	.L29:
 216:main.c        ****         }
 514               		.stabn	68,0,216,.LM58-.LFBB5
 515               	.LM58:
 516 016e 8DE7      		ldi r24,lo8(125)
 517 0170 0E94 0000 		call write_tx_buffer
 518               	.L30:
 218:main.c        ****         tx_byte_cnt++;
 519               		.stabn	68,0,218,.LM59-.LFBB5
 520               	.LM59:
 521 0174 E091 0000 		lds r30,tx_byte_cnt
 522 0178 EC0F      		add r30,r28
 523 017a FD2F      		mov r31,r29
 524 017c F11D      		adc r31,__zero_reg__
 525 017e 8081      		ld r24,Z
GAS LISTING /tmp/ccfeYjiW.s 			page 16


 526 0180 0E94 0000 		call write_tx_buffer
 219:main.c        ****     }
 527               		.stabn	68,0,219,.LM60-.LFBB5
 528               	.LM60:
 529 0184 8091 0000 		lds r24,tx_byte_cnt
 530 0188 8F5F      		subi r24,lo8(-(1))
 531 018a 8093 0000 		sts tx_byte_cnt,r24
 532               	.L28:
 214:main.c        ****         if (buf[tx_byte_cnt] == SINC || buf[tx_byte_cnt] == XON || buf[tx_byte_cnt] == XOFF || buf[
 533               		.stabn	68,0,214,.LM61-.LFBB5
 534               	.LM61:
 535 018e E091 0000 		lds r30,tx_byte_cnt
 536 0192 E017      		cp r30,r16
 537 0194 00F4      		brsh .L31
 538 0196 8091 0000 		lds r24,tx_state
 539 019a 8111      		cpse r24,__zero_reg__
 540 019c 00C0      		rjmp .L32
 541               	.L33:
 226:main.c        **** }
 542               		.stabn	68,0,226,.LM62-.LFBB5
 543               	.LM62:
 544 019e 8091 0000 		lds r24,tx_byte_cnt
 545 01a2 00C0      		rjmp .L26
 546               	.L31:
 222:main.c        ****         write_tx_buffer(SINC);
 547               		.stabn	68,0,222,.LM63-.LFBB5
 548               	.LM63:
 549 01a4 1123      		tst r17
 550 01a6 01F0      		breq .L33
 551 01a8 8091 0000 		lds r24,tx_state
 552 01ac 8823      		tst r24
 553 01ae 01F0      		breq .L33
 223:main.c        ****     }
 554               		.stabn	68,0,223,.LM64-.LFBB5
 555               	.LM64:
 556 01b0 8EE7      		ldi r24,lo8(126)
 557 01b2 0E94 0000 		call write_tx_buffer
 558 01b6 00C0      		rjmp .L33
 559               	.LBE13:
 560               	.LBE12:
 561               		.size	write, .-write
 562               	.Lscope5:
 563               		.stabs	"",36,0,0,.Lscope5-.LFBB5
 564               		.stabd	78,0,0
 565               		.stabs	"enqueue_rx_buffer:F(0,50)",36,0,293,enqueue_rx_buffer
 566               		.stabs	"received_data:P(5,2)",64,0,293,24
 567               	.global	enqueue_rx_buffer
 568               		.type	enqueue_rx_buffer, @function
 569               	enqueue_rx_buffer:
 570               		.stabd	46,0,0
 292:main.c        **** 
 293:main.c        **** void enqueue_rx_buffer(uint8_t received_data) {
 571               		.stabn	68,0,293,.LM65-.LFBB6
 572               	.LM65:
 573               	.LFBB6:
 574               	/* prologue: function */
 575               	/* frame size = 0 */
GAS LISTING /tmp/ccfeYjiW.s 			page 17


 576               	/* stack size = 0 */
 577               	.L__stack_usage = 0
 294:main.c        ****     uint8_t next = rx_head + 1;
 578               		.stabn	68,0,294,.LM66-.LFBB6
 579               	.LM66:
 580 01b8 E091 0000 		lds r30,rx_head
 581 01bc 91E0      		ldi r25,lo8(1)
 582 01be 9E0F      		add r25,r30
 295:main.c        ****         if (next >= BUFFER_SIZE)
 583               		.stabn	68,0,295,.LM67-.LFBB6
 584               	.LM67:
 585 01c0 9F3F      		cpi r25,lo8(-1)
 586 01c2 01F4      		brne .L47
 296:main.c        ****             next = 0;
 587               		.stabn	68,0,296,.LM68-.LFBB6
 588               	.LM68:
 589 01c4 90E0      		ldi r25,0
 590               	.L47:
 297:main.c        ****         
 298:main.c        ****         /* Se o buffer estiver cheio desprezamos o byte recebido mais antigo e
 299:main.c        ****         * colocamos o byte que acabamos de receber em seu lugar */
 300:main.c        ****         rx_buffer[rx_head] = received_data;
 591               		.stabn	68,0,300,.LM69-.LFBB6
 592               	.LM69:
 593 01c6 F0E0      		ldi r31,0
 594 01c8 E050      		subi r30,lo8(-(rx_buffer))
 595 01ca F040      		sbci r31,hi8(-(rx_buffer))
 596 01cc 8083      		st Z,r24
 301:main.c        ****         rx_head = next;
 597               		.stabn	68,0,301,.LM70-.LFBB6
 598               	.LM70:
 599 01ce 9093 0000 		sts rx_head,r25
 302:main.c        ****         if (next == rx_tail) { /* buffer cheio */
 600               		.stabn	68,0,302,.LM71-.LFBB6
 601               	.LM71:
 602 01d2 8091 0000 		lds r24,rx_tail
 603 01d6 8913      		cpse r24,r25
 604 01d8 00C0      		rjmp .L49
 303:main.c        ****             rx_tail++;
 605               		.stabn	68,0,303,.LM72-.LFBB6
 606               	.LM72:
 607 01da 9F5F      		subi r25,lo8(-(1))
 304:main.c        ****             if (rx_tail >= BUFFER_SIZE)
 608               		.stabn	68,0,304,.LM73-.LFBB6
 609               	.LM73:
 610 01dc 9F3F      		cpi r25,lo8(-1)
 611 01de 01F0      		breq .L50
 303:main.c        ****             rx_tail++;
 612               		.stabn	68,0,303,.LM74-.LFBB6
 613               	.LM74:
 614 01e0 9093 0000 		sts rx_tail,r25
 615               	.L49:
 305:main.c        ****                 rx_tail = 0;
 306:main.c        ****         }
 307:main.c        ****         rcvd_byte = 1;
 616               		.stabn	68,0,307,.LM75-.LFBB6
 617               	.LM75:
GAS LISTING /tmp/ccfeYjiW.s 			page 18


 618 01e4 81E0      		ldi r24,lo8(1)
 619 01e6 8093 0000 		sts rcvd_byte,r24
 620               	/* epilogue start */
 308:main.c        **** }
 621               		.stabn	68,0,308,.LM76-.LFBB6
 622               	.LM76:
 623 01ea 0895      		ret
 624               	.L50:
 305:main.c        ****                 rx_tail = 0;
 625               		.stabn	68,0,305,.LM77-.LFBB6
 626               	.LM77:
 627 01ec 1092 0000 		sts rx_tail,__zero_reg__
 628 01f0 00C0      		rjmp .L49
 629               		.size	enqueue_rx_buffer, .-enqueue_rx_buffer
 630               		.stabs	"next:r(5,2)",64,0,294,25
 631               		.stabn	192,0,0,.LFBB6-.LFBB6
 632               		.stabn	224,0,0,.Lscope6-.LFBB6
 633               	.Lscope6:
 634               		.stabs	"",36,0,0,.Lscope6-.LFBB6
 635               		.stabd	78,0,0
 636               		.stabs	"__vector_18:F(0,50)",36,0,45,__vector_18
 637               	.global	__vector_18
 638               		.type	__vector_18, @function
 639               	__vector_18:
 640               		.stabd	46,0,0
  45:main.c        ****     uint8_t received_data = UDR0;
 641               		.stabn	68,0,45,.LM78-.LFBB7
 642               	.LM78:
 643               	.LFBB7:
 644 01f2 1F92      		push r1
 645 01f4 0F92      		push r0
 646 01f6 0FB6      		in r0,__SREG__
 647 01f8 0F92      		push r0
 648 01fa 1124      		clr __zero_reg__
 649 01fc 2F93      		push r18
 650 01fe 3F93      		push r19
 651 0200 4F93      		push r20
 652 0202 5F93      		push r21
 653 0204 6F93      		push r22
 654 0206 7F93      		push r23
 655 0208 8F93      		push r24
 656 020a 9F93      		push r25
 657 020c AF93      		push r26
 658 020e BF93      		push r27
 659 0210 EF93      		push r30
 660 0212 FF93      		push r31
 661               	/* prologue: Signal */
 662               	/* frame size = 0 */
 663               	/* stack size = 15 */
 664               	.L__stack_usage = 15
  46:main.c        ****     
 665               		.stabn	68,0,46,.LM79-.LFBB7
 666               	.LM79:
 667 0214 8091 C600 		lds r24,198
  48:main.c        ****         if (received_data == ESC) {
 668               		.stabn	68,0,48,.LM80-.LFBB7
 669               	.LM80:
GAS LISTING /tmp/ccfeYjiW.s 			page 19


 670 0218 9091 0000 		lds r25,rx_esc
 671 021c 9111      		cpse r25,__zero_reg__
 672 021e 00C0      		rjmp .L53
  49:main.c        ****             rx_esc = 1;
 673               		.stabn	68,0,49,.LM81-.LFBB7
 674               	.LM81:
 675 0220 8D37      		cpi r24,lo8(125)
 676 0222 01F4      		brne .L54
  50:main.c        ****         } else if (received_data == XOFF) {
 677               		.stabn	68,0,50,.LM82-.LFBB7
 678               	.LM82:
 679 0224 81E0      		ldi r24,lo8(1)
 680 0226 8093 0000 		sts rx_esc,r24
 681               	.L52:
 682               	/* epilogue start */
  65:main.c        **** 
 683               		.stabn	68,0,65,.LM83-.LFBB7
 684               	.LM83:
 685 022a FF91      		pop r31
 686 022c EF91      		pop r30
 687 022e BF91      		pop r27
 688 0230 AF91      		pop r26
 689 0232 9F91      		pop r25
 690 0234 8F91      		pop r24
 691 0236 7F91      		pop r23
 692 0238 6F91      		pop r22
 693 023a 5F91      		pop r21
 694 023c 4F91      		pop r20
 695 023e 3F91      		pop r19
 696 0240 2F91      		pop r18
 697 0242 0F90      		pop r0
 698 0244 0FBE      		out __SREG__,r0
 699 0246 0F90      		pop r0
 700 0248 1F90      		pop r1
 701 024a 1895      		reti
 702               	.L54:
  51:main.c        ****             tx_state = 0;
 703               		.stabn	68,0,51,.LM84-.LFBB7
 704               	.LM84:
 705 024c 8331      		cpi r24,lo8(19)
 706 024e 01F4      		brne .L56
  52:main.c        ****         } else if (received_data == XON) {
 707               		.stabn	68,0,52,.LM85-.LFBB7
 708               	.LM85:
 709 0250 1092 0000 		sts tx_state,__zero_reg__
 710 0254 00C0      		rjmp .L52
 711               	.L56:
  53:main.c        ****             tx_state = 1;
 712               		.stabn	68,0,53,.LM86-.LFBB7
 713               	.LM86:
 714 0256 8131      		cpi r24,lo8(17)
 715 0258 01F4      		brne .L57
  54:main.c        ****         } else if (received_data == SINC){
 716               		.stabn	68,0,54,.LM87-.LFBB7
 717               	.LM87:
 718 025a 81E0      		ldi r24,lo8(1)
 719 025c 8093 0000 		sts tx_state,r24
GAS LISTING /tmp/ccfeYjiW.s 			page 20


 720 0260 00C0      		rjmp .L52
 721               	.L57:
  55:main.c        ****             rx_sinc = 1;
 722               		.stabn	68,0,55,.LM88-.LFBB7
 723               	.LM88:
 724 0262 8E37      		cpi r24,lo8(126)
 725 0264 01F4      		brne .L58
  56:main.c        ****             rcvd_byte = 1;
 726               		.stabn	68,0,56,.LM89-.LFBB7
 727               	.LM89:
 728 0266 81E0      		ldi r24,lo8(1)
 729 0268 8093 0000 		sts rx_sinc,r24
  57:main.c        ****         } else {
 730               		.stabn	68,0,57,.LM90-.LFBB7
 731               	.LM90:
 732 026c 8093 0000 		sts rcvd_byte,r24
 733 0270 00C0      		rjmp .L52
 734               	.L58:
  59:main.c        ****         }
 735               		.stabn	68,0,59,.LM91-.LFBB7
 736               	.LM91:
 737 0272 0E94 0000 		call enqueue_rx_buffer
 738 0276 00C0      		rjmp .L52
 739               	.L53:
  62:main.c        ****         rx_esc = 0;
 740               		.stabn	68,0,62,.LM92-.LFBB7
 741               	.LM92:
 742 0278 0E94 0000 		call enqueue_rx_buffer
  63:main.c        ****     }
 743               		.stabn	68,0,63,.LM93-.LFBB7
 744               	.LM93:
 745 027c 1092 0000 		sts rx_esc,__zero_reg__
  65:main.c        **** 
 746               		.stabn	68,0,65,.LM94-.LFBB7
 747               	.LM94:
 748 0280 00C0      		rjmp .L52
 749               		.size	__vector_18, .-__vector_18
 750               		.stabs	"received_data:r(5,2)",64,0,46,24
 751               		.stabn	192,0,0,.LFBB7-.LFBB7
 752               		.stabn	224,0,0,.Lscope7-.LFBB7
 753               	.Lscope7:
 754               		.stabs	"",36,0,0,.Lscope7-.LFBB7
 755               		.stabd	78,0,0
 756               		.stabs	"flow_off:F(0,50)",36,0,310,flow_off
 757               	.global	flow_off
 758               		.type	flow_off, @function
 759               	flow_off:
 760               		.stabd	46,0,0
 309:main.c        **** 
 310:main.c        **** void flow_off(void) {
 761               		.stabn	68,0,310,.LM95-.LFBB8
 762               	.LM95:
 763               	.LFBB8:
 764               	/* prologue: function */
 765               	/* frame size = 0 */
 766               	/* stack size = 0 */
 767               	.L__stack_usage = 0
GAS LISTING /tmp/ccfeYjiW.s 			page 21


 311:main.c        ****     write_tx_buffer(XOFF);
 768               		.stabn	68,0,311,.LM96-.LFBB8
 769               	.LM96:
 770 0282 83E1      		ldi r24,lo8(19)
 771 0284 0E94 0000 		call write_tx_buffer
 312:main.c        ****     rx_state = 0;
 772               		.stabn	68,0,312,.LM97-.LFBB8
 773               	.LM97:
 774 0288 1092 0000 		sts rx_state,__zero_reg__
 775               	/* epilogue start */
 313:main.c        **** }
 776               		.stabn	68,0,313,.LM98-.LFBB8
 777               	.LM98:
 778 028c 0895      		ret
 779               		.size	flow_off, .-flow_off
 780               	.Lscope8:
 781               		.stabs	"",36,0,0,.Lscope8-.LFBB8
 782               		.stabd	78,0,0
 783               		.stabs	"flow_on:F(0,50)",36,0,315,flow_on
 784               	.global	flow_on
 785               		.type	flow_on, @function
 786               	flow_on:
 787               		.stabd	46,0,0
 314:main.c        **** 
 315:main.c        **** void flow_on(void) {
 788               		.stabn	68,0,315,.LM99-.LFBB9
 789               	.LM99:
 790               	.LFBB9:
 791               	/* prologue: function */
 792               	/* frame size = 0 */
 793               	/* stack size = 0 */
 794               	.L__stack_usage = 0
 316:main.c        ****     write_tx_buffer(XON);
 795               		.stabn	68,0,316,.LM100-.LFBB9
 796               	.LM100:
 797 028e 81E1      		ldi r24,lo8(17)
 798 0290 0E94 0000 		call write_tx_buffer
 317:main.c        ****     rx_state = 1;
 799               		.stabn	68,0,317,.LM101-.LFBB9
 800               	.LM101:
 801 0294 81E0      		ldi r24,lo8(1)
 802 0296 8093 0000 		sts rx_state,r24
 803               	/* epilogue start */
 318:main.c        **** }
 804               		.stabn	68,0,318,.LM102-.LFBB9
 805               	.LM102:
 806 029a 0895      		ret
 807               		.size	flow_on, .-flow_on
 808               	.Lscope9:
 809               		.stabs	"",36,0,0,.Lscope9-.LFBB9
 810               		.stabd	78,0,0
 811               		.stabs	"is_flow_on:F(5,2)",36,0,320,is_flow_on
 812               	.global	is_flow_on
 813               		.type	is_flow_on, @function
 814               	is_flow_on:
 815               		.stabd	46,0,0
 319:main.c        **** 
GAS LISTING /tmp/ccfeYjiW.s 			page 22


 320:main.c        **** uint8_t is_flow_on(void) {
 816               		.stabn	68,0,320,.LM103-.LFBB10
 817               	.LM103:
 818               	.LFBB10:
 819               	/* prologue: function */
 820               	/* frame size = 0 */
 821               	/* stack size = 0 */
 822               	.L__stack_usage = 0
 321:main.c        ****     return tx_state;
 322:main.c        **** }
 823               		.stabn	68,0,322,.LM104-.LFBB10
 824               	.LM104:
 825 029c 8091 0000 		lds r24,tx_state
 826               	/* epilogue start */
 827 02a0 0895      		ret
 828               		.size	is_flow_on, .-is_flow_on
 829               	.Lscope10:
 830               		.stabs	"",36,0,0,.Lscope10-.LFBB10
 831               		.stabd	78,0,0
 832               		.stabs	"delay_ms:F(0,50)",36,0,324,delay_ms
 833               		.stabs	"ms:P(5,4)",64,0,324,24
 834               	.global	delay_ms
 835               		.type	delay_ms, @function
 836               	delay_ms:
 837               		.stabd	46,0,0
 323:main.c        **** 
 324:main.c        **** void delay_ms(uint16_t ms)
 325:main.c        **** {
 838               		.stabn	68,0,325,.LM105-.LFBB11
 839               	.LM105:
 840               	.LFBB11:
 841               	/* prologue: function */
 842               	/* frame size = 0 */
 843               	/* stack size = 0 */
 844               	.L__stack_usage = 0
 326:main.c        ****     uint16_t i, j;
 327:main.c        ****     for(i=0; i<ms; i++)
 845               		.stabn	68,0,327,.LM106-.LFBB11
 846               	.LM106:
 847 02a2 30E0      		ldi r19,0
 848 02a4 20E0      		ldi r18,0
 849               	.L63:
 850               		.stabn	68,0,327,.LM107-.LFBB11
 851               	.LM107:
 852 02a6 2817      		cp r18,r24
 853 02a8 3907      		cpc r19,r25
 854 02aa 01F4      		brne .L65
 855               	/* epilogue start */
 328:main.c        ****         for(j=0; j<4000; j++)
 329:main.c        ****             _NOP();
 330:main.c        **** }
 856               		.stabn	68,0,330,.LM108-.LFBB11
 857               	.LM108:
 858 02ac 0895      		ret
 859               	.L65:
 860 02ae 40EA      		ldi r20,lo8(-96)
 861 02b0 5FE0      		ldi r21,lo8(15)
GAS LISTING /tmp/ccfeYjiW.s 			page 23


 862               	.L64:
 329:main.c        **** }
 863               		.stabn	68,0,329,.LM109-.LFBB11
 864               	.LM109:
 865               	/* #APP */
 866               	 ;  329 "main.c" 1
 867 02b2 0000      		nop
 868               	 ;  0 "" 2
 869               	/* #NOAPP */
 870 02b4 4150      		subi r20,1
 871 02b6 5109      		sbc r21,__zero_reg__
 328:main.c        ****         for(j=0; j<4000; j++)
 872               		.stabn	68,0,328,.LM110-.LFBB11
 873               	.LM110:
 874 02b8 01F4      		brne .L64
 327:main.c        ****         for(j=0; j<4000; j++)
 875               		.stabn	68,0,327,.LM111-.LFBB11
 876               	.LM111:
 877 02ba 2F5F      		subi r18,-1
 878 02bc 3F4F      		sbci r19,-1
 879 02be 00C0      		rjmp .L63
 880               		.size	delay_ms, .-delay_ms
 881               		.stabs	"i:r(5,4)",64,0,326,18
 882               		.stabn	192,0,0,.LFBB11-.LFBB11
 883               		.stabn	224,0,0,.Lscope11-.LFBB11
 884               	.Lscope11:
 885               		.stabs	"",36,0,0,.Lscope11-.LFBB11
 886               		.stabd	78,0,0
 887               		.stabs	"blink_led:F(0,50)",36,0,332,blink_led
 888               	.global	blink_led
 889               		.type	blink_led, @function
 890               	blink_led:
 891               		.stabd	46,0,0
 331:main.c        **** 
 332:main.c        **** void blink_led(void) {
 892               		.stabn	68,0,332,.LM112-.LFBB12
 893               	.LM112:
 894               	.LFBB12:
 895 02c0 CF93      		push r28
 896 02c2 DF93      		push r29
 897               	/* prologue: function */
 898               	/* frame size = 0 */
 899               	/* stack size = 2 */
 900               	.L__stack_usage = 2
 333:main.c        ****     uint8_t k = 5;
 334:main.c        ****     while (k--) {
 901               		.stabn	68,0,334,.LM113-.LFBB12
 902               	.LM113:
 903 02c4 C6E0      		ldi r28,lo8(6)
 335:main.c        ****         PINB = (1 << PB5);
 904               		.stabn	68,0,335,.LM114-.LFBB12
 905               	.LM114:
 906 02c6 D0E2      		ldi r29,lo8(32)
 907               	.L68:
 908 02c8 C150      		subi r28,lo8(-(-1))
 334:main.c        ****         PINB = (1 << PB5);
 909               		.stabn	68,0,334,.LM115-.LFBB12
GAS LISTING /tmp/ccfeYjiW.s 			page 24


 910               	.LM115:
 911 02ca 01F4      		brne .L69
 912               	/* epilogue start */
 336:main.c        ****         delay_ms(1000);
 337:main.c        ****     }
 338:main.c        **** }
 913               		.stabn	68,0,338,.LM116-.LFBB12
 914               	.LM116:
 915 02cc DF91      		pop r29
 916 02ce CF91      		pop r28
 917 02d0 0895      		ret
 918               	.L69:
 335:main.c        ****         delay_ms(1000);
 919               		.stabn	68,0,335,.LM117-.LFBB12
 920               	.LM117:
 921 02d2 D3B9      		out 0x3,r29
 336:main.c        ****         delay_ms(1000);
 922               		.stabn	68,0,336,.LM118-.LFBB12
 923               	.LM118:
 924 02d4 88EE      		ldi r24,lo8(-24)
 925 02d6 93E0      		ldi r25,lo8(3)
 926 02d8 0E94 0000 		call delay_ms
 927 02dc 00C0      		rjmp .L68
 928               		.size	blink_led, .-blink_led
 929               	.Lscope12:
 930               		.stabs	"",36,0,0,.Lscope12-.LFBB12
 931               		.stabd	78,0,0
 932               		.stabs	"turn_led_on:F(0,50)",36,0,340,turn_led_on
 933               	.global	turn_led_on
 934               		.type	turn_led_on, @function
 935               	turn_led_on:
 936               		.stabd	46,0,0
 339:main.c        **** 
 340:main.c        **** void turn_led_on(void) {
 937               		.stabn	68,0,340,.LM119-.LFBB13
 938               	.LM119:
 939               	.LFBB13:
 940               	/* prologue: function */
 941               	/* frame size = 0 */
 942               	/* stack size = 0 */
 943               	.L__stack_usage = 0
 341:main.c        ****     PORTB |= (1 << PB5);
 944               		.stabn	68,0,341,.LM120-.LFBB13
 945               	.LM120:
 946 02de 2D9A      		sbi 0x5,5
 342:main.c        ****     delay_ms(5000);
 947               		.stabn	68,0,342,.LM121-.LFBB13
 948               	.LM121:
 949 02e0 88E8      		ldi r24,lo8(-120)
 950 02e2 93E1      		ldi r25,lo8(19)
 951 02e4 0E94 0000 		call delay_ms
 343:main.c        ****     PORTB &= ~(1 << PB5);
 952               		.stabn	68,0,343,.LM122-.LFBB13
 953               	.LM122:
 954 02e8 2D98      		cbi 0x5,5
 955               	/* epilogue start */
 344:main.c        **** }
GAS LISTING /tmp/ccfeYjiW.s 			page 25


 956               		.stabn	68,0,344,.LM123-.LFBB13
 957               	.LM123:
 958 02ea 0895      		ret
 959               		.size	turn_led_on, .-turn_led_on
 960               	.Lscope13:
 961               		.stabs	"",36,0,0,.Lscope13-.LFBB13
 962               		.stabd	78,0,0
 963               		.section	.rodata.str1.1,"aMS",@progbits,1
 964               	.LC1:
 965 0000 556E 6976 		.string	"Universidade Federal de Pernambuco\nDepartamento de Eletr\303\264nica e Sistemas"
 965      6572 7369 
 965      6461 6465 
 965      2046 6564 
 965      6572 616C 
 966               		.section	.rodata
 967               	.LC0:
 968 0000 00        		.byte	0
 969 0001 01        		.byte	1
 970 0002 11        		.byte	17
 971 0003 02        		.byte	2
 972 0004 13        		.byte	19
 973 0005 04        		.byte	4
 974 0006 7E        		.byte	126
 975 0007 05        		.byte	5
 976 0008 7D        		.byte	125
 977 0009 06        		.byte	6
 978               		.section	.rodata.str1.1
 979               	.LC2:
 980 004a 4465 7365 		.string	"Desenvolvimento de sistemas embarcados"
 980      6E76 6F6C 
 980      7669 6D65 
 980      6E74 6F20 
 980      6465 2073 
 981               		.section	.text.startup,"ax",@progbits
 982               		.stabs	"main:F(0,1)",36,0,84,main
 983               	.global	main
 984               		.type	main, @function
 985               	main:
 986               		.stabd	46,0,0
  84:main.c        ****     /* Fa√ßa a configura√ß√£o do que for necess√°rio aqui */
 987               		.stabn	68,0,84,.LM124-.LFBB14
 988               	.LM124:
 989               	.LFBB14:
 990 0000 CF93      		push r28
 991 0002 DF93      		push r29
 992 0004 CDB7      		in r28,__SP_L__
 993 0006 DEB7      		in r29,__SP_H__
 994 0008 C15A      		subi r28,-95
 995 000a D140      		sbci r29,1
 996 000c 0FB6      		in __tmp_reg__,__SREG__
 997 000e F894      		cli
 998 0010 DEBF      		out __SP_H__,r29
 999 0012 0FBE      		out __SREG__,__tmp_reg__
 1000 0014 CDBF      		out __SP_L__,r28
 1001               	/* prologue: function */
 1002               	/* frame size = 417 */
 1003               	/* stack size = 419 */
GAS LISTING /tmp/ccfeYjiW.s 			page 26


 1004               	.L__stack_usage = 419
  87:main.c        ****     UCSR0B = (1<<RXEN0) | (1 << TXEN0) | (1 << RXCIE0); /* Enable rx and tx, rx complete interrupt,
 1005               		.stabn	68,0,87,.LM125-.LFBB14
 1006               	.LM125:
 1007 0016 82E0      		ldi r24,lo8(2)
 1008 0018 8093 C000 		sts 192,r24
  88:main.c        ****     UCSR0C = (1<<UCSZ01) | (1<<UCSZ00); /* Set frame format: 8N1 */
 1009               		.stabn	68,0,88,.LM126-.LFBB14
 1010               	.LM126:
 1011 001c 88E9      		ldi r24,lo8(-104)
 1012 001e 8093 C100 		sts 193,r24
  89:main.c        ****     UBRR0H = (MYUBRR>>8); /* Set baud rate */
 1013               		.stabn	68,0,89,.LM127-.LFBB14
 1014               	.LM127:
 1015 0022 86E0      		ldi r24,lo8(6)
 1016 0024 8093 C200 		sts 194,r24
  90:main.c        ****     UBRR0L = MYUBRR; /* Set baud rate */
 1017               		.stabn	68,0,90,.LM128-.LFBB14
 1018               	.LM128:
 1019 0028 1092 C500 		sts 197,__zero_reg__
  91:main.c        **** 
 1020               		.stabn	68,0,91,.LM129-.LFBB14
 1021               	.LM129:
 1022 002c 81E2      		ldi r24,lo8(33)
 1023 002e 8093 C400 		sts 196,r24
  93:main.c        ****     PORTB &= ~(1 << PB5); // Garante que o LED est√° apagado no in√≠cio   
 1024               		.stabn	68,0,93,.LM130-.LFBB14
 1025               	.LM130:
 1026 0032 259A      		sbi 0x4,5
  94:main.c        **** 
 1027               		.stabn	68,0,94,.LM131-.LFBB14
 1028               	.LM131:
 1029 0034 2D98      		cbi 0x5,5
  96:main.c        **** 
 1030               		.stabn	68,0,96,.LM132-.LFBB14
 1031               	.LM132:
 1032               	/* #APP */
 1033               	 ;  96 "main.c" 1
 1034 0036 7894      		sei
 1035               	 ;  0 "" 2
 101:main.c        ****     write(str_test, sizeof(str_test)-1, 1);
 1036               		.stabn	68,0,101,.LM133-.LFBB14
 1037               	.LM133:
 1038               	/* #NOAPP */
 1039 0038 8AE4      		ldi r24,lo8(74)
 1040 003a E0E0      		ldi r30,lo8(.LC1)
 1041 003c F0E0      		ldi r31,hi8(.LC1)
 1042 003e DE01      		movw r26,r28
 1043 0040 B395      		inc r27
 1044               		0:
 1045 0042 0190      		ld r0,Z+
 1046 0044 0D92      		st X+,r0
 1047 0046 8A95      		dec r24
 1048 0048 01F4      		brne 0b
 102:main.c        **** 
 1049               		.stabn	68,0,102,.LM134-.LFBB14
 1050               	.LM134:
GAS LISTING /tmp/ccfeYjiW.s 			page 27


 1051 004a 41E0      		ldi r20,lo8(1)
 1052 004c 69E4      		ldi r22,lo8(73)
 1053 004e CE01      		movw r24,r28
 1054 0050 9395      		inc r25
 1055 0052 0E94 0000 		call write
 106:main.c        ****     while (i) {
 1056               		.stabn	68,0,106,.LM135-.LFBB14
 1057               	.LM135:
 1058 0056 00E0      		ldi r16,0
 105:main.c        ****     uint8_t j = 0;
 1059               		.stabn	68,0,105,.LM136-.LFBB14
 1060               	.LM136:
 1061 0058 1AE4      		ldi r17,lo8(74)
 1062               	.L72:
 109:main.c        ****             j += 10;
 1063               		.stabn	68,0,109,.LM137-.LFBB14
 1064               	.LM137:
 1065 005a 40E0      		ldi r20,0
 1066 005c 6AE0      		ldi r22,lo8(10)
 1067 005e 80E0      		ldi r24,0
 1068 0060 91E0      		ldi r25,lo8(1)
 1069 0062 8C0F      		add r24,r28
 1070 0064 9D1F      		adc r25,r29
 1071 0066 800F      		add r24,r16
 1072 0068 911D      		adc r25,__zero_reg__
 1073 006a 0E94 0000 		call write
 1074 006e 181B      		sub r17,r24
 110:main.c        ****         } else {
 1075               		.stabn	68,0,110,.LM138-.LFBB14
 1076               	.LM138:
 1077 0070 065F      		subi r16,lo8(-(10))
 107:main.c        ****         if (i >= 10) {
 1078               		.stabn	68,0,107,.LM139-.LFBB14
 1079               	.LM139:
 1080 0072 1111      		cpse r17,__zero_reg__
 1081 0074 00C0      		rjmp .L74
 1082               	.L75:
 105:main.c        ****     uint8_t j = 0;
 1083               		.stabn	68,0,105,.LM140-.LFBB14
 1084               	.LM140:
 1085 0076 10E0      		ldi r17,0
 1086 0078 00E0      		ldi r16,0
 121:main.c        ****     }
 1087               		.stabn	68,0,121,.LM141-.LFBB14
 1088               	.LM141:
 1089 007a 2CE2      		ldi r18,lo8(44)
 1090 007c E22E      		mov r14,r18
 1091 007e FF24      		clr r15
 1092 0080 F394      		inc r15
 1093               	.L77:
 1094 0082 B701      		movw r22,r14
 1095 0084 601B      		sub r22,r16
 1096 0086 710B      		sbc r23,r17
 1097 0088 6F3F      		cpi r22,-1
 1098 008a 7105      		cpc r23,__zero_reg__
 1099 008c 00F0      		brlo .L76
 1100 008e 6EEF      		ldi r22,lo8(-2)
GAS LISTING /tmp/ccfeYjiW.s 			page 28


 1101 0090 70E0      		ldi r23,0
 1102               	.L76:
 1103 0092 CE01      		movw r24,r28
 1104 0094 0196      		adiw r24,1
 1105 0096 0E94 0000 		call read
 1106 009a 8150      		subi r24,1
 1107 009c 990B      		sbc r25,r25
 1108 009e 080F      		add r16,r24
 1109 00a0 191F      		adc r17,r25
 120:main.c        ****         nbytes += read(buffer, 300-nbytes > 254 ? 254 : 300-nbytes) - 1; /* Conferir se precisa des
 1110               		.stabn	68,0,120,.LM142-.LFBB14
 1111               	.LM142:
 1112 00a2 0C32      		cpi r16,44
 1113 00a4 81E0      		ldi r24,1
 1114 00a6 1807      		cpc r17,r24
 1115 00a8 00F0      		brlo .L77
 123:main.c        ****     if (is_flow_on()) {
 1116               		.stabn	68,0,123,.LM143-.LFBB14
 1117               	.LM143:
 1118 00aa 0E94 0000 		call flow_off
 124:main.c        ****         turn_led_on();
 1119               		.stabn	68,0,124,.LM144-.LFBB14
 1120               	.LM144:
 1121 00ae 8091 0000 		lds r24,tx_state
 1122 00b2 8823      		tst r24
 1123 00b4 01F4      		brne .+2
 1124 00b6 00C0      		rjmp .L78
 125:main.c        ****     } else {
 1125               		.stabn	68,0,125,.LM145-.LFBB14
 1126               	.LM145:
 1127 00b8 0E94 0000 		call turn_led_on
 1128               	.L79:
 131:main.c        ****     PORTB &= ~(1 << PB5); /* Apaga o LED */
 1129               		.stabn	68,0,131,.LM146-.LFBB14
 1130               	.LM146:
 1131 00bc 0E94 0000 		call flow_on
 132:main.c        ****     nbytes = 0;
 1132               		.stabn	68,0,132,.LM147-.LFBB14
 1133               	.LM147:
 1134 00c0 2D98      		cbi 0x5,5
 133:main.c        ****     while (nbytes < 300) {
 1135               		.stabn	68,0,133,.LM148-.LFBB14
 1136               	.LM148:
 1137 00c2 10E0      		ldi r17,0
 1138 00c4 00E0      		ldi r16,0
 135:main.c        ****     }
 1139               		.stabn	68,0,135,.LM149-.LFBB14
 1140               	.LM149:
 1141 00c6 9CE2      		ldi r25,lo8(44)
 1142 00c8 E92E      		mov r14,r25
 1143 00ca FF24      		clr r15
 1144 00cc F394      		inc r15
 1145               	.L81:
 1146 00ce B701      		movw r22,r14
 1147 00d0 601B      		sub r22,r16
 1148 00d2 710B      		sbc r23,r17
 1149 00d4 6F3F      		cpi r22,-1
GAS LISTING /tmp/ccfeYjiW.s 			page 29


 1150 00d6 7105      		cpc r23,__zero_reg__
 1151 00d8 00F0      		brlo .L80
 1152 00da 6EEF      		ldi r22,lo8(-2)
 1153 00dc 70E0      		ldi r23,0
 1154               	.L80:
 1155 00de CE01      		movw r24,r28
 1156 00e0 0196      		adiw r24,1
 1157 00e2 0E94 0000 		call read
 1158 00e6 8150      		subi r24,1
 1159 00e8 990B      		sbc r25,r25
 1160 00ea 080F      		add r16,r24
 1161 00ec 191F      		adc r17,r25
 134:main.c        ****         nbytes += read(buffer, 300-nbytes > 254 ? 254 : 300-nbytes) - 1; /* Conferir se precisa des
 1162               		.stabn	68,0,134,.LM150-.LFBB14
 1163               	.LM150:
 1164 00ee 0C32      		cpi r16,44
 1165 00f0 E1E0      		ldi r30,1
 1166 00f2 1E07      		cpc r17,r30
 1167 00f4 00F0      		brlo .L81
 138:main.c        ****     if (is_flow_on()) {
 1168               		.stabn	68,0,138,.LM151-.LFBB14
 1169               	.LM151:
 1170 00f6 0E94 0000 		call flow_off
 139:main.c        ****         turn_led_on();
 1171               		.stabn	68,0,139,.LM152-.LFBB14
 1172               	.LM152:
 1173 00fa 8091 0000 		lds r24,tx_state
 1174 00fe 8823      		tst r24
 1175 0100 01F4      		brne .+2
 1176 0102 00C0      		rjmp .L82
 140:main.c        ****     } else {
 1177               		.stabn	68,0,140,.LM153-.LFBB14
 1178               	.LM153:
 1179 0104 0E94 0000 		call turn_led_on
 1180               	.L83:
 146:main.c        ****     PORTB &= ~(1 << PB5); /* Apaga o LED */
 1181               		.stabn	68,0,146,.LM154-.LFBB14
 1182               	.LM154:
 1183 0108 0E94 0000 		call flow_on
 147:main.c        ****     
 1184               		.stabn	68,0,147,.LM155-.LFBB14
 1185               	.LM155:
 1186 010c 2D98      		cbi 0x5,5
 149:main.c        ****     i = 0;
 1187               		.stabn	68,0,149,.LM156-.LFBB14
 1188               	.LM156:
 1189 010e 8AE0      		ldi r24,lo8(10)
 1190 0110 E0E0      		ldi r30,lo8(.LC0)
 1191 0112 F0E0      		ldi r31,hi8(.LC0)
 1192 0114 DE01      		movw r26,r28
 1193 0116 A856      		subi r26,104
 1194 0118 BE4F      		sbci r27,-2
 1195               		0:
 1196 011a 0190      		ld r0,Z+
 1197 011c 0D92      		st X+,r0
 1198 011e 8A95      		dec r24
 1199 0120 01F4      		brne 0b
GAS LISTING /tmp/ccfeYjiW.s 			page 30


 150:main.c        ****     
 1200               		.stabn	68,0,150,.LM157-.LFBB14
 1201               	.LM157:
 1202 0122 10E0      		ldi r17,0
 1203               	.L86:
 154:main.c        ****             PORTB |= (1 << PB5); /* Acende o LED */
 1204               		.stabn	68,0,154,.LM158-.LFBB14
 1205               	.LM158:
 1206 0124 40E0      		ldi r20,0
 1207 0126 61E0      		ldi r22,lo8(1)
 1208 0128 88E9      		ldi r24,lo8(-104)
 1209 012a 91E0      		ldi r25,lo8(1)
 1210 012c 8C0F      		add r24,r28
 1211 012e 9D1F      		adc r25,r29
 1212 0130 810F      		add r24,r17
 1213 0132 911D      		adc r25,__zero_reg__
 1214 0134 0E94 0000 		call write
 1215 0138 8111      		cpse r24,__zero_reg__
 1216 013a 00C0      		rjmp .L84
 155:main.c        ****         } else {
 1217               		.stabn	68,0,155,.LM159-.LFBB14
 1218               	.LM159:
 1219 013c 2D9A      		sbi 0x5,5
 1220               	.L85:
 153:main.c        ****         if (!write(binary_string+i, 1, 0)) {
 1221               		.stabn	68,0,153,.LM160-.LFBB14
 1222               	.LM160:
 1223 013e 1A30      		cpi r17,lo8(10)
 1224 0140 01F4      		brne .L86
 163:main.c        ****     uint8_t comp_buffer[sizeof(comp_str)];
 1225               		.stabn	68,0,163,.LM161-.LFBB14
 1226               	.LM161:
 1227 0142 7E01      		movw r14,r28
 1228 0144 FFE8      		ldi r31,-113
 1229 0146 EF1A      		sub r14,r31
 1230 0148 FEEF      		ldi r31,-2
 1231 014a FF0A      		sbc r15,r31
 1232 014c 87E2      		ldi r24,lo8(39)
 1233 014e E0E0      		ldi r30,lo8(.LC2)
 1234 0150 F0E0      		ldi r31,hi8(.LC2)
 1235 0152 D701      		movw r26,r14
 1236               		0:
 1237 0154 0190      		ld r0,Z+
 1238 0156 0D92      		st X+,r0
 1239 0158 8A95      		dec r24
 1240 015a 01F4      		brne 0b
 170:main.c        ****         read(comp_buffer, 254);
 1241               		.stabn	68,0,170,.LM162-.LFBB14
 1242               	.LM162:
 1243 015c 8E01      		movw r16,r28
 1244 015e 065B      		subi r16,-74
 1245 0160 1E4F      		sbci r17,-2
 1246 0162 87E2      		ldi r24,lo8(39)
 1247 0164 782E      		mov r7,r24
 1248               	.L87:
 1249 0166 F801      		movw r30,r16
 1250 0168 872D      		mov r24,r7
GAS LISTING /tmp/ccfeYjiW.s 			page 31


 1251               		0:
 1252 016a 1192      		st Z+,__zero_reg__
 1253 016c 8A95      		dec r24
 1254 016e 01F4      		brne 0b
 171:main.c        **** 
 1255               		.stabn	68,0,171,.LM163-.LFBB14
 1256               	.LM163:
 1257 0170 6EEF      		ldi r22,lo8(-2)
 1258 0172 C801      		movw r24,r16
 1259 0174 0E94 0000 		call read
 1260 0178 5801      		movw r10,r16
 1261 017a 4801      		movw r8,r16
 1262 017c E7E2      		ldi r30,39
 1263 017e 8E0E      		add r8,r30
 1264 0180 911C      		adc r9,__zero_reg__
 1265               	.LBB14:
 173:main.c        ****             write_tx_buffer(comp_buffer[z]);
 1266               		.stabn	68,0,173,.LM164-.LFBB14
 1267               	.LM164:
 1268 0182 6801      		movw r12,r16
 1269               	.L88:
 173:main.c        ****             write_tx_buffer(comp_buffer[z]);
 1270               		.stabn	68,0,173,.LM165-.LFBB14
 1271               	.LM165:
 1272 0184 8C14      		cp r8,r12
 1273 0186 9D04      		cpc r9,r13
 1274 0188 01F0      		breq .+2
 1275 018a 00C0      		rjmp .L89
 1276               	.LBE14:
 176:main.c        ****         
 1277               		.stabn	68,0,176,.LM166-.LFBB14
 1278               	.LM166:
 1279 018c 8AE0      		ldi r24,lo8(10)
 1280 018e 0E94 0000 		call write_tx_buffer
 178:main.c        ****             PORTB |= (1 << PB5);
 1281               		.stabn	68,0,178,.LM167-.LFBB14
 1282               	.LM167:
 1283 0192 F701      		movw r30,r14
 1284               		0:
 1285 0194 0190      		ld __tmp_reg__,Z+
 1286 0196 0020      		tst __tmp_reg__
 1287 0198 01F4      		brne 0b
 1288 019a AF01      		movw r20,r30
 1289 019c 4E19      		sub r20,r14
 1290 019e 5F09      		sbc r21,r15
 1291 01a0 B701      		movw r22,r14
 1292 01a2 C801      		movw r24,r16
 1293 01a4 0E94 0000 		call memcmp
 1294 01a8 892B      		or r24,r25
 1295 01aa 01F0      		breq .+2
 1296 01ac 00C0      		rjmp .L90
 179:main.c        ****         } else {
 1297               		.stabn	68,0,179,.LM168-.LFBB14
 1298               	.LM168:
 1299 01ae 2D9A      		sbi 0x5,5
 1300               	.L91:
 184:main.c        ****         while (read(comp_buffer+k, 10) == 11) {
GAS LISTING /tmp/ccfeYjiW.s 			page 32


 1301               		.stabn	68,0,184,.LM169-.LFBB14
 1302               	.LM169:
 1303 01b0 F801      		movw r30,r16
 1304 01b2 872D      		mov r24,r7
 1305               		0:
 1306 01b4 1192      		st Z+,__zero_reg__
 1307 01b6 8A95      		dec r24
 1308 01b8 01F4      		brne 0b
 185:main.c        ****             k += 10;
 1309               		.stabn	68,0,185,.LM170-.LFBB14
 1310               	.LM170:
 1311 01ba 912C      		mov r9,__zero_reg__
 1312               	.L92:
 1313 01bc 6AE0      		ldi r22,lo8(10)
 1314 01be C801      		movw r24,r16
 1315 01c0 890D      		add r24,r9
 1316 01c2 911D      		adc r25,__zero_reg__
 1317 01c4 0E94 0000 		call read
 1318 01c8 8B30      		cpi r24,lo8(11)
 1319 01ca 01F0      		breq .L93
 1320               	.L94:
 1321               	.LBB15:
 190:main.c        ****             write_tx_buffer(comp_buffer[z]);
 1322               		.stabn	68,0,190,.LM171-.LFBB14
 1323               	.LM171:
 1324 01cc AC14      		cp r10,r12
 1325 01ce BD04      		cpc r11,r13
 1326 01d0 01F4      		brne .L95
 1327               	.LBE15:
 193:main.c        **** 
 1328               		.stabn	68,0,193,.LM172-.LFBB14
 1329               	.LM172:
 1330 01d2 8AE0      		ldi r24,lo8(10)
 1331 01d4 0E94 0000 		call write_tx_buffer
 195:main.c        ****             PORTB |= (1 << PB5);
 1332               		.stabn	68,0,195,.LM173-.LFBB14
 1333               	.LM173:
 1334 01d8 F701      		movw r30,r14
 1335               		0:
 1336 01da 0190      		ld __tmp_reg__,Z+
 1337 01dc 0020      		tst __tmp_reg__
 1338 01de 01F4      		brne 0b
 1339 01e0 AF01      		movw r20,r30
 1340 01e2 4E19      		sub r20,r14
 1341 01e4 5F09      		sbc r21,r15
 1342 01e6 B701      		movw r22,r14
 1343 01e8 C801      		movw r24,r16
 1344 01ea 0E94 0000 		call memcmp
 1345 01ee 892B      		or r24,r25
 1346 01f0 01F4      		brne .L96
 196:main.c        ****         } else {
 1347               		.stabn	68,0,196,.LM174-.LFBB14
 1348               	.LM174:
 1349 01f2 2D9A      		sbi 0x5,5
 1350 01f4 00C0      		rjmp .L87
 1351               	.L74:
 108:main.c        ****             i -= write(str_test+j, 10, 0);
GAS LISTING /tmp/ccfeYjiW.s 			page 33


 1352               		.stabn	68,0,108,.LM175-.LFBB14
 1353               	.LM175:
 1354 01f6 1A30      		cpi r17,lo8(10)
 1355 01f8 00F0      		brlo .+2
 1356 01fa 00C0      		rjmp .L72
 112:main.c        ****             i = 0;
 1357               		.stabn	68,0,112,.LM176-.LFBB14
 1358               	.LM176:
 1359 01fc 41E0      		ldi r20,lo8(1)
 1360 01fe 612F      		mov r22,r17
 1361 0200 80E0      		ldi r24,0
 1362 0202 91E0      		ldi r25,lo8(1)
 1363 0204 8C0F      		add r24,r28
 1364 0206 9D1F      		adc r25,r29
 1365 0208 800F      		add r24,r16
 1366 020a 911D      		adc r25,__zero_reg__
 1367 020c 0E94 0000 		call write
 1368 0210 00C0      		rjmp .L75
 1369               	.L78:
 127:main.c        ****     }
 1370               		.stabn	68,0,127,.LM177-.LFBB14
 1371               	.LM177:
 1372 0212 0E94 0000 		call blink_led
 1373 0216 00C0      		rjmp .L79
 1374               	.L82:
 142:main.c        ****     }
 1375               		.stabn	68,0,142,.LM178-.LFBB14
 1376               	.LM178:
 1377 0218 0E94 0000 		call blink_led
 1378 021c 00C0      		rjmp .L83
 1379               	.L84:
 157:main.c        ****             i++;
 1380               		.stabn	68,0,157,.LM179-.LFBB14
 1381               	.LM179:
 1382 021e 2D98      		cbi 0x5,5
 158:main.c        ****         }
 1383               		.stabn	68,0,158,.LM180-.LFBB14
 1384               	.LM180:
 1385 0220 1F5F      		subi r17,lo8(-(1))
 1386 0222 00C0      		rjmp .L85
 1387               	.L89:
 1388               	.LBB16:
 174:main.c        ****         }
 1389               		.stabn	68,0,174,.LM181-.LFBB14
 1390               	.LM181:
 1391 0224 F601      		movw r30,r12
 1392 0226 8191      		ld r24,Z+
 1393 0228 6F01      		movw r12,r30
 1394 022a 0E94 0000 		call write_tx_buffer
 1395 022e 00C0      		rjmp .L88
 1396               	.L90:
 1397               	.LBE16:
 181:main.c        ****         }
 1398               		.stabn	68,0,181,.LM182-.LFBB14
 1399               	.LM182:
 1400 0230 2D98      		cbi 0x5,5
 1401 0232 00C0      		rjmp .L91
GAS LISTING /tmp/ccfeYjiW.s 			page 34


 1402               	.L93:
 186:main.c        ****         };
 1403               		.stabn	68,0,186,.LM183-.LFBB14
 1404               	.LM183:
 1405 0234 EAE0      		ldi r30,lo8(10)
 1406 0236 9E0E      		add r9,r30
 1407 0238 00C0      		rjmp .L92
 1408               	.L95:
 1409               	.LBB17:
 191:main.c        ****         }
 1410               		.stabn	68,0,191,.LM184-.LFBB14
 1411               	.LM184:
 1412 023a F501      		movw r30,r10
 1413 023c 8191      		ld r24,Z+
 1414 023e 5F01      		movw r10,r30
 1415 0240 0E94 0000 		call write_tx_buffer
 1416 0244 00C0      		rjmp .L94
 1417               	.L96:
 1418               	.LBE17:
 198:main.c        ****         }
 1419               		.stabn	68,0,198,.LM185-.LFBB14
 1420               	.LM185:
 1421 0246 2D98      		cbi 0x5,5
 1422 0248 00C0      		rjmp .L87
 1423               		.size	main, .-main
 1424               		.stabs	"str_test:(0,52)=ar(0,53)=r(0,53);0;0177777;;0;73;(5,2)",128,0,101,256
 1425               		.stabs	"j:r(5,2)",64,0,106,16
 1426               		.stabs	"buffer:(0,54)=ar(0,53);0;254;(5,2)",128,0,119,1
 1427               		.stabs	"binary_string:(0,55)=ar(0,53);0;9;(5,2)",128,0,149,408
 1428               		.stabs	"comp_str:(0,56)=ar(0,53);0;38;(5,2)",128,0,163,369
 1429               		.stabs	"comp_buffer:(0,56)",128,0,164,330
 1430               		.stabs	"k:r(5,2)",64,0,165,9
 1431               		.stabn	192,0,0,.LFBB14-.LFBB14
 1432               		.stabn	224,0,0,.Lscope14-.LFBB14
 1433               	.Lscope14:
 1434               		.stabs	"",36,0,0,.Lscope14-.LFBB14
 1435               		.stabd	78,0,0
 1436               	.global	rcvd_byte
 1437               		.section .bss
 1438               		.type	rcvd_byte, @object
 1439               		.size	rcvd_byte, 1
 1440               	rcvd_byte:
 1441 0000 00        		.zero	1
 1442               		.stabs	"rcvd_byte:G(0,57)=B(5,2)",32,0,44,0
 1443               		.comm	usart_transmitting,1,1
 1444               		.stabs	"usart_transmitting:G(5,2)",32,0,42,0
 1445               		.comm	tx_tail,1,1
 1446               		.stabs	"tx_tail:G(5,2)",32,0,41,0
 1447               		.comm	tx_head,1,1
 1448               		.stabs	"tx_head:G(5,2)",32,0,41,0
 1449               		.comm	tx_buffer,255,1
 1450               		.stabs	"tx_buffer:G(0,54)",32,0,40,0
 1451               		.comm	rx_tail,1,1
 1452               		.stabs	"rx_tail:G(5,2)",32,0,39,0
 1453               		.comm	rx_head,1,1
 1454               		.stabs	"rx_head:G(5,2)",32,0,39,0
 1455               		.comm	rx_buffer,255,1
GAS LISTING /tmp/ccfeYjiW.s 			page 35


 1456               		.stabs	"rx_buffer:G(0,54)",32,0,38,0
 1457               	.global	tx_state
 1458               		.data
 1459               		.type	tx_state, @object
 1460               		.size	tx_state, 1
 1461               	tx_state:
 1462 0000 01        		.byte	1
 1463               		.stabs	"tx_state:G(5,2)",32,0,37,0
 1464               		.comm	rx_sinc,1,1
 1465               		.stabs	"rx_sinc:G(5,2)",32,0,37,0
 1466               	.global	rx_state
 1467               		.type	rx_state, @object
 1468               		.size	rx_state, 1
 1469               	rx_state:
 1470 0001 01        		.byte	1
 1471               		.stabs	"rx_state:G(5,2)",32,0,37,0
 1472               		.comm	rx_esc,1,1
 1473               		.stabs	"rx_esc:G(5,2)",32,0,37,0
 1474               		.comm	tx_byte_cnt,1,1
 1475               		.stabs	"tx_byte_cnt:G(5,2)",32,0,36,0
 1476               		.comm	rx_byte_cnt,1,1
 1477               		.stabs	"rx_byte_cnt:G(5,2)",32,0,36,0
 1478               		.text
 1479               		.stabs	"",100,0,0,.Letext0
 1480               	.Letext0:
 1481               		.ident	"GCC: (GNU) 7.3.0"
 1482               	.global __do_copy_data
 1483               	.global __do_clear_bss
GAS LISTING /tmp/ccfeYjiW.s 			page 36


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
     /tmp/ccfeYjiW.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccfeYjiW.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccfeYjiW.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccfeYjiW.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccfeYjiW.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccfeYjiW.s:113    .text:0000000000000000 __vector_19
                            *COM*:0000000000000001 tx_tail
                            *COM*:0000000000000001 tx_head
                            *COM*:0000000000000001 usart_transmitting
                            *COM*:00000000000000ff tx_buffer
     /tmp/ccfeYjiW.s:186    .text:000000000000005c read_rx_buffer
                            *COM*:0000000000000001 rx_tail
                            *COM*:0000000000000001 rx_head
                            *COM*:00000000000000ff rx_buffer
     /tmp/ccfeYjiW.s:264    .text:0000000000000092 read
     /tmp/ccfeYjiW.s:1469   .data:0000000000000001 rx_state
     /tmp/ccfeYjiW.s:1440   .bss:0000000000000000 rcvd_byte
                            *COM*:0000000000000001 rx_sinc
     /tmp/ccfeYjiW.s:358    .text:00000000000000e6 write_tx_buffer
     /tmp/ccfeYjiW.s:464    .text:0000000000000134 write
                            *COM*:0000000000000001 tx_byte_cnt
     /tmp/ccfeYjiW.s:1461   .data:0000000000000000 tx_state
     /tmp/ccfeYjiW.s:569    .text:00000000000001b8 enqueue_rx_buffer
     /tmp/ccfeYjiW.s:639    .text:00000000000001f2 __vector_18
                            *COM*:0000000000000001 rx_esc
     /tmp/ccfeYjiW.s:759    .text:0000000000000282 flow_off
     /tmp/ccfeYjiW.s:786    .text:000000000000028e flow_on
     /tmp/ccfeYjiW.s:814    .text:000000000000029c is_flow_on
     /tmp/ccfeYjiW.s:836    .text:00000000000002a2 delay_ms
     /tmp/ccfeYjiW.s:890    .text:00000000000002c0 blink_led
     /tmp/ccfeYjiW.s:935    .text:00000000000002de turn_led_on
     /tmp/ccfeYjiW.s:985    .text.startup:0000000000000000 main
                            *COM*:0000000000000001 rx_byte_cnt

UNDEFINED SYMBOLS
memcmp
__do_copy_data
__do_clear_bss
