   1               		.file	"hal_gpt_lld.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.__vector_11,"ax",@progbits
  11               	.global	__vector_11
  13               	__vector_11:
  14               	.LFB242:
  15               		.file 1 "../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c"
   1:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*
   2:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     ChibiOS - Copyright (C) 2006..2018 Giovanni Di Sirio
   3:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
   4:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     Licensed under the Apache License, Version 2.0 (the "License");
   5:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     you may not use this file except in compliance with the License.
   6:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     You may obtain a copy of the License at
   7:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
   8:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****         http://www.apache.org/licenses/LICENSE-2.0
   9:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  10:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     Unless required by applicable law or agreed to in writing, software
  11:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     distributed under the License is distributed on an "AS IS" BASIS,
  12:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     See the License for the specific language governing permissions and
  14:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     limitations under the License.
  15:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** */
  16:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  17:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*
  18:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****    This driver is based on the work done by Matteo Serva available at
  19:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****    http://github.com/matteoserva/ChibiOS-AVR
  20:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** */
  21:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  22:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
  23:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @file    TIMv1/hal_gpt_lld.c
  24:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   AVR/MEGA GPT subsystem low level driver source.
  25:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
  26:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @addtogroup GPT
  27:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @{
  28:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
  29:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  30:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #include "hal.h"
  31:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  32:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if HAL_USE_GPT || defined(__DOXYGEN__)
  33:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  34:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*==========================================================================*/
  35:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /* Driver local definitions.                                                */
  36:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*==========================================================================*/
  37:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  38:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #define PRESCALER_SIZE_BASE       5
  39:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #define PRESCALER_SIZE_EXTENDED   7
  40:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  41:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /* FIXME: could use better names here! */
  42:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** typedef struct {
  43:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   volatile uint8_t *tccra;
  44:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   volatile uint8_t *tccrb;
  45:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   volatile uint8_t *ocr1;
  46:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   volatile uint8_t *ocr2;
  47:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   volatile uint8_t *tcnt1;
  48:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   volatile uint8_t *tcnt2;
  49:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   volatile uint8_t *tifr;
  50:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   volatile uint8_t *timsk;
  51:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** } timer_registers_t;
  52:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  53:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** const timer_registers_t regs_table[] = {
  54:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM1 || defined(__DOXYGEN__)
  55:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   { &TCCR1A, &TCCR1B, &OCR1AH, &OCR1AL, &TCNT1H, &TCNT1L, &TIFR1, &TIMSK1 },
  56:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
  57:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM2 || defined(__DOXYGEN__)
  58:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   { &TCCR2A, &TCCR2B, &OCR2A, &OCR2A, &TCNT2, &TCNT2, &TIFR2, &TIMSK2 },
  59:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
  60:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM3 || defined(__DOXYGEN__)
  61:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   { &TCCR3A, &TCCR3B, &OCR3AH, &OCR3AL, &TCNT3H, &TCNT3L, &TIFR3, &TIMSK3 },
  62:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
  63:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM4 || defined(__DOXYGEN__)
  64:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   { &TCCR4A, &TCCR4B, &OCR4AH, &OCR4AL, &TCNT4H, &TCNT4L, &TIFR4, &TIMSK4 },
  65:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
  66:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM5 || defined(__DOXYGEN__)
  67:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   { &TCCR5A, &TCCR5B, &OCR5AH, &OCR5AL, &TCNT5H, &TCNT5L, &TIFR5, &TIMSK5 },
  68:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
  69:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** };
  70:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  71:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*==========================================================================*/
  72:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /* Driver exported variables.                                               */
  73:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*==========================================================================*/
  74:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  75:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM1 || defined(__DOXYGEN__)
  76:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** GPTDriver GPTD1;
  77:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
  78:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM2 || defined(__DOXYGEN__)
  79:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** GPTDriver GPTD2;
  80:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
  81:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM3 || defined(__DOXYGEN__)
  82:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** GPTDriver GPTD3;
  83:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
  84:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM4 || defined(__DOXYGEN__)
  85:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** GPTDriver GPTD4;
  86:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
  87:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM5 || defined(__DOXYGEN__)
  88:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** GPTDriver GPTD5;
  89:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
  90:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  91:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*==========================================================================*/
  92:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /* Driver local variables.                                                  */
  93:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*==========================================================================*/
  94:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  95:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** static uint16_t ratio_base[] = { 1024, 256, 64, 8, 1 };
  96:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** static uint8_t  clock_source_base[] = { 5, 4, 3, 2, 1 };
  97:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  98:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
  99:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** static uint16_t ratio_extended[] = { 1024, 256, 128, 64, 32, 8, 1 };
 100:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** static uint8_t  clock_source_extended[] = { 7, 6, 5, 4, 3, 2, 1 };
 101:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 102:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 103:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*==========================================================================*/
 104:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /* Driver local functions.                                                  */
 105:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*==========================================================================*/
 106:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 107:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 108:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   TODO: Comment this function.
 109:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 110:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] freq
 111:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] ratio   pointer to the ratio used to calculate the prescaler
 112:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] n       ....
 113:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @return            ....
 114:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 115:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** static uint8_t prescaler(uint16_t freq, uint16_t *ratio, uint8_t n) {
 116:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 117:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   uint8_t i;
 118:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 119:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   for (i = 0; i < n; ++i) {
 120:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     uint32_t result = F_CPU / ratio[i] / freq;
 121:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     if (result > 256UL)
 122:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****        return i - 1;
 123:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     if ((result * ratio[i] * freq) == F_CPU)
 124:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****       return i;
 125:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   }
 126:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   return -1;
 127:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 128:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 129:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 130:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   TODO: Comment this function.
 131:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 132:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] gptp  pointer to the General Purpose Timer driver.
 133:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 134:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** static void gpt_lld_serve_interrupt(GPTDriver *gptp) {
 135:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 136:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptp->counter++;
 137:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   if (gptp->counter == gptp->period) {
 138:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     gptp->counter = 0;
 139:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     if (gptp->state == GPT_ONESHOT) {
 140:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****       gptp->state = GPT_READY;             /* Back in GPT_READY state.     */
 141:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****       gpt_lld_stop_timer(gptp);            /* Timer automatically stopped. */
 142:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     }
 143:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     gptp->callback(gptp);
 144:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   }
 145:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 146:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 147:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 148:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   GPT low level driver dummy callback.
 149:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 150:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] gptp  pointer to the General Purpose Timer driver.
 151:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 152:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** static void gpt_lld_dummy_callback(GPTDriver *gptp) {
 153:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 154:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 155:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 156:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   Get the timer index.
 157:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 158:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] gptp  pointer to the General Purpose Timer driver.
 159:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 160:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** static uint8_t getTimerIndex(GPTDriver *gptp) {
 161:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 162:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   uint8_t index = 0;
 163:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 164:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM1 || defined(__DOXYGEN__)
 165:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   if (gptp == &GPTD1) return index;
 166:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 167:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 168:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM2 || defined(__DOXYGEN__)
 169:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   if (gptp == &GPTD2) return index;
 170:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 171:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 172:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM3 || defined(__DOXYGEN__)
 173:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   if (gptp == &GPTD3) return index;
 174:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 175:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 176:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM4 || defined(__DOXYGEN__)
 177:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   if (gptp == &GPTD4) return index;
 178:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 179:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 180:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM5 || defined(__DOXYGEN__)
 181:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   if (gptp == &GPTD5) return index;
 182:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 183:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 184:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   return -1;
 185:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 186:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 187:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*===========================================================================*/
 188:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /* Driver interrupt handlers.                                                */
 189:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*===========================================================================*/
 190:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 191:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM1 || defined(__DOXYGEN__)
 192:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 193:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   TIM1 interrupt handler.
 194:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 195:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @isr
 196:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 197:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** OSAL_IRQ_HANDLER(TIMER1_COMPA_vect) {
  16               		.loc 1 197 0
  17               		.cfi_startproc
  18 0000 1F92      		push r1
  19               	.LCFI0:
  20               		.cfi_def_cfa_offset 3
  21               		.cfi_offset 1, -2
  22 0002 0F92      		push r0
  23               	.LCFI1:
  24               		.cfi_def_cfa_offset 4
  25               		.cfi_offset 0, -3
  26 0004 0FB6      		in r0,__SREG__
  27 0006 0F92      		push r0
  28 0008 1124      		clr __zero_reg__
  29 000a 2F93      		push r18
  30               	.LCFI2:
  31               		.cfi_def_cfa_offset 5
  32               		.cfi_offset 18, -4
  33 000c 3F93      		push r19
  34               	.LCFI3:
  35               		.cfi_def_cfa_offset 6
  36               		.cfi_offset 19, -5
  37 000e 4F93      		push r20
  38               	.LCFI4:
  39               		.cfi_def_cfa_offset 7
  40               		.cfi_offset 20, -6
  41 0010 5F93      		push r21
  42               	.LCFI5:
  43               		.cfi_def_cfa_offset 8
  44               		.cfi_offset 21, -7
  45 0012 6F93      		push r22
  46               	.LCFI6:
  47               		.cfi_def_cfa_offset 9
  48               		.cfi_offset 22, -8
  49 0014 7F93      		push r23
  50               	.LCFI7:
  51               		.cfi_def_cfa_offset 10
  52               		.cfi_offset 23, -9
  53 0016 8F93      		push r24
  54               	.LCFI8:
  55               		.cfi_def_cfa_offset 11
  56               		.cfi_offset 24, -10
  57 0018 9F93      		push r25
  58               	.LCFI9:
  59               		.cfi_def_cfa_offset 12
  60               		.cfi_offset 25, -11
  61 001a AF93      		push r26
  62               	.LCFI10:
  63               		.cfi_def_cfa_offset 13
  64               		.cfi_offset 26, -12
  65 001c BF93      		push r27
  66               	.LCFI11:
  67               		.cfi_def_cfa_offset 14
  68               		.cfi_offset 27, -13
  69 001e EF93      		push r30
  70               	.LCFI12:
  71               		.cfi_def_cfa_offset 15
  72               		.cfi_offset 30, -14
  73 0020 FF93      		push r31
  74               	.LCFI13:
  75               		.cfi_def_cfa_offset 16
  76               		.cfi_offset 31, -15
  77               	/* prologue: Signal */
  78               	/* frame size = 0 */
  79               	/* stack size = 15 */
  80               	.L__stack_usage = 15
 198:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 199:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   OSAL_IRQ_PROLOGUE();
  81               		.loc 1 199 0
  82 0022 81E0      		ldi r24,lo8(1)
  83 0024 8093 0000 		sts __avr_in_isr,r24
  84               	.LVL0:
  85               	.LBB33:
  86               	.LBB34:
 136:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   if (gptp->counter == gptp->period) {
  87               		.loc 1 136 0
  88 0028 8091 0000 		lds r24,GPTD1+6
  89 002c 9091 0000 		lds r25,GPTD1+6+1
  90 0030 0196      		adiw r24,1
  91 0032 9093 0000 		sts GPTD1+6+1,r25
  92 0036 8093 0000 		sts GPTD1+6,r24
 137:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     gptp->counter = 0;
  93               		.loc 1 137 0
  94 003a 2091 0000 		lds r18,GPTD1+4
  95 003e 3091 0000 		lds r19,GPTD1+4+1
  96 0042 8217      		cp r24,r18
  97 0044 9307      		cpc r25,r19
  98 0046 01F0      		breq .L9
  99               	.L2:
 100               	.LVL1:
 101               	.LBE34:
 102               	.LBE33:
 200:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gpt_lld_serve_interrupt(&GPTD1);
 201:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   OSAL_IRQ_EPILOGUE();
 103               		.loc 1 201 0
 104 0048 1092 0000 		sts __avr_in_isr,__zero_reg__
 105 004c 0E94 0000 		call chSchIsPreemptionRequired
 106               	.LVL2:
 107 0050 8111      		cpse r24,__zero_reg__
 108               		.loc 1 201 0 is_stmt 0 discriminator 1
 109 0052 0E94 0000 		call chSchDoPreemption
 110               	.LVL3:
 111               	.L1:
 112               	/* epilogue start */
 202:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 113               		.loc 1 202 0 is_stmt 1
 114 0056 FF91      		pop r31
 115 0058 EF91      		pop r30
 116 005a BF91      		pop r27
 117 005c AF91      		pop r26
 118 005e 9F91      		pop r25
 119 0060 8F91      		pop r24
 120 0062 7F91      		pop r23
 121 0064 6F91      		pop r22
 122 0066 5F91      		pop r21
 123 0068 4F91      		pop r20
 124 006a 3F91      		pop r19
 125 006c 2F91      		pop r18
 126 006e 0F90      		pop r0
 127 0070 0FBE      		out __SREG__,r0
 128 0072 0F90      		pop r0
 129 0074 1F90      		pop r1
 130 0076 1895      		reti
 131               	.LVL4:
 132               	.L9:
 133               	.LBB38:
 134               	.LBB37:
 138:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     if (gptp->state == GPT_ONESHOT) {
 135               		.loc 1 138 0
 136 0078 1092 0000 		sts GPTD1+6+1,__zero_reg__
 137 007c 1092 0000 		sts GPTD1+6,__zero_reg__
 139:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****       gptp->state = GPT_READY;             /* Back in GPT_READY state.     */
 138               		.loc 1 139 0
 139 0080 8091 0000 		lds r24,GPTD1
 140 0084 8430      		cpi r24,lo8(4)
 141 0086 01F4      		brne .L3
 140:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****       gpt_lld_stop_timer(gptp);            /* Timer automatically stopped. */
 142               		.loc 1 140 0
 143 0088 92E0      		ldi r25,lo8(2)
 144 008a 9093 0000 		sts GPTD1,r25
 145               	.LVL5:
 146               	.LBB35:
 147               	.LBB36:
 203:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 204:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 205:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM2 || defined(__DOXYGEN__)
 206:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 207:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   TIM2 interrupt handler.
 208:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 209:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @isr
 210:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 211:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** OSAL_IRQ_HANDLER(TIMER2_COMPA_vect) {
 212:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 213:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   OSAL_IRQ_PROLOGUE();
 214:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gpt_lld_serve_interrupt(&GPTD2);
 215:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   OSAL_IRQ_EPILOGUE();
 216:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 217:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 218:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 219:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM3 || defined(__DOXYGEN__)
 220:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 221:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   TIM3 interrupt handler.
 222:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 223:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @isr
 224:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 225:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** OSAL_IRQ_HANDLER(TIMER3_COMPA_vect) {
 226:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 227:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   OSAL_IRQ_PROLOGUE();
 228:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gpt_lld_serve_interrupt(&GPTD3);
 229:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   OSAL_IRQ_EPILOGUE();
 230:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 231:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 232:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 233:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM4 || defined(__DOXYGEN__)
 234:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 235:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   TIM4 interrupt handler.
 236:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 237:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @isr
 238:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 239:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** OSAL_IRQ_HANDLER(TIMER4_COMPA_vect) {
 240:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 241:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   OSAL_IRQ_PROLOGUE();
 242:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gpt_lld_serve_interrupt(&GPTD4);
 243:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   OSAL_IRQ_EPILOGUE();
 244:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 245:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 246:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 247:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM5 || defined(__DOXYGEN__)
 248:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 249:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   TIM2 interrupt handler.
 250:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 251:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @isr
 252:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 253:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** OSAL_IRQ_HANDLER(TIMER5_COMPA_vect) {
 254:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 255:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   OSAL_IRQ_PROLOGUE();
 256:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gpt_lld_serve_interrupt(&GPTD5);
 257:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   OSAL_IRQ_EPILOGUE();
 258:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 259:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 260:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 261:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*==========================================================================*/
 262:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /* Driver exported functions.                                               */
 263:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /*==========================================================================*/
 264:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 265:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 266:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   Low level GPT driver initialization.
 267:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 268:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @notapi
 269:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 270:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** void gpt_lld_init(void) {
 271:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 272:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM1 || defined(__DOXYGEN__)
 273:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptObjectInit(&GPTD1);
 274:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 275:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM2 || defined(__DOXYGEN__)
 276:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptObjectInit(&GPTD2);
 277:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 278:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM3 || defined(__DOXYGEN__)
 279:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptObjectInit(&GPTD3);
 280:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 281:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM4 || defined(__DOXYGEN__)
 282:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptObjectInit(&GPTD4);
 283:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 284:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM5 || defined(__DOXYGEN__)
 285:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptObjectInit(&GPTD5);
 286:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 287:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 288:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 289:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 290:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   Configures and activates the GPT peripheral.
 291:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 292:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] gptp    pointer to the @p GPTDriver object
 293:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 294:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @notapi
 295:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 296:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** void gpt_lld_start(GPTDriver *gptp) {
 297:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 298:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   uint8_t psc;
 299:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 300:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   if (gptp->state == GPT_STOP) {
 301:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     /* Clock activation.*/
 302:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   }
 303:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 304:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   /* Configuration.*/
 305:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 306:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #if AVR_GPT_USE_TIM2 || defined(__DOXYGEN__)
 307:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   if (gptp == &GPTD2) {
 308:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     psc = prescaler(gptp->config->frequency, ratio_extended, PRESCALER_SIZE_EXTENDED);
 309:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     gptp->clock_source = clock_source_extended[psc] & 0x07;
 310:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     TCCR2A  = (1 << WGM21) | (0 << WGM20);
 311:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     TCCR2B  = (0 << WGM22);
 312:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     OCR2A = F_CPU / ratio_extended[psc] /gptp->config->frequency - 1;
 313:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     return;
 314:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   }
 315:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 316:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 317:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   uint8_t i = getTimerIndex(gptp);
 318:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   psc = prescaler(gptp->config->frequency, ratio_base, PRESCALER_SIZE_BASE);
 319:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptp->clock_source = clock_source_base[psc] & 0x07;
 320:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tccra = (0 << WGM11)  |
 321:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****                          (0 << WGM10)  |
 322:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****                          (0 << COM1A1) |
 323:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****                          (0 << COM1A0) |
 324:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****                          (0 << COM1B1) |
 325:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****                          (0 << COM1B0);
 326:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tccrb = (1 << WGM12);
 327:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].ocr1 = 0;
 328:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].ocr2 = F_CPU / ratio_base[psc] / gptp->config->frequency - 1;
 329:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 330:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 331:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 332:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   Deactivates the GPT peripheral.
 333:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 334:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] gptp    pointer to the @p GPTDriver object
 335:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 336:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @notapi
 337:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 338:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** void gpt_lld_stop(GPTDriver *gptp) {
 339:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 340:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   /* Nothing to be done */
 341:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   if (gptp->state == GPT_READY) {
 342:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     /* Clock de-activation.*/
 343:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   }
 344:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gpt_lld_stop_timer(gptp);
 345:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 346:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 347:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 348:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   Starts the timer in continuous mode.
 349:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 350:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] gptp      pointer to the @p GPTDriver object
 351:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] period    period in ticks
 352:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 353:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @notapi
 354:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 355:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** void gpt_lld_start_timer(GPTDriver *gptp, gptcnt_t period) {
 356:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 357:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptp->callback = gptp->config->callback;
 358:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptp->period = period;
 359:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptp->counter = 0;
 360:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 361:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   uint8_t i = getTimerIndex(gptp);
 362:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tcnt1 = 0;
 363:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tcnt2 = 0;
 364:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tifr  = (1 << OCF1A);
 365:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].timsk = (1 << OCIE1A);
 366:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tccrb |= (gptp->clock_source << CS10);
 367:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 368:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 369:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 370:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   Stops the timer.
 371:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 372:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] gptp    pointer to the @p GPTDriver object
 373:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 374:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @notapi
 375:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 376:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** void gpt_lld_stop_timer(GPTDriver *gptp) {
 377:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 378:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   uint8_t i = getTimerIndex(gptp);
 379:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 380:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tccrb &= ~((7 << CS10) | (1 << OCIE1A));
 148               		.loc 1 380 0
 149 008e 8091 8100 		lds r24,129
 150 0092 887F      		andi r24,lo8(-8)
 151 0094 8093 8100 		sts 129,r24
 381:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tifr = (1 << OCF1A);
 152               		.loc 1 381 0
 153 0098 96BB      		out 0x16,r25
 154               	.LVL6:
 155               	.L3:
 156               	.LBE36:
 157               	.LBE35:
 143:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   }
 158               		.loc 1 143 0
 159 009a E091 0000 		lds r30,GPTD1+8
 160 009e F091 0000 		lds r31,GPTD1+8+1
 161 00a2 80E0      		ldi r24,lo8(GPTD1)
 162 00a4 90E0      		ldi r25,hi8(GPTD1)
 163 00a6 0995      		icall
 164               	.LVL7:
 165 00a8 00C0      		rjmp .L2
 166               	.LBE37:
 167               	.LBE38:
 168               		.cfi_endproc
 169               	.LFE242:
 171               		.section	.text.gpt_lld_init,"ax",@progbits
 172               	.global	gpt_lld_init
 174               	gpt_lld_init:
 175               	.LFB243:
 270:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 176               		.loc 1 270 0
 177               		.cfi_startproc
 178               	/* prologue: function */
 179               	/* frame size = 0 */
 180               	/* stack size = 0 */
 181               	.L__stack_usage = 0
 273:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** #endif
 182               		.loc 1 273 0
 183 0000 80E0      		ldi r24,lo8(GPTD1)
 184 0002 90E0      		ldi r25,hi8(GPTD1)
 185 0004 0C94 0000 		jmp gptObjectInit
 186               	.LVL8:
 187               		.cfi_endproc
 188               	.LFE243:
 190               		.section	.text.gpt_lld_start,"ax",@progbits
 191               	.global	gpt_lld_start
 193               	gpt_lld_start:
 194               	.LFB244:
 296:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 195               		.loc 1 296 0
 196               		.cfi_startproc
 197               	.LVL9:
 198 0000 2F92      		push r2
 199               	.LCFI14:
 200               		.cfi_def_cfa_offset 3
 201               		.cfi_offset 2, -2
 202 0002 3F92      		push r3
 203               	.LCFI15:
 204               		.cfi_def_cfa_offset 4
 205               		.cfi_offset 3, -3
 206 0004 4F92      		push r4
 207               	.LCFI16:
 208               		.cfi_def_cfa_offset 5
 209               		.cfi_offset 4, -4
 210 0006 5F92      		push r5
 211               	.LCFI17:
 212               		.cfi_def_cfa_offset 6
 213               		.cfi_offset 5, -5
 214 0008 6F92      		push r6
 215               	.LCFI18:
 216               		.cfi_def_cfa_offset 7
 217               		.cfi_offset 6, -6
 218 000a 7F92      		push r7
 219               	.LCFI19:
 220               		.cfi_def_cfa_offset 8
 221               		.cfi_offset 7, -7
 222 000c 8F92      		push r8
 223               	.LCFI20:
 224               		.cfi_def_cfa_offset 9
 225               		.cfi_offset 8, -8
 226 000e 9F92      		push r9
 227               	.LCFI21:
 228               		.cfi_def_cfa_offset 10
 229               		.cfi_offset 9, -9
 230 0010 AF92      		push r10
 231               	.LCFI22:
 232               		.cfi_def_cfa_offset 11
 233               		.cfi_offset 10, -10
 234 0012 BF92      		push r11
 235               	.LCFI23:
 236               		.cfi_def_cfa_offset 12
 237               		.cfi_offset 11, -11
 238 0014 CF92      		push r12
 239               	.LCFI24:
 240               		.cfi_def_cfa_offset 13
 241               		.cfi_offset 12, -12
 242 0016 DF92      		push r13
 243               	.LCFI25:
 244               		.cfi_def_cfa_offset 14
 245               		.cfi_offset 13, -13
 246 0018 EF92      		push r14
 247               	.LCFI26:
 248               		.cfi_def_cfa_offset 15
 249               		.cfi_offset 14, -14
 250 001a FF92      		push r15
 251               	.LCFI27:
 252               		.cfi_def_cfa_offset 16
 253               		.cfi_offset 15, -15
 254 001c 0F93      		push r16
 255               	.LCFI28:
 256               		.cfi_def_cfa_offset 17
 257               		.cfi_offset 16, -16
 258 001e 1F93      		push r17
 259               	.LCFI29:
 260               		.cfi_def_cfa_offset 18
 261               		.cfi_offset 17, -17
 262 0020 CF93      		push r28
 263               	.LCFI30:
 264               		.cfi_def_cfa_offset 19
 265               		.cfi_offset 28, -18
 266 0022 DF93      		push r29
 267               	.LCFI31:
 268               		.cfi_def_cfa_offset 20
 269               		.cfi_offset 29, -19
 270               	/* prologue: function */
 271               	/* frame size = 0 */
 272               	/* stack size = 18 */
 273               	.L__stack_usage = 18
 274 0024 8C01      		movw r16,r24
 300:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     /* Clock activation.*/
 275               		.loc 1 300 0
 276 0026 DC01      		movw r26,r24
 277 0028 8C91      		ld r24,X
 278               	.LVL10:
 279               	.LBB39:
 280               	.LBB40:
 165:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 281               		.loc 1 165 0
 282 002a 81E0      		ldi r24,lo8(1)
 283 002c B0E0      		ldi r27,hi8(GPTD1)
 284 002e 0030      		cpi r16,lo8(GPTD1)
 285 0030 1B07      		cpc r17,r27
 286 0032 01F4      		brne .+2
 287 0034 00C0      		rjmp .L18
 288               	.L12:
 289 0036 282E      		mov r2,r24
 290 0038 2194      		neg r2
 291               	.LVL11:
 292               	.LBE40:
 293               	.LBE39:
 318:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptp->clock_source = clock_source_base[psc] & 0x07;
 294               		.loc 1 318 0
 295 003a D801      		movw r26,r16
 296 003c 1196      		adiw r26,1
 297 003e ED91      		ld r30,X+
 298 0040 FC91      		ld r31,X
 299 0042 4080      		ld r4,Z
 300 0044 5180      		ldd r5,Z+1
 301 0046 6280      		ldd r6,Z+2
 302 0048 7380      		ldd r7,Z+3
 303 004a 6624      		clr r6
 304 004c 7724      		clr r7
 305 004e C0E0      		ldi r28,lo8(ratio_base)
 306 0050 D0E0      		ldi r29,hi8(ratio_base)
 307               	.LBB42:
 308               	.LBB43:
 119:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     uint32_t result = F_CPU / ratio[i] / freq;
 309               		.loc 1 119 0
 310 0052 312C      		mov r3,__zero_reg__
 311               	.LVL12:
 312               	.L16:
 313               	.LBB44:
 120:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     if (result > 256UL)
 314               		.loc 1 120 0
 315 0054 C990      		ld r12,Y+
 316 0056 D990      		ld r13,Y+
 317 0058 F12C      		mov r15,__zero_reg__
 318 005a E12C      		mov r14,__zero_reg__
 319 005c 60E0      		ldi r22,0
 320 005e 74E2      		ldi r23,lo8(36)
 321 0060 84EF      		ldi r24,lo8(-12)
 322 0062 90E0      		ldi r25,0
 323 0064 A701      		movw r20,r14
 324 0066 9601      		movw r18,r12
 325 0068 0E94 0000 		call __udivmodsi4
 326 006c CA01      		movw r24,r20
 327 006e B901      		movw r22,r18
 328 0070 A301      		movw r20,r6
 329 0072 9201      		movw r18,r4
 330 0074 0E94 0000 		call __udivmodsi4
 331 0078 4901      		movw r8,r18
 332 007a 5A01      		movw r10,r20
 333               	.LVL13:
 121:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****        return i - 1;
 334               		.loc 1 121 0
 335 007c B1E0      		ldi r27,1
 336 007e 8B16      		cp r8,r27
 337 0080 9B06      		cpc r9,r27
 338 0082 A104      		cpc r10,__zero_reg__
 339 0084 B104      		cpc r11,__zero_reg__
 340 0086 00F0      		brlo .+2
 341 0088 00C0      		rjmp .L19
 123:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****       return i;
 342               		.loc 1 123 0
 343 008a A701      		movw r20,r14
 344 008c 9601      		movw r18,r12
 345 008e C301      		movw r24,r6
 346 0090 B201      		movw r22,r4
 347 0092 0E94 0000 		call __mulsi3
 348 0096 9B01      		movw r18,r22
 349 0098 AC01      		movw r20,r24
 350 009a C501      		movw r24,r10
 351 009c B401      		movw r22,r8
 352 009e 0E94 0000 		call __mulsi3
 353 00a2 6115      		cp r22,__zero_reg__
 354 00a4 7442      		sbci r23,36
 355 00a6 844F      		sbci r24,-12
 356 00a8 9105      		cpc r25,__zero_reg__
 357 00aa 01F4      		brne .+2
 358 00ac 00C0      		rjmp .L15
 359               	.LBE44:
 119:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     uint32_t result = F_CPU / ratio[i] / freq;
 360               		.loc 1 119 0
 361 00ae 3394      		inc r3
 362               	.LVL14:
 363 00b0 F5E0      		ldi r31,lo8(5)
 364 00b2 3F12      		cpse r3,r31
 365 00b4 00C0      		rjmp .L16
 366 00b6 20E0      		ldi r18,0
 367 00b8 8FEF      		ldi r24,lo8(-1)
 368 00ba 90E0      		ldi r25,0
 369               	.LVL15:
 370               	.L14:
 371               	.LBE43:
 372               	.LBE42:
 319:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tccra = (0 << WGM11)  |
 373               		.loc 1 319 0
 374 00bc D801      		movw r26,r16
 375 00be 1396      		adiw r26,3
 376 00c0 2C93      		st X,r18
 320:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****                          (0 << WGM10)  |
 377               		.loc 1 320 0
 378 00c2 E22D      		mov r30,r2
 379 00c4 F0E0      		ldi r31,0
 380 00c6 E295      		swap r30
 381 00c8 F295      		swap r31
 382 00ca F07F      		andi r31,0xf0
 383 00cc FE27      		eor r31,r30
 384 00ce E07F      		andi r30,0xf0
 385 00d0 FE27      		eor r31,r30
 386 00d2 E050      		subi r30,lo8(-(regs_table))
 387 00d4 F040      		sbci r31,hi8(-(regs_table))
 388 00d6 A081      		ld r26,Z
 389 00d8 B181      		ldd r27,Z+1
 390 00da 1C92      		st X,__zero_reg__
 326:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].ocr1 = 0;
 391               		.loc 1 326 0
 392 00dc A281      		ldd r26,Z+2
 393 00de B381      		ldd r27,Z+3
 394 00e0 28E0      		ldi r18,lo8(8)
 395 00e2 2C93      		st X,r18
 327:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].ocr2 = F_CPU / ratio_base[psc] / gptp->config->frequency - 1;
 396               		.loc 1 327 0
 397 00e4 A481      		ldd r26,Z+4
 398 00e6 B581      		ldd r27,Z+5
 399 00e8 1C92      		st X,__zero_reg__
 328:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 400               		.loc 1 328 0
 401 00ea C681      		ldd r28,Z+6
 402 00ec D781      		ldd r29,Z+7
 403 00ee 880F      		lsl r24
 404 00f0 991F      		rol r25
 405 00f2 FC01      		movw r30,r24
 406 00f4 E050      		subi r30,lo8(-(ratio_base))
 407 00f6 F040      		sbci r31,hi8(-(ratio_base))
 408 00f8 2081      		ld r18,Z
 409 00fa 3181      		ldd r19,Z+1
 410 00fc 50E0      		ldi r21,0
 411 00fe 40E0      		ldi r20,0
 412 0100 60E0      		ldi r22,0
 413 0102 74E2      		ldi r23,lo8(36)
 414 0104 84EF      		ldi r24,lo8(-12)
 415 0106 90E0      		ldi r25,0
 416 0108 0E94 0000 		call __udivmodsi4
 417 010c CA01      		movw r24,r20
 418 010e B901      		movw r22,r18
 419 0110 D801      		movw r26,r16
 420 0112 1196      		adiw r26,1
 421 0114 ED91      		ld r30,X+
 422 0116 FC91      		ld r31,X
 423 0118 2081      		ld r18,Z
 424 011a 3181      		ldd r19,Z+1
 425 011c 4281      		ldd r20,Z+2
 426 011e 5381      		ldd r21,Z+3
 427 0120 0E94 0000 		call __udivmodsi4
 428 0124 2150      		subi r18,lo8(-(-1))
 429 0126 2883      		st Y,r18
 430               	/* epilogue start */
 329:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 431               		.loc 1 329 0
 432 0128 DF91      		pop r29
 433 012a CF91      		pop r28
 434 012c 1F91      		pop r17
 435 012e 0F91      		pop r16
 436               	.LVL16:
 437 0130 FF90      		pop r15
 438 0132 EF90      		pop r14
 439 0134 DF90      		pop r13
 440 0136 CF90      		pop r12
 441 0138 BF90      		pop r11
 442 013a AF90      		pop r10
 443 013c 9F90      		pop r9
 444 013e 8F90      		pop r8
 445 0140 7F90      		pop r7
 446 0142 6F90      		pop r6
 447 0144 5F90      		pop r5
 448 0146 4F90      		pop r4
 449 0148 3F90      		pop r3
 450 014a 2F90      		pop r2
 451 014c 0895      		ret
 452               	.LVL17:
 453               	.L19:
 454               	.LBB47:
 455               	.LBB46:
 456               	.LBB45:
 122:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     if ((result * ratio[i] * freq) == F_CPU)
 457               		.loc 1 122 0
 458 014e 3A94      		dec r3
 459               	.LVL18:
 460               	.L15:
 461 0150 832D      		mov r24,r3
 462 0152 90E0      		ldi r25,0
 463 0154 FC01      		movw r30,r24
 464 0156 E050      		subi r30,lo8(-(clock_source_base))
 465 0158 F040      		sbci r31,hi8(-(clock_source_base))
 466 015a 2081      		ld r18,Z
 467 015c 2770      		andi r18,lo8(7)
 468 015e 00C0      		rjmp .L14
 469               	.LVL19:
 470               	.L18:
 471               	.LBE45:
 472               	.LBE46:
 473               	.LBE47:
 474               	.LBB48:
 475               	.LBB41:
 165:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 476               		.loc 1 165 0
 477 0160 80E0      		ldi r24,0
 478 0162 00C0      		rjmp .L12
 479               	.LBE41:
 480               	.LBE48:
 481               		.cfi_endproc
 482               	.LFE244:
 484               		.section	.text.gpt_lld_stop,"ax",@progbits
 485               	.global	gpt_lld_stop
 487               	gpt_lld_stop:
 488               	.LFB245:
 338:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 489               		.loc 1 338 0
 490               		.cfi_startproc
 491               	.LVL20:
 492               	/* prologue: function */
 493               	/* frame size = 0 */
 494               	/* stack size = 0 */
 495               	.L__stack_usage = 0
 341:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****     /* Clock de-activation.*/
 496               		.loc 1 341 0
 497 0000 FC01      		movw r30,r24
 498 0002 2081      		ld r18,Z
 499               	.LVL21:
 500               	.LBB49:
 501               	.LBB50:
 502               	.LBB51:
 503               	.LBB52:
 165:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 504               		.loc 1 165 0
 505 0004 E1E0      		ldi r30,lo8(1)
 506 0006 8050      		subi r24,lo8(GPTD1)
 507 0008 9040      		sbci r25,hi8(GPTD1)
 508 000a 01F0      		breq .L22
 509               	.L21:
 510 000c E195      		neg r30
 511               	.LBE52:
 512               	.LBE51:
 380:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tifr = (1 << OCF1A);
 513               		.loc 1 380 0
 514 000e F0E0      		ldi r31,0
 515 0010 E295      		swap r30
 516 0012 F295      		swap r31
 517 0014 F07F      		andi r31,0xf0
 518 0016 FE27      		eor r31,r30
 519 0018 E07F      		andi r30,0xf0
 520 001a FE27      		eor r31,r30
 521               	.LVL22:
 522 001c E050      		subi r30,lo8(-(regs_table))
 523 001e F040      		sbci r31,hi8(-(regs_table))
 524 0020 A281      		ldd r26,Z+2
 525 0022 B381      		ldd r27,Z+3
 526 0024 8C91      		ld r24,X
 527 0026 887F      		andi r24,lo8(-8)
 528 0028 8C93      		st X,r24
 529               		.loc 1 381 0
 530 002a 0484      		ldd __tmp_reg__,Z+12
 531 002c F585      		ldd r31,Z+13
 532 002e E02D      		mov r30,__tmp_reg__
 533 0030 82E0      		ldi r24,lo8(2)
 534 0032 8083      		st Z,r24
 535               	.LVL23:
 536               	/* epilogue start */
 537               	.LBE50:
 538               	.LBE49:
 345:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 539               		.loc 1 345 0
 540 0034 0895      		ret
 541               	.LVL24:
 542               	.L22:
 543               	.LBB56:
 544               	.LBB55:
 545               	.LBB54:
 546               	.LBB53:
 165:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 547               		.loc 1 165 0
 548 0036 E0E0      		ldi r30,0
 549 0038 00C0      		rjmp .L21
 550               	.LBE53:
 551               	.LBE54:
 552               	.LBE55:
 553               	.LBE56:
 554               		.cfi_endproc
 555               	.LFE245:
 557               		.section	.text.gpt_lld_start_timer,"ax",@progbits
 558               	.global	gpt_lld_start_timer
 560               	gpt_lld_start_timer:
 561               	.LFB246:
 355:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 562               		.loc 1 355 0
 563               		.cfi_startproc
 564               	.LVL25:
 565 0000 CF93      		push r28
 566               	.LCFI32:
 567               		.cfi_def_cfa_offset 3
 568               		.cfi_offset 28, -2
 569 0002 DF93      		push r29
 570               	.LCFI33:
 571               		.cfi_def_cfa_offset 4
 572               		.cfi_offset 29, -3
 573               	/* prologue: function */
 574               	/* frame size = 0 */
 575               	/* stack size = 2 */
 576               	.L__stack_usage = 2
 577 0004 DC01      		movw r26,r24
 357:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptp->period = period;
 578               		.loc 1 357 0
 579 0006 1196      		adiw r26,1
 580 0008 ED91      		ld r30,X+
 581 000a FC91      		ld r31,X
 582 000c 1297      		sbiw r26,1+1
 583 000e 8481      		ldd r24,Z+4
 584 0010 9581      		ldd r25,Z+5
 585               	.LVL26:
 586 0012 1996      		adiw r26,8+1
 587 0014 9C93      		st X,r25
 588 0016 8E93      		st -X,r24
 589 0018 1897      		sbiw r26,8
 358:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptp->counter = 0;
 590               		.loc 1 358 0
 591 001a 1596      		adiw r26,4+1
 592 001c 7C93      		st X,r23
 593 001e 6E93      		st -X,r22
 594 0020 1497      		sbiw r26,4
 359:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 595               		.loc 1 359 0
 596 0022 1796      		adiw r26,6+1
 597 0024 1C92      		st X,__zero_reg__
 598 0026 1E92      		st -X,__zero_reg__
 599 0028 1697      		sbiw r26,6
 600               	.LVL27:
 601               	.LBB57:
 602               	.LBB58:
 165:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 603               		.loc 1 165 0
 604 002a E1E0      		ldi r30,lo8(1)
 605 002c 80E0      		ldi r24,hi8(GPTD1)
 606 002e A030      		cpi r26,lo8(GPTD1)
 607 0030 B807      		cpc r27,r24
 608 0032 01F0      		breq .L25
 609               	.L24:
 610 0034 E195      		neg r30
 611               	.LBE58:
 612               	.LBE57:
 362:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tcnt2 = 0;
 613               		.loc 1 362 0
 614 0036 F0E0      		ldi r31,0
 615 0038 E295      		swap r30
 616 003a F295      		swap r31
 617 003c F07F      		andi r31,0xf0
 618 003e FE27      		eor r31,r30
 619 0040 E07F      		andi r30,0xf0
 620 0042 FE27      		eor r31,r30
 621 0044 E050      		subi r30,lo8(-(regs_table))
 622 0046 F040      		sbci r31,hi8(-(regs_table))
 623 0048 C085      		ldd r28,Z+8
 624 004a D185      		ldd r29,Z+9
 625 004c 1882      		st Y,__zero_reg__
 363:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tifr  = (1 << OCF1A);
 626               		.loc 1 363 0
 627 004e C285      		ldd r28,Z+10
 628 0050 D385      		ldd r29,Z+11
 629 0052 1882      		st Y,__zero_reg__
 364:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].timsk = (1 << OCIE1A);
 630               		.loc 1 364 0
 631 0054 C485      		ldd r28,Z+12
 632 0056 D585      		ldd r29,Z+13
 633 0058 82E0      		ldi r24,lo8(2)
 634 005a 8883      		st Y,r24
 365:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tccrb |= (gptp->clock_source << CS10);
 635               		.loc 1 365 0
 636 005c 8093 6F00 		sts 111,r24
 366:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 637               		.loc 1 366 0
 638 0060 0280      		ldd __tmp_reg__,Z+2
 639 0062 F381      		ldd r31,Z+3
 640 0064 E02D      		mov r30,__tmp_reg__
 641 0066 8081      		ld r24,Z
 642 0068 1396      		adiw r26,3
 643 006a 9C91      		ld r25,X
 644 006c 892B      		or r24,r25
 645 006e 8083      		st Z,r24
 646               	/* epilogue start */
 367:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 647               		.loc 1 367 0
 648 0070 DF91      		pop r29
 649 0072 CF91      		pop r28
 650 0074 0895      		ret
 651               	.L25:
 652               	.LBB60:
 653               	.LBB59:
 165:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 654               		.loc 1 165 0
 655 0076 E0E0      		ldi r30,0
 656 0078 00C0      		rjmp .L24
 657               	.LBE59:
 658               	.LBE60:
 659               		.cfi_endproc
 660               	.LFE246:
 662               		.section	.text.gpt_lld_stop_timer,"ax",@progbits
 663               	.global	gpt_lld_stop_timer
 665               	gpt_lld_stop_timer:
 666               	.LFB247:
 376:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 667               		.loc 1 376 0
 668               		.cfi_startproc
 669               	.LVL28:
 670               	/* prologue: function */
 671               	/* frame size = 0 */
 672               	/* stack size = 0 */
 673               	.L__stack_usage = 0
 674               	.LBB61:
 675               	.LBB62:
 165:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 676               		.loc 1 165 0
 677 0000 E1E0      		ldi r30,lo8(1)
 678 0002 8050      		subi r24,lo8(GPTD1)
 679 0004 9040      		sbci r25,hi8(GPTD1)
 680 0006 01F0      		breq .L28
 681               	.L27:
 682 0008 E195      		neg r30
 683               	.LBE62:
 684               	.LBE61:
 380:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tifr = (1 << OCF1A);
 685               		.loc 1 380 0
 686 000a F0E0      		ldi r31,0
 687 000c E295      		swap r30
 688 000e F295      		swap r31
 689 0010 F07F      		andi r31,0xf0
 690 0012 FE27      		eor r31,r30
 691 0014 E07F      		andi r30,0xf0
 692 0016 FE27      		eor r31,r30
 693               	.LVL29:
 694 0018 E050      		subi r30,lo8(-(regs_table))
 695 001a F040      		sbci r31,hi8(-(regs_table))
 696 001c A281      		ldd r26,Z+2
 697 001e B381      		ldd r27,Z+3
 698 0020 8C91      		ld r24,X
 699 0022 887F      		andi r24,lo8(-8)
 700 0024 8C93      		st X,r24
 701               		.loc 1 381 0
 702 0026 0484      		ldd __tmp_reg__,Z+12
 703 0028 F585      		ldd r31,Z+13
 704 002a E02D      		mov r30,__tmp_reg__
 705 002c 82E0      		ldi r24,lo8(2)
 706 002e 8083      		st Z,r24
 707               	/* epilogue start */
 382:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 708               		.loc 1 382 0
 709 0030 0895      		ret
 710               	.LVL30:
 711               	.L28:
 712               	.LBB64:
 713               	.LBB63:
 165:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 714               		.loc 1 165 0
 715 0032 E0E0      		ldi r30,0
 716 0034 00C0      		rjmp .L27
 717               	.LBE63:
 718               	.LBE64:
 719               		.cfi_endproc
 720               	.LFE247:
 722               		.section	.text.gpt_lld_polled_delay,"ax",@progbits
 723               	.global	gpt_lld_polled_delay
 725               	gpt_lld_polled_delay:
 726               	.LFB248:
 383:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 384:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** /**
 385:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @brief   Starts the timer in one shot mode and waits for completion.
 386:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @details This function specifically polls the timer waiting for completion
 387:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *          in order to not have extra delays caused by interrupt servicing,
 388:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *          this function is only recommended for short delays.
 389:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 390:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] gptp      pointer to the @p GPTDriver object
 391:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @param[in] interval  time interval in ticks
 392:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  *
 393:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  * @notapi
 394:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****  */
 395:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** void gpt_lld_polled_delay(GPTDriver *gptp, gptcnt_t interval) {
 727               		.loc 1 395 0
 728               		.cfi_startproc
 729               	.LVL31:
 730 0000 CF93      		push r28
 731               	.LCFI34:
 732               		.cfi_def_cfa_offset 3
 733               		.cfi_offset 28, -2
 734 0002 DF93      		push r29
 735               	.LCFI35:
 736               		.cfi_def_cfa_offset 4
 737               		.cfi_offset 29, -3
 738               	/* prologue: function */
 739               	/* frame size = 0 */
 740               	/* stack size = 2 */
 741               	.L__stack_usage = 2
 742 0004 FC01      		movw r30,r24
 743               	.LVL32:
 744               	.LBB65:
 745               	.LBB66:
 357:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptp->period = period;
 746               		.loc 1 357 0
 747 0006 A181      		ldd r26,Z+1
 748 0008 B281      		ldd r27,Z+2
 749 000a 1496      		adiw r26,4
 750 000c 8D91      		ld r24,X+
 751 000e 9C91      		ld r25,X
 752               	.LVL33:
 753 0010 9187      		std Z+9,r25
 754 0012 8087      		std Z+8,r24
 358:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptp->counter = 0;
 755               		.loc 1 358 0
 756 0014 7583      		std Z+5,r23
 757 0016 6483      		std Z+4,r22
 359:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 758               		.loc 1 359 0
 759 0018 1782      		std Z+7,__zero_reg__
 760 001a 1682      		std Z+6,__zero_reg__
 761               	.LVL34:
 762               	.LBB67:
 763               	.LBB68:
 165:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 764               		.loc 1 165 0
 765 001c A1E0      		ldi r26,lo8(1)
 766 001e 80E0      		ldi r24,hi8(GPTD1)
 767 0020 E030      		cpi r30,lo8(GPTD1)
 768 0022 F807      		cpc r31,r24
 769 0024 01F0      		breq .L33
 770               	.L30:
 771 0026 A195      		neg r26
 772               	.LBE68:
 773               	.LBE67:
 362:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tcnt2 = 0;
 774               		.loc 1 362 0
 775 0028 B0E0      		ldi r27,0
 776 002a A295      		swap r26
 777 002c B295      		swap r27
 778 002e B07F      		andi r27,0xf0
 779 0030 BA27      		eor r27,r26
 780 0032 A07F      		andi r26,0xf0
 781 0034 BA27      		eor r27,r26
 782 0036 A050      		subi r26,lo8(-(regs_table))
 783 0038 B040      		sbci r27,hi8(-(regs_table))
 784 003a 1896      		adiw r26,8
 785 003c CD91      		ld r28,X+
 786 003e DC91      		ld r29,X
 787 0040 1997      		sbiw r26,8+1
 788 0042 1882      		st Y,__zero_reg__
 363:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tifr  = (1 << OCF1A);
 789               		.loc 1 363 0
 790 0044 1A96      		adiw r26,10
 791 0046 CD91      		ld r28,X+
 792 0048 DC91      		ld r29,X
 793 004a 1B97      		sbiw r26,10+1
 794 004c 1882      		st Y,__zero_reg__
 364:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].timsk = (1 << OCIE1A);
 795               		.loc 1 364 0
 796 004e 1C96      		adiw r26,12
 797 0050 CD91      		ld r28,X+
 798 0052 DC91      		ld r29,X
 799 0054 1D97      		sbiw r26,12+1
 800 0056 82E0      		ldi r24,lo8(2)
 801 0058 8883      		st Y,r24
 365:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   *regs_table[i].tccrb |= (gptp->clock_source << CS10);
 802               		.loc 1 365 0
 803 005a 8093 6F00 		sts 111,r24
 366:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 804               		.loc 1 366 0
 805 005e 1296      		adiw r26,2
 806 0060 0D90      		ld __tmp_reg__,X+
 807 0062 BC91      		ld r27,X
 808 0064 A02D      		mov r26,__tmp_reg__
 809 0066 8C91      		ld r24,X
 810 0068 9381      		ldd r25,Z+3
 811 006a 892B      		or r24,r25
 812 006c 8C93      		st X,r24
 813               	.L31:
 814               	.LBE66:
 815               	.LBE65:
 396:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** 
 397:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gptp->callback = gpt_lld_dummy_callback;
 398:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   gpt_lld_start_timer(gptp, interval);
 399:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   /* FIX */
 400:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   while (gptp->state != GPT_READY) {}
 816               		.loc 1 400 0 discriminator 1
 817 006e 8081      		ld r24,Z
 818 0070 8230      		cpi r24,lo8(2)
 819 0072 01F4      		brne .L31
 820               	/* epilogue start */
 401:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c **** }
 821               		.loc 1 401 0
 822 0074 DF91      		pop r29
 823 0076 CF91      		pop r28
 824 0078 0895      		ret
 825               	.L33:
 826               	.LBB72:
 827               	.LBB71:
 828               	.LBB70:
 829               	.LBB69:
 165:../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.c ****   else index++;
 830               		.loc 1 165 0
 831 007a A0E0      		ldi r26,0
 832 007c 00C0      		rjmp .L30
 833               	.LBE69:
 834               	.LBE70:
 835               	.LBE71:
 836               	.LBE72:
 837               		.cfi_endproc
 838               	.LFE248:
 840               		.section	.rodata.clock_source_base,"a",@progbits
 843               	clock_source_base:
 844 0000 05        		.byte	5
 845 0001 04        		.byte	4
 846 0002 03        		.byte	3
 847 0003 02        		.byte	2
 848 0004 01        		.byte	1
 849               		.section	.data.ratio_base,"aw",@progbits
 852               	ratio_base:
 853 0000 0004      		.word	1024
 854 0002 0001      		.word	256
 855 0004 4000      		.word	64
 856 0006 0800      		.word	8
 857 0008 0100      		.word	1
 858               		.comm	GPTD1,10,1
 859               	.global	regs_table
 860               		.section	.rodata.regs_table,"a",@progbits
 863               	regs_table:
 864 0000 8000      		.word	128
 865 0002 8100      		.word	129
 866 0004 8900      		.word	137
 867 0006 8800      		.word	136
 868 0008 8500      		.word	133
 869 000a 8400      		.word	132
 870 000c 3600      		.word	54
 871 000e 6F00      		.word	111
 872               		.text
 873               	.Letext0:
 874               		.file 2 "/usr/lib/gcc/avr/7.3.0/include/stddef.h"
 875               		.file 3 "/usr/lib/avr/include/stdint.h"
 876               		.file 4 "../../os/common/ports/AVR/compilers/GCC/chtypes.h"
 877               		.file 5 "../../os/rt/include/chearly.h"
 878               		.file 6 "../../os/rt/include/chobjects.h"
 879               		.file 7 "../../os/rt/include/chrfcu.h"
 880               		.file 8 "../../os/rt/include/chdebug.h"
 881               		.file 9 "../../os/rt/include/chtime.h"
 882               		.file 10 "../../os/rt/include/chlists.h"
 883               		.file 11 "../../os/common/ports/AVR/chcore.h"
 884               		.file 12 "../../os/rt/include/chsem.h"
 885               		.file 13 "../../os/rt/include/chmtx.h"
 886               		.file 14 "../../os/rt/include/chsys.h"
 887               		.file 15 "../../os/rt/include/chregistry.h"
 888               		.file 16 "../../os/rt/include/chevents.h"
 889               		.file 17 "../../os/oslib/include/chmemcore.h"
 890               		.file 18 "../../os/hal/include/hal_queues.h"
 891               		.file 19 "../../os/hal/ports/AVR/MEGA/LLD/GPIOv1/hal_pal_lld.h"
 892               		.file 20 "../../os/hal/include/hal_gpt.h"
 893               		.file 21 "../../os/hal/ports/AVR/MEGA/LLD/TIMv1/hal_gpt_lld.h"
 894               		.file 22 "../../os/hal/include/hal_i2c.h"
 895               		.file 23 "../../os/hal/ports/AVR/MEGA/LLD/I2Cv1/hal_i2c_lld.h"
 896               		.file 24 "../../os/hal/include/hal_serial.h"
 897               		.file 25 "../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.h"
 898               		.file 26 "../../os/rt/include/chschd.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 hal_gpt_lld.c
     /tmp/cc3mjsM2.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/cc3mjsM2.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/cc3mjsM2.s:4      *ABS*:000000000000003f __SREG__
     /tmp/cc3mjsM2.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/cc3mjsM2.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/cc3mjsM2.s:13     .text.__vector_11:0000000000000000 __vector_11
                            *COM*:000000000000000a GPTD1
     /tmp/cc3mjsM2.s:174    .text.gpt_lld_init:0000000000000000 gpt_lld_init
     /tmp/cc3mjsM2.s:193    .text.gpt_lld_start:0000000000000000 gpt_lld_start
     /tmp/cc3mjsM2.s:852    .data.ratio_base:0000000000000000 ratio_base
     /tmp/cc3mjsM2.s:863    .rodata.regs_table:0000000000000000 regs_table
     /tmp/cc3mjsM2.s:843    .rodata.clock_source_base:0000000000000000 clock_source_base
     /tmp/cc3mjsM2.s:487    .text.gpt_lld_stop:0000000000000000 gpt_lld_stop
     /tmp/cc3mjsM2.s:560    .text.gpt_lld_start_timer:0000000000000000 gpt_lld_start_timer
     /tmp/cc3mjsM2.s:665    .text.gpt_lld_stop_timer:0000000000000000 gpt_lld_stop_timer
     /tmp/cc3mjsM2.s:725    .text.gpt_lld_polled_delay:0000000000000000 gpt_lld_polled_delay

UNDEFINED SYMBOLS
__avr_in_isr
chSchIsPreemptionRequired
chSchDoPreemption
gptObjectInit
__udivmodsi4
__mulsi3
__do_copy_data
__do_clear_bss
